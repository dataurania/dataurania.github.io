{"version":3,"sources":["pages/EditPage/EditDataVideos/TimeLine/PerSeekBar.js","pages/EditPage/EditDataVideos/TimeLine/TimelineRuler.js","pages/EditPage/EditDataVideos/TimeLine/Needle.js","pages/EditPage/EditDataVideos/TimeLine/TimeSeekBar.js","pages/EditPage/EditDataVideos/TimeLine/TimeLine.js","tool/formateTime.js"],"names":["PerSeekBar","recordLocation","e","props","setMouseDownState","setCurrentX","clientX","setLeftOffsetWidth","videotime","offsetWidth","onMouseDownLeft","console","log","index","stopPropagation","setDragDirection","setCurrentBarIndex","onMouseDownRight","setDragCursor","changeToDrag","drag","bar","isDrag","setDragState","this","time","num","barScale","barWidthList","length","className","style","width","minWidth","ref","current","leftbar","onMouseDown","onClick","formateTime","cardItems","isGeneratedByAlg","background","React","Component","TimelineRuler","definedTime","d","minute","parseInt","second","calMarkLength","marginLeft","state","screenWidth","screenX","setSceneScale","setPosition","clickNeedle","bind","clickRuler","x","changedPosition","keepOneDecimalPoint","changeIndex","i","formerTotalLength","j","sceneScale","playVideoSlice","changeNowVideoTime","Math","floor","n","timeMarks","height","float","backgroundColor","marginTop","key","fontSize","push","scenePositionWithScale","scenePosition","display","justifyContent","id","position","left","borderRadius","zIndex","opacity","isPlayVideo","Needle","TimeSeekBar","onMouseMove","isMouseDown","currentBarIndex","dragDirection","currentX","leftOffsetWidth","rightOffsetWidth","setLeftBarWidth","offsetX","setRightBarWidth","distance","nextProps","nextState","dragCursor","cursor","map","item","TimeLine","sliderValueChanged","value","msec","t","Number","appendZero","sec","min","toLocaleString","minimumIntegerDigits"],"mappings":"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","file":"static/js/10.74b8719a.chunk.js","sourcesContent":["import React from 'react';\r\nimport formateTime from '@/tool/formateTime.js'\r\nexport default class PerSeekBar extends React.Component {\r\n\r\n    recordLocation = (e) => {\r\n        this.props.setMouseDownState(true)\r\n        this.props.setCurrentX(e.clientX)\r\n        this.props.setLeftOffsetWidth(this.videotime.offsetWidth)\r\n        // this.props.setRightOffsetWidth(this.drag.offsetWidth)\r\n    }\r\n    onMouseDownLeft = (e) => {\r\n        console.log(this.props.index, 'mouseLeftDown')\r\n        e.stopPropagation();\r\n        this.props.setDragDirection('left')\r\n        //记录当前的index\r\n        this.props.setCurrentBarIndex(this.props.index)\r\n        this.recordLocation(e)\r\n    }\r\n\r\n    //鼠标按下\r\n    onMouseDownRight = (e) => {\r\n        e.stopPropagation();\r\n        this.props.setDragDirection('right')\r\n        //记录当前的index\r\n        this.props.setCurrentBarIndex(this.props.index)\r\n        //TODO:可以记录当前的id号\r\n        this.recordLocation(e)\r\n        this.props.setDragCursor('ew-resize')\r\n    }\r\n\r\n    changeToDrag = (e) => {\r\n        e.stopPropagation();\r\n        let drag = this.props.bar.isDrag\r\n        this.props.setDragState(this.props.index, !drag)\r\n    }\r\n\r\n    render() {\r\n        const { bar, index, time } = this.props\r\n        let num = index + 1 < 10 ? (\"0\" + (index + 1)) : (\"\" + (index + 1))\r\n        var barScale = this.props.barWidthList.length>=9?2.03:1\r\n        //先采用第一个作为测试\r\n        return (\r\n            <div className='per-seek-bar' >\r\n                {\r\n                    index !== 0 ? (\r\n                        <div className='right-btn' style={{ width: '24px', minWidth: '24px' }}>\r\n                            <div className='drag-icon'></div>\r\n                        </div>) : null\r\n                }\r\n\r\n                {\r\n                    bar.isDrag ?\r\n                        (\r\n                            <div\r\n                                className='left-bar-drag'\r\n                                ref={current => this.videotime = current}\r\n                                style={\r\n                                    {\r\n                                        width: bar.leftbar/barScale,\r\n                                        minWidth: 140/barScale,\r\n                                        // position: dragDirection === 'left' && isMouseDown && currentBarIndex === index ? 'absolute' : 'relative',\r\n                                        // left: dragDirection === 'left' && isMouseDown && currentBarIndex === index ? leftDist : '0px'\r\n                                    }\r\n                                }>\r\n                                <div className='drag-line' onMouseDown={this.onMouseDownLeft}></div>\r\n                                <div\r\n                                    className='drag-time-text'                 \r\n                                    style={{ width: (bar.leftbar - 13)/barScale, minWidth: 127/barScale }}\r\n                                    onClick={this.changeToDrag}>\r\n                                    {formateTime(time)}\r\n                                </div>\r\n                                <div className='drag-line-box' onMouseDown={this.onMouseDownRight}>\r\n                                    <div className='drag-line' ></div>\r\n                                </div>\r\n\r\n                            </div>) :\r\n                        (\r\n                            <div\r\n                                className='left-bar-undrag'\r\n                                onClick={this.changeToDrag}\r\n                                style={ this.props.cardItems[index].isGeneratedByAlg?{background:\"#E4F2FB\",width: bar.leftbar/barScale,minWidth: 140/barScale}:{background:\"#FFE1A4\",width: bar.leftbar/barScale,minWidth: 140/barScale}\r\n\r\n                                 }>\r\n                                {num}\r\n                            </div>\r\n                        )\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n}","import { templateSettings } from 'lodash';\nimport React, { Component } from 'react';\nimport { Rnd } from \"react-rnd\";\nimport Needle from './Needle';\nimport './TimelineRuler.css';\n\nconst performingHeight = 228;\nconst realHeight = 24;\nconst width = 12;\nconst offset = 21;\n\n\n\nexport default class TimelineRuler extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            screenWidth: 1000,\n            screenX: 0,\n        }\n        this.props.setSceneScale(1);\n        this.props.setPosition(0);\n        \n        this.clickNeedle = this.clickNeedle.bind(this);\n        this.clickRuler = this.clickRuler.bind(this);\n    }\n\n    /* shouldComponentUpdate(nextProps, nextState){\n        console.log(this.props)\n        console.log('test')\n    } */\n\n    /* componentDidUpdate(){\n        this.props.setSceneScale(1);\n        this.props.setPosition(0);\n    } */\n\n\n    clickNeedle() {\n        \n    }\n\n    clickRuler(e) {\n        /* const clickPosition = e.nativeEvent.offsetX;\n        var newX = clickPosition - offset;\n        if (newX < 0) {\n            newX = 0\n        } else if (newX > this.props.sceneWidth) {\n            newX = this.props.sceneWidth;\n        }\n        const changedPosition = this.keepOneDecimalPoint(newX / 3);\n        this.props.setPosition(changedPosition);\n        //点击尺子切换到对应的图表\n        let changeIndex = this.props.cardItems.length-1;\n        for(let i= 0;i<this.props.cardItems.length;i++){\n            let formerTotalLength = 0;\n            for(let j =0;j<=i;j++){\n                formerTotalLength += 47.3 * this.props.cardItems[j].time/ 6000 /this.props.sceneScale+ 7.3\n            }\n            if(changedPosition-formerTotalLength<=0)\n            {\n                changeIndex = i;\n                break;\n            }\n        }\n        this.props.playVideoSlice(changeIndex);\n        this.props.changeNowVideoTime((changedPosition-7.3*changeIndex)/47.3*6000*this.props.sceneScale) */\n        //this.props.unselectElement();\n    }\n\n    changeNeedlePlace(x) {\n        let changedPosition = this.keepOneDecimalPoint(x / 3);\n        this.props.setPosition(changedPosition);\n        //点击尺子切换到对应的图表\n        let changeIndex = this.props.cardItems.length-1;\n        for(let i= 0;i<this.props.cardItems.length;i++){\n            let formerTotalLength = 0;\n            for(let j =0;j<=i;j++){\n                formerTotalLength += 47.3 * this.props.cardItems[j].time/ 6000 /this.props.sceneScale+ 7.3\n            }\n            if(changedPosition-formerTotalLength<=0)\n            {\n                changeIndex = i;\n                break;\n            }\n        }\n        this.props.playVideoSlice(changeIndex);\n        this.props.changeNowVideoTime((changedPosition-7.3*changeIndex)/47.3*6000*this.props.sceneScale)\n        //this.props.unselectElement();\n    }\n\n    keepOneDecimalPoint(x) {\n        return Math.floor(x * 10) / 10;\n    }\n\n    definedTime = (d) => {\n        let minute = parseInt(d/60);\n        let second = d % 60;\n        let time = null;\n        \n        if(minute && second) {\n            time = `${minute}m${second}s`\n        } else if(!second) {\n            time = `${minute}m`\n        } else {\n            time = `${second}s`\n        }\n        return time;\n    }\n\n    calMarkLength = (d) => {\n        let marginLeft = 0;\n        if(d >= 4) marginLeft = 20 / 2;\n        if(d === 3) marginLeft = 22 / 2;\n        if(d === 2) marginLeft = 18 / 2;\n        return -marginLeft\n    }\n\n    // 时间标记 0s 3s 6s 12s\n    timeMarks() {\n        if(this.props.sceneScale==1)\n        {\n            const n = 61 * this.props.sceneScale;\n            //第一个时间标记：0s\n            let timeMarks = [\n            <div>\n                <div style={{ height: 4, width: 89, float: 'left', backgroundColor: 'white',marginLeft:-11,marginTop:-6 }}>\n                    <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                </div>\n                <div key={0} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent',marginTop:3 }}>\n                    <p style={{ marginTop: -8, marginLeft: -6, float: 'left', fontSize: '12px' }}>0s</p>\n                </div>\n            </div>\n            ];\n\n            //剩下的时间标记 3s 6s 9s 等等\n            for (let index = 1; index < n; index++) {\n                \n                let definedTime=this.definedTime(index);\n                if (index % (3 * this.props.sceneScale) !== 0) {\n\n                } else {\n                    timeMarks.push(\n                        <div>\n                            <div style={{ height: 4, width: 89, float: 'left', backgroundColor: 'white',marginLeft:-13,marginTop:-6 }}>\n                                <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                            </div>\n                            <div key={index} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent' ,marginTop:3}}>\n                                <p className='pTime' style={{ marginTop: -8, marginLeft: this.calMarkLength(definedTime.length), float: 'left', fontSize: '12px' }}>{definedTime}</p>\n                            </div>\n                        </div>\n                    )\n                }\n            }\n            return timeMarks;\n        }\n        else\n        {\n            const n = 61 * this.props.sceneScale;\n            //第一个时间标记：0s\n            let timeMarks = [\n            <div>\n                <div style={{ height: 4, width: 72, float: 'left', backgroundColor: 'white',marginLeft:-11,marginTop:-6 }}>\n                    <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                </div>\n                <div key={0} style={{ height: 2, width: 72, float: 'left', backgroundColor: 'transparent',marginTop:3 }}>\n                    <p style={{ marginTop: -8, marginLeft: -6, float: 'left', fontSize: '12px' }}>0s</p>\n                </div>\n            </div>\n            ];\n    \n            //剩下的时间标记 3s 6s 9s 等等\n            for (let index = 1; index < n; index++) {\n                \n                let definedTime=this.definedTime(index);\n                if (index % (3 * this.props.sceneScale) !== 0) {\n    \n                } else {\n                    timeMarks.push(\n                        <div>\n                            <div style={{ height: 4, width: 106, float: 'left', backgroundColor: 'white',marginLeft:-13,marginTop:-6 }}>\n                                <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                            </div>\n                            <div key={index} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent' ,marginTop:3}}>\n                                <p className='pTime' style={{ marginTop: -8, marginLeft: this.calMarkLength(definedTime.length), float: 'left', fontSize: '12px' }}>{definedTime}</p>\n                            </div>\n                        </div>\n                    )\n                }\n            }\n            return timeMarks;\n        }\n    }\n\n    render() {\n        const{scenePosition} = this.props;\n        const scenePositionWithScale = scenePosition;\n        let height = realHeight;\n        \n        let needle = <Rnd\n            style={{ zIndex: 2 }}\n            size={{ width: width, height: height }}\n            position={{ x: scenePositionWithScale, y: 0 }}\n            bounds='parent'\n            disableDragging={false}\n            enableResizing={{}}\n            enableUserSelectHack={false}\n            /* onDrag={(e, d) => {\n                this.props.isPlayVideo ?\n                null :\n                this.changeNeedlePlace(d.x);\n            }}\n            onDragStop={(e, d) => {\n                this.props.isPlayVideo ?\n                null :\n                this.changeNeedlePlace(d.x);\n            }} */\n        >\n            <Needle/>\n        </Rnd>;\n\n        return (\n            <div className='timeline-ruler' style={{display: 'flex', justifyContent:'center'}}>\n                <div\n                    id={\"timeline-ruler\"}\n                    style={{\n                        height: height, width: '95%' , backgroundColor: 'transparent', position: 'relative', left: '-7', display: 'flex', justifyContent:'center'\n                    }}>\n                    {/* <div className=\"timeMarks\" style={{ width: '100%', marginLeft: offset + 3, marginTop: 4, marginRight: -offset, backgroundColor: 'transparent', position: 'absolute', zIndex: 0 }}>\n                        <div style={{ width: '100%', display: 'flex'}}>\n                            {this.timeMarks()}\n                        </div>\n                    </div> */}\n                    <div className=\"timeMarks\" id={\"timeMarks\"} style={{height: 3, width: '100%',borderRadius:15 ,marginTop:10, backgroundColor: '#F6F6F7', position: 'absolute', zIndex: 0}}>\n\n                    </div>\n                    <div\n                        id={'timeline-ruler-clickable-area'}\n                        style={{ height: height, width: '100%', position: 'absolute', zIndex: 1, opacity: 0 }}\n                        onClick={this.props.isPlayVideo ? null : e => this.clickRuler(e)}\n                    />\n                    {/* {needle} */}\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nexport default class Needle extends Component {\n    render() {\n        return (\n            <div style ={{marginLeft:-10}}>\n                <div style={{width: 12, height: 8}}/>\n                {/* <div id='triangle-down'/> */}\n                <div style={{width: 15, height: 15, backgroundColor: '#ff9c2b', marginLeft: 5, borderRadius:9, marginTop:-2}}/>\n            </div>\n        )\n    }\n}\n","import React from 'react';\r\nimport { convertSizeToCssValue } from 'react-split-pane/lib/SplitPane';\r\nimport PerSeekBar from './PerSeekBar';\r\n\r\nexport default class TimeSeekBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(this.props.barWidthList!=nextProps.barWidthList)\r\n        {\r\n            if(nextProps.barWidthList.length>=9)\r\n            {\r\n                nextProps.setSceneScale(2)\r\n                return true;\r\n            }\r\n            else\r\n            {\r\n                nextProps.setSceneScale(1)\r\n                return true;\r\n            }\r\n        }\r\n        else\r\n            return false;\r\n    }\r\n\r\n    //鼠标移动\r\n    onMouseMove = (e) => {\r\n        if (!this.props.isMouseDown || this.props.currentBarIndex < 0) return      \r\n        const { dragDirection, currentX, leftOffsetWidth, rightOffsetWidth, currentBarIndex, setLeftBarWidth, setRightBarWidth } = this.props\r\n        const offsetX = e.clientX - currentX;\r\n        let distance=leftOffsetWidth+ offsetX\r\n        console.log(leftOffsetWidth,leftOffsetWidth+ offsetX)\r\n\r\n        var barScale = this.props.barWidthList.length>=9?2.03:1\r\n        \r\n        if(leftOffsetWidth+ offsetX<140/barScale){\r\n            if(leftOffsetWidth===140/barScale)return\r\n            setLeftBarWidth(currentBarIndex, 140)\r\n            return\r\n        }\r\n        if (dragDirection === 'right') {\r\n            setLeftBarWidth(currentBarIndex, distance*barScale)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { barWidthList, cardItems ,dragCursor} = this.props\r\n        return (\r\n            <div className='time-seek-bar'>\r\n                <div\r\n                    className='all-seek-bar-slide'\r\n                    onMouseMove={this.onMouseMove}\r\n                    style={{cursor:dragCursor}}>\r\n                    {\r\n                        barWidthList.map((item, index) => {\r\n                            return (\r\n                                <PerSeekBar {...this.props} bar={item} index={index} key={index} time={cardItems.length === 0 ? 6000 : cardItems[index].time} />\r\n                            )\r\n                        })}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport './TimeLine.less'\r\nimport { Slider } from 'antd';\r\nimport TimeSeekBar from './TimeSeekBar';\r\nimport TimelineRuler from './TimelineRuler'\r\n\r\nexport default class TimeLine extends React.Component {\r\n\r\n    //slider控制zoom的大小\r\n    sliderValueChanged = (value) => {\r\n        // console.log(value)\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        // this.props.initTimeLineBarWidth(this.props.cardItems.length)\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className='video-time-control'>\r\n                <div className='left-control-panel'>\r\n                    <div className='time-line'>\r\n                        <TimelineRuler {...this.props} />\r\n                    </div>\r\n                        {/* <TimeSeekBar {...this.props} /> */}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","export default function (t = 0) {\r\n    let msec\r\n    Number.parseInt(t % 1000)<100? msec = appendZero(Number.parseInt(t % 1000)): msec = appendZero(Number.parseInt(t % 1000/10))\r\n    \r\n    // const msec = appendZero(Number.parseInt(t % 1000))\r\n    const sec = appendZero(Number.parseInt(t/1000%60))\r\n    const min = appendZero(Number.parseInt(t/60000%60));\r\n\r\n    return `${min}:${sec}.${msec}`;\r\n\r\n}\r\n\r\nconst appendZero = n=>n.toLocaleString({},{minimumIntegerDigits:2});"],"sourceRoot":""}