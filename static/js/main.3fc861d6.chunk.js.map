{"version":3,"sources":["constant/FactType.js","constant/AggregationType.js","pages lazy /^/.//.*$/ groupOptions: {} namespace object","view/FactEditor/helper.js","tool/getSuitableBreakdownList.js","reducer/story.js","reducer/user.js","reducer/video.js","reducer/index.js","store.js","components/LazyLoadingView/LazyLoading.js","components/LazyLoadingView/index.js","App.js","serviceWorker.js","autoani.js","index.js","constant/ChartType.js","tool/fact2visRule.js","tool/getSupportedChartTypes.js","Chart.js","tool/datafilter.js","tool/fact2visAllRule.js","sentencer/fact-templates/association.js","sentencer/fact-templates/categorization.js","sentencer/fact-templates/difference.js","sentencer/fact-templates/distribution.js","sentencer/fact-templates/extreme.js","sentencer/fact-templates/outlier.js","sentencer/fact-templates/proportion.js","sentencer/fact-templates/rank.js","sentencer/fact-templates/trend.js","sentencer/fact-templates/value.js","sentencer/fact-templates/index.js","sentencer/fact-templates-zh/association.js","sentencer/fact-templates-zh/categorization.js","sentencer/fact-templates-zh/difference.js","sentencer/fact-templates-zh/distribution.js","sentencer/fact-templates-zh/extreme.js","sentencer/fact-templates-zh/outlier.js","sentencer/fact-templates-zh/proportion.js","sentencer/fact-templates-zh/rank.js","sentencer/fact-templates-zh/trend.js","sentencer/fact-templates-zh/value.js","sentencer/fact-templates-zh/index.js","sentencer/index.js","constant/FieldType.js","action/type.js","constant/OperationType.js","constant/ConvertType.js","action/userAction.js","tool/fact2vis.js","tool/fact2unitVis.js","vis/dataloader.js","vis/visualization/facttype.js","vis/visualization/aggtype.js","vis/fact.js","vis/visualization/marktype.js","vis/visualization/size.js","vis/visualization.js","vis/pipeline.js","vis/actions/action.js","vis/actions/dataprocess.js","vis/charts/chart.js","vis/visualization/color.js","vis/charts/barchart/index.js","vis/charts/linechart/index.js","vis/charts/scatterplot/index.js","vis/charts/unitvis/unit.js","vis/charts/unitvis/index.js","vis/actions/addchart.js","vis/visualization/annotationtype.js","vis/actions/annotations/annotator.js","vis/actions/annotations/arrow.js","vis/actions/annotations/coloredarea.js","vis/actions/annotations/circle.js","vis/actions/annotations/contour.js","vis/actions/annotations/fill.js","vis/actions/annotations/desaturate.js","vis/actions/annotations/distribution.js","vis/actions/annotations/fade.js","vis/actions/annotations/glow.js","vis/actions/annotations/hide.js","vis/actions/annotations/label.js","vis/actions/annotations/reference.js","vis/actions/annotations/regression.js","vis/actions/annotations/separate.js","vis/actions/annotations/show.js","vis/actions/annotations/symbol.js","vis/actions/annotations/texture.js","vis/actions/annotations/tip.js","vis/actions/annotations/tooltip.js","vis/actions/addannotation.js","vis/actions/addencoding.js","vis/actions/addaggregation.js","vis/visualization/titletype.js","vis/actions/title/fade.js","vis/actions/title/titler.js","vis/actions/addtitle.js","vis/actions/caption/fade.js","vis/actions/caption/captioner.js","vis/visualization/captiontype.js","vis/actions/addcaption.js","vis/actions/modifyencoding.js","vis/actions/removeencoding.js","vis/parser.js","vis/sentencer/fact-templates/association.js","vis/sentencer/fact-templates/categorization.js","vis/sentencer/fact-templates/difference.js","vis/sentencer/fact-templates/distribution.js","vis/sentencer/fact-templates/extreme.js","vis/sentencer/fact-templates/outlier.js","vis/sentencer/fact-templates/proportion.js","vis/sentencer/fact-templates/rank.js","vis/sentencer/fact-templates/trend.js","vis/sentencer/fact-templates/value.js","vis/sentencer/fact-templates/index.js","vis/sentencer/index.js","vis/narrativechart.js"],"names":["VALUE","TREND","CATEGORIZATION","DIFFERENCE","PROPORTION","DISTRIBUTION","RANK","ASSOCIATION","EXTREME","OUTLIER","SUM","MAX","MIN","AVG","COUNT","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","t","keys","Object","module","exports","isValid","fact","type","FactType","measure","length","groupby","focus","customizeFact","schema","data","newFact","assign","groupbyList","getSuitableBreakdownList","chart","field","measureList","filter","key","push","gbValueList","getFieldValue","value","encoding","aggregate","filteredData","datafilter","subspace","aggregatedRows","getAggregatedRows","measureField","max","reduce","a","b","extremeFocus","extremeValue","newOrder","sort","y","d","x","newOrderValue","n","posQ3","parseInt","posQ1","decimalQ3","decimalQ1","Q3","Q1","Low","Up","outlierIndex","forEach","i","groupbyFieldList","indexOf","getMaxRows","rawData","d3","entries","index","values","aggregation","calculateData","sumData","Array","fill","sumRows","getSumRows","getAverageRows","getMinRows","countData","countRows","getCountRows","fieldName","from","Set","factType","chartType","suitableBreakdownList","fact2visAllRules","breakdownSets","breakdownType","add","breakdownList","s","uuid","localStorage","getItem","JSON","parse","sessionStorage","plur","require","convertField","param","gb","gbWords","split","gbWordIndex","plurWord","replace","initialState","fileName","real_filename","title","subtitle","method","facts","unusedFacts","relations","hoverFactIndex","selectedFactIndex","maxStoryLength","timeLimit","information","resultCoverage","chartDiversity","aggregationLevel","rewardWeight","logicality","diversity","integrity","generateProgress","visData","historyStory","isExportPdf","generateUrl","filters","filtersTitle","datares","schemaFilter","filtersChangeFlag","editstate","editingCurrentFact","filtersLocal","filtersTitleLocal","dataresLocal","schemaFilterLocal","leftPaneWidth","rightPaneWidth","animationFlag","animationType","userInfo","Cookies","get","username","uid","isLogin","operateState","OperationType","BEFORE_UPLOAD","convertType","ConvertType","FACTSHEET","currentLocale","isClosePannel","cardItems","videoIndex","currentSpec","nowVideoTime","allVideoTime","isPlayVideo","leftContent","ActionType","SET_DEFAULT","barWidthList","dragDirection","isMouseDown","isDrag","currentX","leftOffsetWidth","rightOffsetWidth","currentBarIndex","scenePosition","sceneScale","dragCursor","question","narrative_spec","isGenerating","temp_spec","operatorType","combineReducers","story","newFacts","state","action","newState","INIT_RELATION","storyRelations","INIT_FACT","storyFacts","SELECT_FACT","ADD_FACT","concat","UPDATE_FACT","_","cloneDeep","INSERT_FACT","newUnusedFacts","splice","insert","INSERT_FACT_BY_FACT","addingFact","CHANGE_FACT","originFact","origin","targetFact","target","DELETE_FACT","DELETE_UNUSEDFACT","ORDER_FACTS","sourceIndex","moved","destinationIndex","SET_HOVER_INDEX","CHANGE_METHOD","SET_STORY_PARAMETER","facts2charts","SET_AGGREGATION_LEVEL","level","SET_REWARD_WEIGHT","newWeight","GENERATE_STORY","coverage","UPDATE_PROGRESS","Number","totalLength","currentLength","toFixed","EXPORT_PDF","CHANGE_TITLE","CHANGE_SUBTITLE","CHANGE_CURRENT_EDITING","UPLOAD_DATA","genTitle","Math","min","CONNECT_DATA","UPDATE_COMMENT_STORY_INFO","storyParameter","historyfacts","historyTitle","historySubtitle","historStoryParameter","historyAggregationLevel","historyResultCoverage","VISUALIZE_DATA","UPDATE_UUID","setItem","stringify","UPDATE_DATA_URL","CHANGE_TO_ANIMATION","UPDATE_PANNEL_WIDTH","UPDATE_FILTERS","schemaNoTextID","dataclone","datares1","item","itemfield","item1","parseFloat","schemaFilter1","filtersField","filtersIndex","mean","median","std","var","UPDATE_FILTERS_TITLE","UPDATE_DATARES","dateres","UPDATE_SCHEMA_FILTER","UPDATE_FILTERS_CHANGE_FLAG","UPDATE_FILTERS_LOCAL","user","UPDATE_USER_INFO","UPDATE_USER_OPERATION","UPDATE_CONVERT_TYPE","CLOSE_PANNEL","isClose","UPDATE_LOCALE","video","INIT_VIDOE_CARD","cards","firstCard","specData","spec","fact2unitSpec","filename","time","isGeneratedByAlg","REPLAY_VIDEO_SLICE","PLAY_VIDEO_SLICE","PLAY_VIDEO_CONTINUE","ADD_NOW_VIDEO_TIME","CHANGE_NOW_VIDEO_TIME","CHANGE_ALL_VIDEO_TIME","STOP_PLAY_VIDEO_CONTINUE","ADD_EMPTY_CARD","leftbar","rightbar","REMOVE_CARD","ADD_CARD","insertFact","cardIndex","cardDataAll","factToCard","specs","console","log","ADD_CARDS","insertCards","cardsIndex","cardData","CHANGE_CARD","cardDatas","EXCHANGE_CARD","cardAll","card","CHANGE_CARD_FLAG","flag","SET_LEFTSIDER_CONTENT","content","INIT_TIME_LINE_BAR_WDITH","bar","ADD_BAR_TO_TIME_LINE_BAR","addBar","addIndex","newBar","ADD_BARS_TO_TIME_LINE_BAR","addBars","bars","myAddIndex","myNewBar","DELETE_BAR_FROM_TIME_LINE_BAR","deleteIndex","deletedBar","CHANGE_TIME_LINE_BAR","changedBar","originBar","targetBar","SET_LEFT_BAR_WIDTH","leftBarWidth","width","cardTimes","formerTime","floor","SET_RIGHT_BAR_WIDTH","rightBarWidth","SET_DRAG_DIRECTION","direction","SET_MOUSE_DOWN_STATE","mouseDown","SET_DRAG_STATE","barDrag","drag","SET_CURRENT_X","clientx","SET_LEFT_OFFSET_WIDTH","offset","SET_RIGHT_OFFSET_WIDTH","SET_CURRENT_BAR_INDEX","SET_POSITION","position","SET_SCENE_SCALE","scale","SET_DRAG_CURSOR","cursor","QUESTION_2_GIF","ISGENERATINGGIF","CHANGE_TEMP_SPEC","OPERATOR_CHANGE","ANIMATION_CHANGE","CHANGE_KEYS","CHANGE_OPERATOR","operatorList","operators","myOrigin","myTarget","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunk","store","createStore","rootReducer","applyMiddleware","configureStore","LazyLoading","this","props","isLoading","error","Component","Loading","url","Loadable","loader","loading","locales","App","initDone","initDefaultLang","lang","navigator","language","userLanguage","substr","loadLocales","intl","init","updateLocale","setState","MyRoute","MyComponent","rest","render","routerProps","onChangeLocaleListener","exact","path","React","connect","dispatch","userAction","Boolean","location","hostname","match","AutoAni","instance","_container","document","createElement","_paragraph","_spec","_timeouts","autovis","AutoVis","animationDelay","fade","Fade","container","duration","videoSpec","dataspec","newspec","setTimeout","paragraph","load","shouldShowCaption","generate","bind","animateTransition","clearTimeout","ReactDOM","getElementById","serviceWorker","ready","registration","unregister","catch","message","JUXTAPOSITION","AREA_CHART","VERTICAL_BAR_CHART","VERTICAL_DIFFERENCE_BAR_CHART","VERTICAL_DIFFERENCE_ARROW_CHART","HORIZONTAL_BAR_CHART","PROGRESS_BAR_CHART","STACKED_BAR_CHART","ISOTYPE_BAR_CHART","PROPORTION_ISOTYPE_CHART","COLOR_FILLING_MAP","BUBBLE_CHART","TEXT_CHART","LINE_CHART","STACKED_LINE_CHART","RING_CHART","HALF_RING_CHART","PIE_CHART","SCATTER_PLOT","TREE_MAP","BUBBLE_MAP","fact2visRules","ChartType","FieldType","CATEGORICAL","TEMPORAL","GEOGRAPHICAL","getSupportedChartTypes","supportedChartTypes","isEdit","breakDown","rules","rang","Chart","narrativechart","NarrativeChart","height","size","style","margin","sub","templates","pickFactTemplate","association","categorization","difference","distribution","extreme","outlier","proportion","rank","trend","random","sentence","template","convertAggregation","aggType","AggregationType","NONE","convertAggregationZH","convertMeasure","toLowerCase","convertGroupby","formatNum","num","number","floatNum","intNum","toString","substring","result","counter","unshift","join","genFactSubspace","toUpperCase","genFactSubspaceZh","genFactSentence","_fact","parameter","parameterList","focusValue","undefined","round","pickFactTemplateZh","isArray","genSubtitle","NUMERICAL","CHANGE_DATA","UPDATE_STORY_CARD_NUMBER","SET_DATA_FILTER","SET_DATA_FACT","SET_EDIT_SLICE","UPLOADIND","UPLOADED","GENERATING","GENERATED","FAILED","FILE_LARGE","ADDING","ADD_FAILED","ADDED","PUBLISHED","updateUserInfo","updateOperation","updateCovertType","closePannel","shema","choiceCount","choicedChartTypes","getChoice","getFactChartType","getvischartype","fact2chart","specFact","breakdown","specChart","showSuggestion","specNew","width_height","fact2unitVis","DataLoader","_data","_schema","reject","numericalFields","numerical","Association","Categorization","Difference","Distribution","Extreme","Outlier","Proportion","Rank","Trend","Value","Fact","_factdata","_type","_measure","_subspace","_breakdown","_parameter","_focus","schemaDict","column","subtype","pictype","isPostCode","factdata","items","k1","k2","xx","yy","xy","Lxx","Lyy","Lxy","sqrt","pearson","categories","focusItem","find","restItems","yEncoding","seriesData","pieData","ret","X","Y","sumX","sumY","sumXY","sumXSq","N","m","getLeastSquares","apply","fs","abs","extremeItem","maxValue","minValue","hasOwnProperty","includes","value1","value2","valueNoRange1","valueNoRange2","max1","min1","measures","breakdowns","aggdata","agg","aggdata1","aggdata2","breakdownfields","element1","element2","aggdata3","element3","columns","sum","avg","count","series","categoryData","MarkType","BAR","LINE","POINT","UNIT","Size","LARGE","WIDE","MIDDLE","SMALL","Visualization","_processedData","_size","_width","_height","_mark","_chart","_caption","pipeline","operate","Pipeline","_actions","vis","actions","Action","_target","DataProcess","_select","_groupby","_filter","row","f","processedData","selectCols","selects","groupbys","groupbyCols","g","aggCols","res","col","obj","recordName","tempObj","record","aggFuncRouter","colData","aggFunc","_svg","append","selectAll","remove","channel","Color","mode","lightMode","BACKGROUND","DIVIDER","AXIS","TITLE","TEXT","ANNOTATION","DEFAULT","TOOLTIP","SEQUENTIAL","DIVERGING","darkMode","BarChart","attr","drawAxis","encodeXY","encodeColor","svg","triangleSize","ceil","axis","select","fontsize","text","factData","xEncoding","categoriesData","category","xScale","range","domain","padding","yScale","nice","axisX","axisY","ticks","tickSize","tickPadding","tickFormat","call","node","getBBox","enter","bandwidth","colorEncoding","stackData","LineChart","line","circleSize","factKey","Scatterplot","color","encodeSize","sizeEncoding","maxR","minR","Unit","_id","_x","_y","_radius","_color","_visible","_opacity","_unitgroup","_dataItem","Unitvis","units","initvis","unit","vwidth","maxSet","setLength","maxRow","maxColumn","radius","initX","initY","visible","j","baseX","baseY","transition","delay","textSize","textSizef","fontSize","fontFamily","span","offsetWidth","offsetHeight","visibility","display","body","appendChild","textContent","innerText","getComputedStyle","sizeField","unitgroup","yField","xField","xValueFreq","rollup","v","yValueFreq","num_of_x","num_of_y","averageradius","ratio","nodesmaxcount","MaxNodeinEach","rowTotalWidth","radiusa","strlen","strmax","Minleftpadding","columnTotalHeight","centernodex","leftpadding","rightpadding","centernodey","unitnew","nodesvalue1","xValue","yValue","unitExtent","force","strength","stop","tick","opacity","iBar","breakdownField","databreakdown","breakdownValue","maxCount","wradius","hradius","visibleUnits","barUnits","xbar","ybar","ymax","xunit","yuint","xmaxCount","leftPadding","topPadding","yset","colorField","colorFreqValue","colorValue","colorUnits","iColor","paddingMaxR","allcenter","xcenter","ycenter","nodesradius","focusextent1","nodesScale","iterations","changesize","changecolor","changelayout","encodeX","encodeY","operator","aggregated","aggregatedunit","xy_aggregared","aggregated_point","object","rectsize","aggregateValue","AddChart","mark","_mark2chart","visualize","Annotator","Arrow","focus_elements","empty","arrow_points","nodes","one_element","data_x","data_y","nodeName","getAttribute","new_arrow_points","point","Band","prototype","moveToFront","each","parentNode","selected","circleR","circleX","circleY","rectX","rectY","Circle","Contour","Fill","Desaturate","positions","isNaN","line_generator","curve","Glow","feMerge","Hide","Label","focus_element","formatData","__data__","data_d","data_r","offset_y","bbox","Reference","x1","x2","y1","y2","x_axis_bbox","x_lower_bound","x_upper_bound","getAverageValue","points","Regression","y_axis_bbox","y_lower_bound","y_upper_bound","x_ymin","x_ymax","Infinity","Separate","Show","Symbol","size_icon","Texture","config","Tip","Tooltip","maxWidth","forCard","textAnchor","words","virtualE","textE","getComputedTextLength","lineHeight","rowCount","testLine","testWidth","toolTipSvg","tooltipRect","tooltip","textMultiline","textWidth","textHeight","rectWidth","rectHeight","tooltipTriangle","AddAnnotation","_method","_style","annotator","_type2annotator","annotate","AnnotationType","Coloredarea","AddEncoding","addEncoding","AddAggregation","addAggregation","TitleType","FADE","AddTitle","_animation","animation","titler","_type2title","maketitle","CaptionType","AddCaption","Captioner","_type2caption","makecaption","ModifyEncoding","modifyEncoding","RemoveEncoding","removeEncoding","Parser","_parsedData","factspec","focus_target","actionspecs","actionspec","actions_to_add","submethod","subactionspec","irregularPluralsJSON","irregularPlurals","Map","word","plural","has","firstLetter","charAt","_loader","_vis","_shouldShowCaption","parser","loaded","process","caption","temporalBreakdown","Sentencer","run","reason"],"mappings":"uGAAe,KACXA,MAAO,QACPC,MAAO,QACPC,eAAgB,iBAChBC,WAAY,aACZC,WAAY,aACZC,aAAc,eACdC,KAAM,OACNC,YAAa,cACbC,QAAS,UACTC,QAAS,Y,gCCVE,KACXC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,MAAO,U,qxFCLX,IAAIC,EAAM,CACT,sBAAuB,CACtB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,uBAAwB,CACvB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,mCAAoC,CACnC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,+BAAgC,CAC/B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,2BAA4B,CAC3B,GACA,EACA,EACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,IAED,oCAAqC,CACpC,IACA,EACA,IAED,uCAAwC,CACvC,IACA,EACA,IAED,yCAA0C,CACzC,IACA,EACA,IAED,iCAAkC,CACjC,GACA,EACA,EACA,EACA,IAED,oCAAqC,CACpC,GACA,EACA,EACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,IAED,6BAA8B,CAC7B,GACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,IACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,IAED,0CAA2C,CAC1C,IACA,EACA,IAED,kCAAmC,CAClC,GACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,GACA,EACA,EACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,6BAA8B,CAC7B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,kDAAmD,CAClD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,qDAAsD,CACrD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,uDAAwD,CACvD,IACA,EACA,IAED,2CAA4C,CAC3C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,8CAA+C,CAC9C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,0CAA2C,CAC1C,IACA,EACA,IAED,6CAA8C,CAC7C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,gDAAiD,CAChD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,gDAAiD,CAChD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,mDAAoD,CACnD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,+CAAgD,CAC/C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,8CAA+C,CAC9C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,iDAAkD,CACjD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yCAA0C,CACzC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yCAA0C,CACzC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yCAA0C,CACzC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,+CAAgD,CAC/C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yCAA0C,CACzC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,uCAAwC,CACvC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,0CAA2C,CAC1C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,uCAAwC,CACvC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,0CAA2C,CAC1C,IACA,EACA,EACA,EACA,EACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,IAED,2CAA4C,CAC3C,IACA,EACA,IAED,0DAA2D,CAC1D,IACA,EACA,IAED,wCAAyC,CACxC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,yCAA0C,CACzC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,iDAAkD,CACjD,IACA,EACA,EACA,EACA,EACA,GACA,IAED,oDAAqD,CACpD,IACA,EACA,EACA,EACA,EACA,GACA,IAED,mDAAoD,CACnD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,sDAAuD,CACtD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,kDAAmD,CAClD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,qDAAsD,CACrD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,oDAAqD,CACpD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,uDAAwD,CACvD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yDAA0D,CACzD,IACA,EACA,IAED,yDAA0D,CACzD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4DAA6D,CAC5D,IACA,EACA,EACA,EACA,EACA,EACA,IAED,uDAAwD,CACvD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,0DAA2D,CAC1D,IACA,EACA,EACA,EACA,EACA,EACA,IAED,8CAA+C,CAC9C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,iDAAkD,CACjD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,2CAA4C,CAC3C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,4CAA6C,CAC5C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,sDAAuD,CACtD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yDAA0D,CACzD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,2DAA4D,CAC3D,IACA,EACA,IAED,iDAAkD,CACjD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,oDAAqD,CACpD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,GACA,EACA,EACA,EACA,GACA,IAED,sCAAuC,CACtC,GACA,EACA,EACA,EACA,GACA,IAED,4CAA6C,CAC5C,IACA,EACA,IAED,+CAAgD,CAC/C,IACA,EACA,IAED,gDAAiD,CAChD,IACA,EACA,IAED,mDAAoD,CACnD,IACA,EACA,IAED,8CAA+C,CAC9C,IACA,EACA,EACA,EACA,GACA,IAED,iDAAkD,CACjD,IACA,EACA,EACA,EACA,GACA,IAED,mDAAoD,CACnD,IACA,EACA,IAED,iDAAkD,CACjD,IACA,EACA,EACA,IAED,oDAAqD,CACpD,IACA,EACA,EACA,IAED,mDAAoD,CACnD,IACA,EACA,EACA,IAED,uDAAwD,CACvD,IACA,EACA,IAED,sDAAuD,CACtD,IACA,EACA,EACA,IAED,2CAA4C,CAC3C,GACA,EACA,EACA,EACA,GACA,IAED,8CAA+C,CAC9C,GACA,EACA,EACA,EACA,GACA,IAED,sCAAuC,CACtC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,uCAAwC,CACvC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,kDAAmD,CAClD,IACA,EACA,IAED,qDAAsD,CACrD,IACA,EACA,IAED,mDAAoD,CACnD,IACA,EACA,EACA,EACA,EACA,GACA,IAED,sDAAuD,CACtD,IACA,EACA,EACA,EACA,EACA,GACA,IAED,gDAAiD,CAChD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,mDAAoD,CACnD,IACA,EACA,EACA,EACA,EACA,EACA,IAED,qDAAsD,CACrD,IACA,EACA,IAED,4CAA6C,CAC5C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,+CAAgD,CAC/C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,+CAAgD,CAC/C,GACA,EACA,EACA,EACA,EACA,EACA,IAED,gDAAiD,CAChD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,wDAAyD,CACxD,IACA,EACA,EACA,EACA,GACA,GACA,IAED,2DAA4D,CAC3D,IACA,EACA,EACA,EACA,GACA,GACA,IAED,wDAAyD,CACxD,IACA,EACA,EACA,EACA,GACA,IAED,2DAA4D,CAC3D,IACA,EACA,EACA,EACA,GACA,IAED,yDAA0D,CACzD,IACA,EACA,EACA,EACA,GACA,IAED,4DAA6D,CAC5D,IACA,EACA,EACA,EACA,GACA,IAED,gEAAiE,CAChE,IACA,EACA,IAED,mEAAoE,CACnE,IACA,EACA,IAED,+DAAgE,CAC/D,IACA,EACA,IAED,kEAAmE,CAClE,IACA,EACA,IAED,2DAA4D,CAC3D,IACA,EACA,GACA,IAED,8DAA+D,CAC9D,IACA,EACA,GACA,IAED,kEAAmE,CAClE,IACA,EACA,EACA,EACA,EACA,GACA,IAED,qEAAsE,CACrE,IACA,EACA,EACA,EACA,EACA,GACA,IAED,uEAAwE,CACvE,IACA,EACA,IAED,qDAAsD,CACrD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,wDAAyD,CACxD,GACA,EACA,EACA,EACA,EACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,KAED,qDAAsD,CACrD,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,oDAAqD,CACpD,IACA,EACA,KAED,qDAAsD,CACrD,IACA,EACA,KAED,gDAAiD,CAChD,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,2CAA4C,CAC3C,IACA,EACA,KAED,0CAA2C,CAC1C,IACA,EACA,KAED,kDAAmD,CAClD,IACA,EACA,KAED,gDAAiD,CAChD,IACA,EACA,KAED,yCAA0C,CACzC,IACA,EACA,KAED,kDAAmD,CAClD,IACA,EACA,KAED,0DAA2D,CAC1D,IACA,EACA,KAED,mDAAoD,CACnD,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,0DAA2D,CAC1D,IACA,EACA,KAED,sDAAuD,CACtD,IACA,EACA,KAED,uDAAwD,CACvD,IACA,EACA,KAED,uDAAwD,CACvD,IACA,EACA,KAED,oDAAqD,CACpD,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,kDAAmD,CAClD,IACA,EACA,KAED,0CAA2C,CAC1C,IACA,EACA,KAED,yCAA0C,CACzC,IACA,EACA,KAED,+CAAgD,CAC/C,IACA,EACA,KAED,8CAA+C,CAC9C,IACA,EACA,KAED,8CAA+C,CAC9C,IACA,EACA,KAED,2CAA4C,CAC3C,IACA,EACA,KAED,4CAA6C,CAC5C,IACA,EACA,KAED,yCAA0C,CACzC,IACA,EACA,KAED,+CAAgD,CAC/C,IACA,EACA,KAED,2CAA4C,CAC3C,IACA,EACA,KAED,8CAA+C,CAC9C,IACA,EACA,KAED,iDAAkD,CACjD,IACA,EACA,KAED,mDAAoD,CACnD,IACA,EACA,KAED,kDAAmD,CAClD,IACA,EACA,KAED,kCAAmC,CAClC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,qCAAsC,CACrC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,2BAA4B,CAC3B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,oCAAqC,CACpC,IACA,EACA,EACA,EACA,EACA,EACA,GAED,uCAAwC,CACvC,IACA,EACA,EACA,EACA,EACA,EACA,GAED,yCAA0C,CACzC,IACA,EACA,IAED,iCAAkC,CACjC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,oCAAqC,CACpC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,sBAAuB,CACtB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,uBAAwB,CACvB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,+BAAgC,CAC/B,IACA,EACA,EACA,GACA,IAED,kCAAmC,CAClC,IACA,EACA,EACA,GACA,IAED,+BAAgC,CAC/B,IACA,EACA,EACA,EACA,EACA,EACA,IAED,kCAAmC,CAClC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,4BAA6B,CAC5B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,+BAAgC,CAC/B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,iCAAkC,CACjC,IACA,EACA,IAED,0BAA2B,CAC1B,GACA,EACA,EACA,EACA,EACA,EACA,GAED,2BAA4B,CAC3B,GACA,EACA,EACA,EACA,EACA,EACA,GAED,mCAAoC,CACnC,IACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,IAED,mCAAoC,CACnC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,mCAAoC,CACnC,IACA,EACA,EACA,EACA,EACA,EACA,GAED,sCAAuC,CACtC,IACA,EACA,EACA,EACA,EACA,EACA,GAED,0CAA2C,CAC1C,IACA,EACA,EACA,EACA,GACA,IAED,6CAA8C,CAC7C,IACA,EACA,EACA,EACA,GACA,IAED,gCAAiC,CAChC,GACA,EACA,EACA,EACA,EACA,EACA,GAED,mCAAoC,CACnC,GACA,EACA,EACA,EACA,EACA,EACA,GAED,qCAAsC,CACrC,IACA,EACA,IAED,qCAAsC,CACrC,IACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,IAED,WAAY,CACX,GACA,EACA,EACA,EACA,EACA,EACA,IAED,YAAa,CACZ,GACA,EACA,EACA,EACA,EACA,EACA,IAED,kBAAmB,CAClB,IACA,EACA,EACA,EACA,EACA,EACA,IAED,qBAAsB,CACrB,IACA,EACA,EACA,EACA,EACA,EACA,IAED,iBAAkB,CACjB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,oBAAqB,CACpB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,aAAc,CACb,GACA,EACA,EACA,EACA,EACA,EACA,IAED,cAAe,CACd,GACA,EACA,EACA,EACA,EACA,EACA,IAED,iCAAkC,CACjC,IACA,EACA,EACA,EACA,IAED,oCAAqC,CACpC,IACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,IAED,sBAAuB,CACtB,IACA,EACA,EACA,EACA,EACA,EACA,IAED,yBAA0B,CACzB,IACA,EACA,EACA,EACA,EACA,EACA,IAED,2BAA4B,CAC3B,IACA,EACA,IAED,wBAAyB,CACxB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,yBAA0B,CACzB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,mCAAoC,CACnC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,sCAAuC,CACtC,IACA,EACA,EACA,EACA,EACA,EACA,IAED,wCAAyC,CACxC,IACA,EACA,KAED,8BAA+B,CAC9B,GACA,EACA,EACA,EACA,EACA,EACA,IAED,iCAAkC,CACjC,GACA,EACA,EACA,EACA,EACA,EACA,IAED,mBAAoB,CACnB,GACA,EACA,EACA,EACA,EACA,EACA,IAED,sBAAuB,CACtB,GACA,EACA,EACA,EACA,EACA,EACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAON,QAAQQ,IAAIF,EAAIG,MAAM,GAAGd,IAAIG,EAAoBK,IAAID,MAAK,WAChE,OAAOJ,EAAoBY,EAAEH,EAAID,EAAI,OAGvCV,EAAoBe,KAAO,WAC1B,OAAOC,OAAOD,KAAKhB,IAEpBC,EAAoBW,GAAK,IACzBM,EAAOC,QAAUlB,G,4EC5nDjB,sGAOamB,EAAU,SAAUC,GAC7B,IAAID,GAAU,EACd,OAAQC,EAAKC,MACT,KAAKC,IAAS/B,YACkB,IAAxB6B,EAAKG,QAAQC,QAAgBJ,EAAKK,QAAQD,SAC1CL,GAAU,GACd,MAEJ,KAAKG,IAASpC,eACNkC,EA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","file":"static/js/main.3fc861d6.chunk.js","sourcesContent":["export default {\n    VALUE: 'value',\n    TREND: 'trend',\n    CATEGORIZATION: 'categorization',\n    DIFFERENCE: 'difference',\n    PROPORTION: 'proportion',\n    DISTRIBUTION: 'distribution',\n    RANK: 'rank',\n    ASSOCIATION: 'association',\n    EXTREME: 'extreme',\n    OUTLIER: 'outlier'\n}","export default {\n    SUM: 'sum',\n    MAX: 'max',\n    MIN: 'min',\n    AVG: 'avg',\n    COUNT: 'count',\n    // NONE: 'none'\n}","var map = {\n\t\"./EditPage/DataShow\": [\n\t\t54,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t18\n\t],\n\t\"./EditPage/DataShow/\": [\n\t\t54,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t18\n\t],\n\t\"./EditPage/DataShow/DataShowView\": [\n\t\t149,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t35\n\t],\n\t\"./EditPage/DataShow/DataShowView.js\": [\n\t\t149,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t35\n\t],\n\t\"./EditPage/DataShow/DataShowView.less\": [\n\t\t289,\n\t\t7,\n\t\t84\n\t],\n\t\"./EditPage/DataShow/index\": [\n\t\t54,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t18\n\t],\n\t\"./EditPage/DataShow/index.js\": [\n\t\t54,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t18\n\t],\n\t\"./EditPage/EditDashboard\": [\n\t\t63,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t25\n\t],\n\t\"./EditPage/EditDashboard/\": [\n\t\t63,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t25\n\t],\n\t\"./EditPage/EditDashboard/EditPage\": [\n\t\t161,\n\t\t9,\n\t\t66\n\t],\n\t\"./EditPage/EditDashboard/EditPage.js\": [\n\t\t161,\n\t\t9,\n\t\t66\n\t],\n\t\"./EditPage/EditDashboard/EditPage.less\": [\n\t\t297,\n\t\t7,\n\t\t85\n\t],\n\t\"./EditPage/EditDashboard/index\": [\n\t\t63,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t25\n\t],\n\t\"./EditPage/EditDashboard/index.js\": [\n\t\t63,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t25\n\t],\n\t\"./EditPage/EditDataComics\": [\n\t\t64,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t26\n\t],\n\t\"./EditPage/EditDataComics/\": [\n\t\t64,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t26\n\t],\n\t\"./EditPage/EditDataComics/EditPage\": [\n\t\t162,\n\t\t9,\n\t\t67\n\t],\n\t\"./EditPage/EditDataComics/EditPage.js\": [\n\t\t162,\n\t\t9,\n\t\t67\n\t],\n\t\"./EditPage/EditDataComics/EditPage.less\": [\n\t\t298,\n\t\t7,\n\t\t86\n\t],\n\t\"./EditPage/EditDataComics/index\": [\n\t\t64,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t26\n\t],\n\t\"./EditPage/EditDataComics/index.js\": [\n\t\t64,\n\t\t9,\n\t\t4,\n\t\t9,\n\t\t26\n\t],\n\t\"./EditPage/EditDataVideos\": [\n\t\t65,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t13\n\t],\n\t\"./EditPage/EditDataVideos/\": [\n\t\t65,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t13\n\t],\n\t\"./EditPage/EditDataVideos/DataShow\": [\n\t\t55,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t19\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/\": [\n\t\t55,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t19\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/DataShowView\": [\n\t\t150,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t36\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/DataShowView.js\": [\n\t\t150,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t36\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/DataShowView.less\": [\n\t\t290,\n\t\t7,\n\t\t87\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/index\": [\n\t\t55,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t19\n\t],\n\t\"./EditPage/EditDataVideos/DataShow/index.js\": [\n\t\t55,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t19\n\t],\n\t\"./EditPage/EditDataVideos/EditPage\": [\n\t\t164,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t28\n\t],\n\t\"./EditPage/EditDataVideos/EditPage.js\": [\n\t\t164,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t28\n\t],\n\t\"./EditPage/EditDataVideos/EditPage.less\": [\n\t\t299,\n\t\t7,\n\t\t88\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Association\": [\n\t\t128,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t41\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Association.js\": [\n\t\t128,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t41\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Categorization\": [\n\t\t129,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t42\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Categorization.js\": [\n\t\t129,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t42\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Difference\": [\n\t\t130,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t43\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Difference.js\": [\n\t\t130,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t43\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Distribution\": [\n\t\t131,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t44\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Distribution.js\": [\n\t\t131,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t44\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Extreme\": [\n\t\t132,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t40\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Extreme.js\": [\n\t\t132,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t40\n\t],\n\t\"./EditPage/EditDataVideos/Fact/GodFact\": [\n\t\t167,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t45\n\t],\n\t\"./EditPage/EditDataVideos/Fact/GodFact.js\": [\n\t\t167,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t45\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Outlier\": [\n\t\t133,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t46\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Outlier.js\": [\n\t\t133,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t46\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Proportion\": [\n\t\t134,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t47\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Proportion.js\": [\n\t\t134,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t47\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Rank\": [\n\t\t135,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t48\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Rank.js\": [\n\t\t135,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t48\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Trend\": [\n\t\t136,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t49\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Trend.js\": [\n\t\t136,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t49\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Value\": [\n\t\t137,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t50\n\t],\n\t\"./EditPage/EditDataVideos/Fact/Value.js\": [\n\t\t137,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t50\n\t],\n\t\"./EditPage/EditDataVideos/Fact/helper\": [\n\t\t124,\n\t\t9,\n\t\t71\n\t],\n\t\"./EditPage/EditDataVideos/Fact/helper.js\": [\n\t\t124,\n\t\t9,\n\t\t71\n\t],\n\t\"./EditPage/EditDataVideos/Fact/leftFactChartEditor.less\": [\n\t\t303,\n\t\t7,\n\t\t89\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar\": [\n\t\t58,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t16\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/\": [\n\t\t58,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t16\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/DataFact\": [\n\t\t145,\n\t\t9,\n\t\t1,\n\t\t5,\n\t\t6,\n\t\t11,\n\t\t55\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/DataFact.js\": [\n\t\t145,\n\t\t9,\n\t\t1,\n\t\t5,\n\t\t6,\n\t\t11,\n\t\t55\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/DataFilter\": [\n\t\t144,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t39\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/DataFilter.js\": [\n\t\t144,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t39\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/EditSlice\": [\n\t\t146,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t33\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/EditSlice.js\": [\n\t\t146,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t33\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/LeftSidebar\": [\n\t\t152,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t30\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/LeftSidebar.js\": [\n\t\t152,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t30\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/LeftSidebar.less\": [\n\t\t293,\n\t\t7,\n\t\t90\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/OperatorSequence\": [\n\t\t148,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t34\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/OperatorSequence.js\": [\n\t\t148,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t34\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/SingleOperator\": [\n\t\t138,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t38\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/SingleOperator.js\": [\n\t\t138,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t38\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/index\": [\n\t\t58,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t16\n\t],\n\t\"./EditPage/EditDataVideos/LeftSidebar/index.js\": [\n\t\t58,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t16\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView\": [\n\t\t59,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t23\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/\": [\n\t\t59,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t23\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/TalkBottom\": [\n\t\t125,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t54\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/TalkBottom.js\": [\n\t\t125,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t54\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/TalkBottom.less\": [\n\t\t286,\n\t\t7,\n\t\t91\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/index\": [\n\t\t59,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t23\n\t],\n\t\"./EditPage/EditDataVideos/TalkBottomView/index.js\": [\n\t\t59,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t23\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine\": [\n\t\t53,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t27\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/\": [\n\t\t53,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t27\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/Needle\": [\n\t\t120,\n\t\t9,\n\t\t72\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/Needle.js\": [\n\t\t120,\n\t\t9,\n\t\t72\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/PerSeekBar\": [\n\t\t118,\n\t\t9,\n\t\t69\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/PerSeekBar.js\": [\n\t\t118,\n\t\t9,\n\t\t69\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimeLine\": [\n\t\t139,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t79\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimeLine.js\": [\n\t\t139,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t79\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimeLine.less\": [\n\t\t288,\n\t\t7,\n\t\t92\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimeSeekBar\": [\n\t\t126,\n\t\t9,\n\t\t4,\n\t\t68\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimeSeekBar.js\": [\n\t\t126,\n\t\t9,\n\t\t4,\n\t\t68\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimelineRuler\": [\n\t\t119,\n\t\t9,\n\t\t8,\n\t\t64\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimelineRuler.css\": [\n\t\t287,\n\t\t7,\n\t\t83\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/TimelineRuler.js\": [\n\t\t119,\n\t\t9,\n\t\t8,\n\t\t64\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/index\": [\n\t\t53,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t27\n\t],\n\t\"./EditPage/EditDataVideos/TimeLine/index.js\": [\n\t\t53,\n\t\t9,\n\t\t4,\n\t\t8,\n\t\t12,\n\t\t27\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow\": [\n\t\t56,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t21\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/\": [\n\t\t56,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t21\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/TimeDisplay\": [\n\t\t141,\n\t\t9,\n\t\t70\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/TimeDisplay.js\": [\n\t\t141,\n\t\t9,\n\t\t70\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/VideoDisplay\": [\n\t\t142,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t5,\n\t\t56,\n\t\t63\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/VideoDisplay.js\": [\n\t\t142,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t5,\n\t\t56,\n\t\t63\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/VideoShow\": [\n\t\t155,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t37\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/VideoShow.js\": [\n\t\t155,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t37\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/VideoShow.less\": [\n\t\t291,\n\t\t7,\n\t\t93\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/index\": [\n\t\t56,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t21\n\t],\n\t\"./EditPage/EditDataVideos/VideoShow/index.js\": [\n\t\t56,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t21\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList\": [\n\t\t57,\n\t\t9,\n\t\t0,\n\t\t4,\n\t\t5,\n\t\t6,\n\t\t24\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/\": [\n\t\t57,\n\t\t9,\n\t\t0,\n\t\t4,\n\t\t5,\n\t\t6,\n\t\t24\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/DropView\": [\n\t\t143,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t10,\n\t\t65,\n\t\t60\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/DropView.js\": [\n\t\t143,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t10,\n\t\t65,\n\t\t60\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/FactCard\": [\n\t\t127,\n\t\t9,\n\t\t5,\n\t\t6,\n\t\t11,\n\t\t62\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/FactCard.js\": [\n\t\t127,\n\t\t9,\n\t\t5,\n\t\t6,\n\t\t11,\n\t\t62\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCard\": [\n\t\t117,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t10,\n\t\t61\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCard.js\": [\n\t\t117,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t10,\n\t\t61\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCardCaption\": [\n\t\t123,\n\t\t9,\n\t\t73\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCardCaption.js\": [\n\t\t123,\n\t\t9,\n\t\t73\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCardFooter\": [\n\t\t122,\n\t\t9,\n\t\t74\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/SliceCardFooter.js\": [\n\t\t122,\n\t\t9,\n\t\t74\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/UnitVisDraw\": [\n\t\t121,\n\t\t9,\n\t\t10,\n\t\t75\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/UnitVisDraw.js\": [\n\t\t121,\n\t\t9,\n\t\t10,\n\t\t75\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/VideoSliceCardList\": [\n\t\t151,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t6,\n\t\t10,\n\t\t57\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/VideoSliceCardList.js\": [\n\t\t151,\n\t\t9,\n\t\t0,\n\t\t5,\n\t\t6,\n\t\t10,\n\t\t57\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/VideoSliceCardList.less\": [\n\t\t292,\n\t\t7,\n\t\t94\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/index\": [\n\t\t57,\n\t\t9,\n\t\t0,\n\t\t4,\n\t\t5,\n\t\t6,\n\t\t24\n\t],\n\t\"./EditPage/EditDataVideos/VideoSliceCardList/index.js\": [\n\t\t57,\n\t\t9,\n\t\t0,\n\t\t4,\n\t\t5,\n\t\t6,\n\t\t24\n\t],\n\t\"./EditPage/EditDataVideos/icon/bg.png\": [\n\t\t304,\n\t\t7,\n\t\t102\n\t],\n\t\"./EditPage/EditDataVideos/icon/calliope_undraw.png\": [\n\t\t305,\n\t\t7,\n\t\t103\n\t],\n\t\"./EditPage/EditDataVideos/icon/categorical.png\": [\n\t\t306,\n\t\t7,\n\t\t104\n\t],\n\t\"./EditPage/EditDataVideos/icon/cursor-drag.ico\": [\n\t\t307,\n\t\t7,\n\t\t101\n\t],\n\t\"./EditPage/EditDataVideos/icon/database_black.png\": [\n\t\t308,\n\t\t7,\n\t\t105\n\t],\n\t\"./EditPage/EditDataVideos/icon/database_yellow.png\": [\n\t\t309,\n\t\t7,\n\t\t106\n\t],\n\t\"./EditPage/EditDataVideos/icon/edit_black.png\": [\n\t\t310,\n\t\t7,\n\t\t107\n\t],\n\t\"./EditPage/EditDataVideos/icon/edit_yellow.png\": [\n\t\t311,\n\t\t7,\n\t\t108\n\t],\n\t\"./EditPage/EditDataVideos/icon/error.png\": [\n\t\t312,\n\t\t7,\n\t\t109\n\t],\n\t\"./EditPage/EditDataVideos/icon/exit.png\": [\n\t\t313,\n\t\t7,\n\t\t110\n\t],\n\t\"./EditPage/EditDataVideos/icon/export_white.png\": [\n\t\t314,\n\t\t7,\n\t\t111\n\t],\n\t\"./EditPage/EditDataVideos/icon/fullscreen.png\": [\n\t\t315,\n\t\t7,\n\t\t112\n\t],\n\t\"./EditPage/EditDataVideos/icon/geo.png\": [\n\t\t316,\n\t\t7,\n\t\t113\n\t],\n\t\"./EditPage/EditDataVideos/icon/geographical.png\": [\n\t\t317,\n\t\t7,\n\t\t114\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon-cannot-generate.png\": [\n\t\t318,\n\t\t7,\n\t\t115\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon-generate.png\": [\n\t\t319,\n\t\t7,\n\t\t116\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon-unfold.png\": [\n\t\t320,\n\t\t7,\n\t\t117\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon_database_yellow.png\": [\n\t\t321,\n\t\t7,\n\t\t118\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon_edit_yellow.png\": [\n\t\t322,\n\t\t7,\n\t\t119\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon_input_yellow.png\": [\n\t\t323,\n\t\t7,\n\t\t120\n\t],\n\t\"./EditPage/EditDataVideos/icon/icon_voice_yellow.png\": [\n\t\t324,\n\t\t7,\n\t\t121\n\t],\n\t\"./EditPage/EditDataVideos/icon/identification.png\": [\n\t\t325,\n\t\t7,\n\t\t122\n\t],\n\t\"./EditPage/EditDataVideos/icon/input_black.png\": [\n\t\t326,\n\t\t7,\n\t\t123\n\t],\n\t\"./EditPage/EditDataVideos/icon/input_yellow.png\": [\n\t\t327,\n\t\t7,\n\t\t124\n\t],\n\t\"./EditPage/EditDataVideos/icon/next.png\": [\n\t\t328,\n\t\t7,\n\t\t125\n\t],\n\t\"./EditPage/EditDataVideos/icon/num.png\": [\n\t\t329,\n\t\t7,\n\t\t126\n\t],\n\t\"./EditPage/EditDataVideos/icon/numerical.png\": [\n\t\t330,\n\t\t7,\n\t\t127\n\t],\n\t\"./EditPage/EditDataVideos/icon/temporal.png\": [\n\t\t331,\n\t\t7,\n\t\t128\n\t],\n\t\"./EditPage/EditDataVideos/icon/toUpload.png\": [\n\t\t332,\n\t\t7,\n\t\t129\n\t],\n\t\"./EditPage/EditDataVideos/icon/toVis.png\": [\n\t\t333,\n\t\t7,\n\t\t130\n\t],\n\t\"./EditPage/EditDataVideos/icon/upload.png\": [\n\t\t334,\n\t\t7,\n\t\t131\n\t],\n\t\"./EditPage/EditDataVideos/icon/vis.png\": [\n\t\t335,\n\t\t7,\n\t\t132\n\t],\n\t\"./EditPage/EditDataVideos/icon/vis_black.png\": [\n\t\t336,\n\t\t7,\n\t\t133\n\t],\n\t\"./EditPage/EditDataVideos/icon/voice.png\": [\n\t\t337,\n\t\t7,\n\t\t134\n\t],\n\t\"./EditPage/EditDataVideos/icon/voiceGif.gif\": [\n\t\t338,\n\t\t7,\n\t\t135\n\t],\n\t\"./EditPage/EditDataVideos/icon/voice_black.png\": [\n\t\t339,\n\t\t7,\n\t\t136\n\t],\n\t\"./EditPage/EditDataVideos/icon/voice_parsing.png\": [\n\t\t340,\n\t\t7,\n\t\t137\n\t],\n\t\"./EditPage/EditDataVideos/icon/voice_yellow.png\": [\n\t\t341,\n\t\t7,\n\t\t138\n\t],\n\t\"./EditPage/EditDataVideos/index\": [\n\t\t65,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t13\n\t],\n\t\"./EditPage/EditDataVideos/index.js\": [\n\t\t65,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t13\n\t],\n\t\"./EditPage/EditFactsheet\": [\n\t\t66,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t14\n\t],\n\t\"./EditPage/EditFactsheet/\": [\n\t\t66,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t14\n\t],\n\t\"./EditPage/EditFactsheet/EditPage\": [\n\t\t156,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/EditFactsheet/EditPage.js\": [\n\t\t156,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/EditFactsheet/EditPage.less\": [\n\t\t301,\n\t\t7,\n\t\t95\n\t],\n\t\"./EditPage/EditFactsheet/index\": [\n\t\t66,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t14\n\t],\n\t\"./EditPage/EditFactsheet/index.js\": [\n\t\t66,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t14\n\t],\n\t\"./EditPage/EditView\": [\n\t\t60,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t20\n\t],\n\t\"./EditPage/EditView/\": [\n\t\t60,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t20\n\t],\n\t\"./EditPage/EditView/DropView\": [\n\t\t147,\n\t\t9,\n\t\t6,\n\t\t11,\n\t\t76\n\t],\n\t\"./EditPage/EditView/DropView.js\": [\n\t\t147,\n\t\t9,\n\t\t6,\n\t\t11,\n\t\t76\n\t],\n\t\"./EditPage/EditView/EditView\": [\n\t\t153,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t32\n\t],\n\t\"./EditPage/EditView/EditView.js\": [\n\t\t153,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t32\n\t],\n\t\"./EditPage/EditView/index\": [\n\t\t60,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t20\n\t],\n\t\"./EditPage/EditView/index.js\": [\n\t\t60,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t4,\n\t\t20\n\t],\n\t\"./EditPage/EditView/index.less\": [\n\t\t294,\n\t\t7,\n\t\t96\n\t],\n\t\"./EditPage/FactListView\": [\n\t\t62,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/\": [\n\t\t62,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/BarBrush\": [\n\t\t115,\n\t\t9,\n\t\t77\n\t],\n\t\"./EditPage/FactListView/BarBrush.js\": [\n\t\t115,\n\t\t9,\n\t\t77\n\t],\n\t\"./EditPage/FactListView/FactCard\": [\n\t\t157,\n\t\t9,\n\t\t1,\n\t\t2,\n\t\t5,\n\t\t6,\n\t\t51\n\t],\n\t\"./EditPage/FactListView/FactCard.js\": [\n\t\t157,\n\t\t9,\n\t\t1,\n\t\t2,\n\t\t5,\n\t\t6,\n\t\t51\n\t],\n\t\"./EditPage/FactListView/FactList\": [\n\t\t160,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/FactList.js\": [\n\t\t160,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/NumericalFilter\": [\n\t\t116,\n\t\t9,\n\t\t1,\n\t\t2,\n\t\t52,\n\t\t59\n\t],\n\t\"./EditPage/FactListView/NumericalFilter.js\": [\n\t\t116,\n\t\t9,\n\t\t1,\n\t\t2,\n\t\t52,\n\t\t59\n\t],\n\t\"./EditPage/FactListView/index\": [\n\t\t62,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/index.js\": [\n\t\t62,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t7\n\t],\n\t\"./EditPage/FactListView/index.less\": [\n\t\t300,\n\t\t7,\n\t\t97\n\t],\n\t\"./EditPage/FactListView/schemaTest\": [\n\t\t158,\n\t\t9,\n\t\t78\n\t],\n\t\"./EditPage/FactListView/schemaTest.js\": [\n\t\t158,\n\t\t9,\n\t\t78\n\t],\n\t\"./H5page\": [\n\t\t67,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t22\n\t],\n\t\"./H5page/\": [\n\t\t67,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t22\n\t],\n\t\"./H5page/H5page\": [\n\t\t163,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t53\n\t],\n\t\"./H5page/H5page.js\": [\n\t\t163,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t53\n\t],\n\t\"./H5page/index\": [\n\t\t67,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t22\n\t],\n\t\"./H5page/index.js\": [\n\t\t67,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t22\n\t],\n\t\"./Homepage\": [\n\t\t68,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t15\n\t],\n\t\"./Homepage/\": [\n\t\t68,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t15\n\t],\n\t\"./Homepage/Content/ContentView\": [\n\t\t159,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t58\n\t],\n\t\"./Homepage/Content/ContentView.js\": [\n\t\t159,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t58\n\t],\n\t\"./Homepage/Content/ContentView.less\": [\n\t\t296,\n\t\t7,\n\t\t98\n\t],\n\t\"./Homepage/Homepage\": [\n\t\t165,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t29\n\t],\n\t\"./Homepage/Homepage.js\": [\n\t\t165,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t29\n\t],\n\t\"./Homepage/Homepage.less\": [\n\t\t302,\n\t\t7,\n\t\t99\n\t],\n\t\"./Homepage/PannelView\": [\n\t\t61,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t17\n\t],\n\t\"./Homepage/PannelView/\": [\n\t\t61,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t17\n\t],\n\t\"./Homepage/PannelView/PannelView\": [\n\t\t154,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t31\n\t],\n\t\"./Homepage/PannelView/PannelView.js\": [\n\t\t154,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t31\n\t],\n\t\"./Homepage/PannelView/PannelView.less\": [\n\t\t295,\n\t\t7,\n\t\t100\n\t],\n\t\"./Homepage/PannelView/index\": [\n\t\t61,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t17\n\t],\n\t\"./Homepage/PannelView/index.js\": [\n\t\t61,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t17\n\t],\n\t\"./Homepage/index\": [\n\t\t68,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t15\n\t],\n\t\"./Homepage/index.js\": [\n\t\t68,\n\t\t9,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t3,\n\t\t15\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(2).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 266;\nmodule.exports = webpackAsyncContext;","import FactType from '../../constant/FactType'\nimport getSuitableBreakdownList from '@/tool/getSuitableBreakdownList';\nimport datafilter from '@/tool/datafilter';\nimport * as d3 from 'd3';\n// import _ from 'lodash';\n\n// chart valid\nexport const isValid = function (fact) {\n    let isValid = false;\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            if (fact.measure.length === 2 && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.CATEGORIZATION:\n            if (fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.DIFFERENCE:\n            if (fact.measure.length   && fact.groupby.length && fact.focus.length >= 2)\n                isValid = true\n            break;\n\n        case FactType.DISTRIBUTION:\n            if (fact.measure.length   && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.EXTREME:\n            if (fact.measure.length   && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.OUTLIER:\n            if (fact.measure.length   && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.PROPORTION:\n            if (fact.measure.length   && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.RANK:\n            if (fact.measure.length   && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.TREND:\n            if (fact.measure.length   && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.VALUE:\n            if (fact.measure.length)\n                isValid = true\n            break;\n\n        default:\n            break;\n    }\n    return isValid\n}\n\n/***\n * fact\n ***/\nexport const customizeFact = function (fact, schema, data) {\n    let newFact = Object.assign({}, fact)\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            newFact.focus = [];\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                const measureList = schema.filter(key => key['type'] === \"numerical\");\n                if (newFact.measure.length === 0 && measureList.length > 0){\n                    newFact.measure = [{\"field\": measureList[0].field, \"aggregate\": \"count\"}];\n                }\n                if (newFact.measure.length === 1){\n                    newFact.measure.push({\"field\": 'COUNT', \"aggregate\": \"count\"});\n                }\n            }\n            break;\n\n        case FactType.CATEGORIZATION:\n            newFact.measure = []\n            newFact.focus = []\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n            }\n            break;\n\n        case FactType.DIFFERENCE:\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema),\n                    gbValueList = getFieldValue(data, fact.groupby);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n                /***** 12fact *****/\n                if (!newFact.focus.length) {\n                    newFact.focus = [{\n                            field: newFact.groupby[0],\n                            value: gbValueList[0],\n                        },\n                        {\n                            field: newFact.groupby[0],\n                            value: gbValueList[1],\n                        }\n                    ]\n                }    \n            }\n            break;\n\n        case FactType.DISTRIBUTION:\n            newFact.focus = []\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n            }\n            break;\n\n        case FactType.EXTREME:\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                } \n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n                // aggregation\n                if (newFact.measure.length && newFact.groupby.length) {\n                    let encoding = {}\n                    encoding['y'] = {};\n                    encoding['y']['field'] = newFact.measure[0].field;\n                    encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                    encoding['x'] = {};\n                    encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let measureField = newFact.measure[0]['field'];\n                    let max = aggregatedRows.reduce((a, b) => (a[measureField] > b[measureField]) ? a : b);\n\n                    /***** maxfact *****/\n                    if (!newFact.focus.length) {\n                        newFact.focus = [{\n                            field: newFact.groupby[0],\n                            value: max[newFact.groupby[0]],\n                            extremeFocus: 'max',\n                            extremeValue: max[newFact.measure[0].field]\n                        }]\n                    }\n                }\n            }\n            break;\n\n        case FactType.OUTLIER:\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n                // aggregation\n                if (newFact.measure.length && newFact.groupby.length) {\n                    let encoding = {}\n                    encoding['y'] = {};\n                    encoding['y']['field'] = newFact.measure[0].field;\n                    encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                    encoding['x'] = {};\n                    encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let newOrder = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.x.field]; })\n                    let newOrderValue = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.y.field]; })\n\n                    let n = newOrderValue.length\n                    // \n                    let posQ3 = parseInt((n - 1) * 0.25)\n                    let posQ1 = parseInt((n - 1) * 0.75)\n                    // \n                    let decimalQ3 = (n - 1) * 0.25 - posQ3\n                    let decimalQ1 = (n - 1) * 0.75 - posQ1\n                    let Q3 = newOrderValue[posQ3] + (newOrderValue[posQ3 + 1] - newOrderValue[posQ3]) * decimalQ3\n                    let Q1 = newOrderValue[posQ1] + (newOrderValue[posQ1 + 1] - newOrderValue[posQ1]) * decimalQ1\n\n                    let Low = Q1 - 1.5 * (Q3 - Q1)\n                    let Up = Q3 + 1.5 * (Q3 - Q1)\n                    let outlierIndex = []\n                    newOrderValue.forEach((d, i) => {\n                        if (d > Up || d < Low) {\n                            outlierIndex.push(i)\n                        }\n                    });\n\n                    /***** outlierfact *****/\n                    if (!newFact.focus.length && outlierIndex.length) {\n                        newFact.focus = [{\n                            field: fact.groupby[0],\n                            value: newOrder[outlierIndex[0]],\n                        }]\n                    }\n                }\n            }\n            break;\n\n        case FactType.PROPORTION:\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n                if (newFact.measure.length && newFact.groupby.length) {\n                    // aggregation\n                    let encoding = {}\n                        encoding['y'] = {};\n                        encoding['y']['field'] = newFact.measure[0].field;\n                        encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                        encoding['x'] = {};\n                        encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let measureField = newFact.measure[0]['field'];\n                    let max = aggregatedRows.reduce((a, b) => (a[measureField] > b[measureField]) ? a : b)\n\n                    /***** maxfact *****/\n                    if (!newFact.focus.length) {\n                        newFact.focus = [{\n                            field: newFact.groupby[0],\n                            value: max[newFact.groupby[0]],\n                        }]\n                    }\n                } \n            }\n            break;\n\n        case FactType.RANK:\n            newFact.focus = []\n            if(schema && data){\n                const groupbyList = getSuitableBreakdownList(newFact.type, newFact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n                // if (newFact.measure.length && newFact.groupby.length) {\n                //     // aggregation\n                //     let encoding = {}\n                //     encoding['y'] = {};\n                //     encoding['y']['field'] = newFact.measure[0].field;\n                //     encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                //     encoding['x'] = {};\n                //     encoding['x']['field'] = newFact.groupby[0];\n                //     let filteredData = datafilter(data, newFact.subspace)\n                //     let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                //     // filter gbValueList\n                //     let newOrder = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.x.field]; })\n        \n                //     /***** 3fact *****/\n\n                //     let focus = []\n                //     newOrder.forEach((d, i) => {\n                //         if (i < 3) {\n                //             focus.push({ field: fact.groupby[0], value: d })\n                //         }\n                //     });\n                //     if(!_.isEqual(focus, newFact.focus)){\n                //         newFact.focus = focus;\n                //     }\n                // }\n            }\n            break;\n\n        case FactType.TREND:\n            newFact.focus = [];\n            if(schema && data){\n                let groupbyList = schema.filter(key => key['type'] === \"temporal\")\n                const groupbyFieldList = groupbyList.map((d) => d.field);\n                if(groupbyList.length === 0){\n                    newFact.groupby = []\n                }else if(newFact.groupby.length === 0 || groupbyFieldList.indexOf(newFact.groupby[0]) === -1){\n                    newFact.groupby = [groupbyList[0].field];\n                }\n\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n            }\n            break;\n\n        case FactType.VALUE:\n            newFact.groupby = []\n            newFact.focus = []\n            if(schema && data){\n                if (newFact.measure.length === 0){\n                    newFact.measure = [{\"field\": 'COUNT', \"aggregate\": \"count\"}];\n                }\n            }\n            break;\n\n        default:\n            break;\n    }\n\n    return newFact\n}\n\n// fact valid for score to update(RANK/PROPORTION/OUTLIER/DIFFERENCE)\n//NO USE FOR A MOMENT!!!!!\nexport const isFactValid = function (_fact) {\n    let fact = Object.assign({}, _fact)\n    let isFactValid = false;\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            if (fact.measure.length === 2 && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.CATEGORIZATION:\n            if (fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.DIFFERENCE:\n            if (fact.measure && fact.groupby && fact.focus.length >= 2)\n                isFactValid = true\n            break;\n\n        case FactType.DISTRIBUTION:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.EXTREME:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.OUTLIER:\n            if (fact.measure && fact.groupby && fact.focus.length)\n                isFactValid = true\n            break;\n\n        case FactType.PROPORTION:\n            if (fact.measure && fact.groupby && fact.focus.length)\n                isFactValid = true\n            break;\n\n        case FactType.RANK:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length >= 3)\n                isFactValid = true\n            break;\n\n        case FactType.TREND:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.VALUE:\n            if (fact.measure)\n                isFactValid = true\n            break;\n\n        default:\n            break;\n    }\n    return isFactValid\n}\n\nconst getCountRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let countData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(() => {\n            countData[i] += 1\n        })\n        let countRows = Object.assign({}, d.values[0])\n        countRows['COUNT'] = countData[i]\n        return countRows\n    });\n    return data;\n}\n\nconst getMinRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let data = calculateData.map(function (d) {\n        let index = d3.scan(d.values, function (a, b) {\n            if (a[encoding.y.field] && b[encoding.y.field])\n                return a[encoding.y.field] - b[encoding.y.field];\n        });\n        if (index >= 0) {\n            return d.values[index]\n        } else {\n            return d.values[0]\n        }\n    });\n    return data;\n}\n\nconst getMaxRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let data = calculateData.map(function (d, i) {\n        let index = d3.scan(d.values, function (a, b) {\n            if (a[encoding.y.field] && b[encoding.y.field])\n                return b[encoding.y.field] - a[encoding.y.field];\n        });\n        if (index >= 0) {\n            return d.values[index]\n        } else {\n            return d.values[0];\n        }\n    });\n    return data;\n}\n\nconst getSumRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let sumData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(d => {\n            sumData[i] += d[encoding.y.field]\n        })\n        let sumRows = Object.assign({}, d.values[0])\n        sumRows[encoding.y.field] = sumData[i]\n        return sumRows\n    });\n    return data;\n}\n\nconst getAverageRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let sumData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(d => {\n            sumData[i] += d[encoding.y.field]\n        })\n        let sumRows = Object.assign({}, d.values[0])\n        sumRows[encoding.y.field] = sumData[i] / d.values.length;\n        return sumRows;\n    });\n    return data;\n}\n\nconst getAggregatedRows = (rawData, encoding) => {\n    let data;\n    switch (encoding.y.aggregation) {\n        case 'sum':\n            data = getSumRows(rawData, encoding);\n            break;\n        case 'avg':\n            data = getAverageRows(rawData, encoding);\n            break;\n        case 'max':\n            data = getMaxRows(rawData, encoding);\n            break;\n        case 'min':\n            data = getMinRows(rawData, encoding);\n            break;\n        case 'count':\n            data = getCountRows(rawData, encoding)\n            break;\n\n        default:\n            data = getMaxRows(rawData, encoding);\n            break;\n    }\n    return data;\n}\n\nconst getFieldValue = (rawData, fieldName) => {\n    if (fieldName)\n        return Array.from(new Set(rawData.map(d => d[fieldName])));\n    else return []\n}","import { fact2visAllRules } from '@/tool/fact2visAllRule';\n\nconst getSuitableBreakdownList = (factType, chartType, schema) => {\n    //acording to factType ---> filter\n    let suitableBreakdownList = fact2visAllRules.filter(x => x.fact === factType);\n\n    //if has choosed chartType ---> filter\n    if (chartType) {\n        suitableBreakdownList = suitableBreakdownList.filter(x => x.chart === chartType);\n    }\n    if (suitableBreakdownList.length === 0) return [];\n    let breakdownSets = new Set();\n    suitableBreakdownList.forEach(x => {\n        x.breakdownType.forEach(type => {\n            breakdownSets.add(type)\n        })\n    })\n    let breakdownList = Array.from(breakdownSets);\n    //console.log(\"suitableBreakdownList\", breakdownList)\n    let suitableSchema = schema.filter(s => {\n        return breakdownList.indexOf(s.type) !== -1\n    })\n    // suitableSchema = suitableSchema.map(shema => {\n    //     return shema.field\n    // })\n    //console.log(\"suitableSchema\", suitableSchema)\n    return suitableSchema;\n};\nexport default getSuitableBreakdownList;","import { facts2charts } from '../tool/fact2vis';\nimport ActionType from '../action/type';\nimport { genTitle } from \"../sentencer/index\";\nimport _ from 'lodash';\nimport * as d3 from 'd3';\n//let visData = sessionStorage.getItem('visData') ? JSON.parse(sessionStorage.getItem('visData')) : {};\nlet uuid = localStorage.getItem('uuid') ? JSON.parse(sessionStorage.getItem('uuid')) : null;\nconst plur = require('plur');\n\nconst convertField = function (field, param = 'single') {\n    let gb = field\n    if (param === 'single')\n        return gb\n    else if (param === 'plural') {\n        if (gb.indexOf(' of ') !== -1) {\n            let gbWords = gb.split(\" \")\n            let gbWordIndex = gbWords.indexOf(\"of\") - 1\n            if (gbWordIndex > -1) {\n                let plurWord = plur(gbWords[gbWordIndex], 2)\n                return gb.replace(gbWords[gbWordIndex], plurWord)\n            }\n        } else\n            return plur(gb, 2)\n    }\n}\n\n\nconst initialState = {\n    fileName: '.csv',\n    real_filename : '.csv',\n    title: '',\n    subtitle: '',\n    data: [],\n    schema: [],\n    method: 'sig',\n    facts: [],\n    unusedFacts: [],\n    relations: [],\n    hoverFactIndex: -1,\n    selectedFactIndex: 0,\n    maxStoryLength: 6,\n    timeLimit: 2000,// for each iteration\n    information: 40, // default 50 bits for 6 facts\n    resultCoverage: 1,\n    chartDiversity: 0,\n    aggregationLevel: 0,\n    rewardWeight: {\n        logicality: 0.33,\n        diversity: 0.33,\n        integrity: 0.33,\n    },\n    generateProgress: 0,\n    visData: {},\n    uuid,\n    historyStory: '',\n    isExportPdf: true,\n    generateUrl: '',//dataUrl for H5,\n\n    //edit filters\n    filters: [],\n    filtersTitle: '',\n    datares: [],\n    schemaFilter: [],\n    filtersChangeFlag: false,\n    editstate: false,\n    editingCurrentFact: null,\n    //local filters\n    filtersLocal: [],\n    filtersTitleLocal: '',\n    dataresLocal: [],\n    schemaFilterLocal: [],\n    leftPaneWidth:'21%',//left pannel\n    rightPaneWidth:'21%',\n\n    animationFlag: false, //this button is to change the facts to animated facts\n    animationType: \"\"\n};\n\nexport default (state = initialState, action) => {\n    const newState = Object.assign({}, state);\n    let newFacts;\n    switch (action.type) {\n        case ActionType.INIT_RELATION:\n            newState.relations = action.storyRelations;\n            newState.resultCoverage = 0;\n            return newState;\n        case ActionType.INIT_FACT:\n            newState.facts = action.storyFacts;\n            newState.resultCoverage = 0;\n            return newState;\n        case ActionType.SELECT_FACT:\n            newState.selectedFactIndex = action.index;\n            return newState;\n        case ActionType.ADD_FACT:\n            newFacts = newState.unusedFacts.slice();\n            newState.unusedFacts = newFacts.concat(action.facts);;\n            return newState;\n        case ActionType.UPDATE_FACT:\n            newState.selectedFactIndex = action.index;\n            let fact = _.cloneDeep(action.fact);\n            // fact.chart = getFactChartType(fact, state.data);\n            newFacts = newState.facts.slice();\n            newFacts[action.index] = fact;\n            newState.facts = newFacts;\n            newState.relations = Array(newState.facts.length).fill('none'); // reset relations\n            return newState;\n        case ActionType.INSERT_FACT:\n            newFacts = newState.facts.slice();\n            let newUnusedFacts = newState.unusedFacts.slice();\n            let newFact = newUnusedFacts.splice(action.index, 1)[0];\n            newFacts.splice(action.insert, 0, newFact);\n            newState.facts = newFacts;\n            newState.unusedFacts = newUnusedFacts;\n            newState.relations = Array(newFacts.length).fill('none'); // reset relations\n            return newState;\n        case  ActionType.INSERT_FACT_BY_FACT:\n            newFacts = newState.facts.slice();\n            let addingFact  = action.fact;\n            newFacts.splice(action.insert, 0, addingFact);\n            newState.facts = newFacts;\n            newState.relations = Array(newFacts.length).fill('none'); // reset relations\n            return newState;\n        case ActionType.CHANGE_FACT:\n            let originFact = newState.facts[action.origin];\n            let targetFact = newState.facts[action.target];\n            newFacts = newState.facts.slice();\n            newFacts[action.origin] = targetFact;\n            newFacts[action.target] = originFact;\n            newState.facts = newFacts;\n            return newState;\n        case ActionType.DELETE_FACT:\n            newFacts = newState.facts.slice();\n            newFacts.splice(action.index, 1);\n            if (newFacts.length === 0) {\n                // add default fact\n                // let newFact = new Fact(FactType.VALUE);\n                // newFacts.push(newFact);\n            }\n            newState.facts = newFacts;\n            newState.selectedFactIndex = newFacts.length - 1;\n            newState.relations = Array(newState.facts.length).fill('none'); // reset relations\n            return newState;\n        case ActionType.DELETE_UNUSEDFACT:\n            newFacts = newState.unusedFacts.slice();\n            newFacts.splice(action.index, 1);\n            newState.unusedFacts = newFacts;\n            return newState;\n        case ActionType.ORDER_FACTS:\n            newFacts = newState.facts.slice();\n            const [moved] = newFacts.splice(action.sourceIndex, 1);\n            newFacts.splice(action.sourceIndex < action.destinationIndex ? action.destinationIndex - 1 : action.destinationIndex, 0, moved);\n            newState.facts = newFacts;\n            newState.selectedFactIndex = action.destinationIndex;\n            newState.relations = Array(newState.facts.length).fill('none'); // reset relations\n            return newState;\n        case ActionType.SET_HOVER_INDEX:\n            newState.hoverFactIndex = action.index;\n            return newState;\n        case ActionType.CHANGE_METHOD:\n            newState.method = action.method;\n            return newState;\n        case ActionType.SET_STORY_PARAMETER:\n            newState.maxStoryLength = action.maxStoryLength;\n            newState.information = action.information;\n            newState.chartDiversity = action.chartDiversity;\n            if (action.chartDiversity !== state.chartDiversity) {\n                newFacts = newState.facts.slice();\n                //newFacts = facts2charts(newFacts, state.data, action.chartDiversity);\n                newFacts = facts2charts(newFacts, state.schema, action.chartDiversity);\n                newState.facts = newFacts;\n            }\n            newState.timeLimit = action.timeLimit;\n            return newState;\n\n        case ActionType.SET_AGGREGATION_LEVEL:\n            newState.aggregationLevel = action.level;\n            return newState;\n\n        case ActionType.SET_REWARD_WEIGHT:\n            let newWeight = Object.assign({}, newState.rewardWeight);\n            newWeight.logicality = action.logicality;\n            newWeight.diversity = action.diversity;\n            newWeight.integrity = action.integrity;\n            newState.rewardWeight = newWeight;\n            return newState;\n\n        case ActionType.GENERATE_STORY:\n            newState.facts = action.facts;\n            newState.relations = action.relations;\n            newState.resultCoverage = action.coverage;\n            newState.selectedFactIndex = action.facts.length - 1\n            return newState;\n\n        case ActionType.UPDATE_PROGRESS:\n            newState.generateProgress = Number(((action.totalLength - action.currentLength) / action.totalLength).toFixed(2) * 100);\n            return newState;\n        case ActionType.EXPORT_PDF:\n            newState.isExportPdf = action.isExportPdf;\n            return newState;\n        case ActionType.CHANGE_TITLE:\n            newState.title = action.title;\n            return newState;\n        case ActionType.CHANGE_SUBTITLE:\n            newState.subtitle = action.subtitle;\n            return newState;\n        case ActionType.CHANGE_CURRENT_EDITING:\n            newState.editstate = action.editstate;\n            newState.editingCurrentFact = action.editingCurrentFact;\n            return newState;\n\n\n        case ActionType.UPLOAD_DATA:\n            newState.fileName = action.fileName;\n            newState.real_filename = action.real_filename;\n            newState.title = genTitle(action.real_filename);\n            newState.facts = [];\n            newState.relations = [];\n            newState.schema = action.schema;\n            newState.data = action.data;\n            newState.filters = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n\n            newState.filtersTitle = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n            newState.datares = action.data;\n            newState.schemaFilter = action.schema;\n\n\n            newState.filtersLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n\n            newState.filtersTitleLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n\n            newState.dataresLocal = action.data;\n            newState.schemaFilterLocal = action.schema;\n            //  newState.filtersChangeFlag = false;\n            //console.log(\"UPLOAD_DATA\",newState.data)\n            return newState\n        case ActionType.CONNECT_DATA:\n            newState.fileName = action.fileName;\n            newState.real_filename = action.real_filename;\n            newState.title = genTitle(action.real_filename);\n            newState.facts = [];\n            newState.relations = [];\n            newState.schema = action.schema;\n            newState.data = action.data;\n            newState.resultCoverage = 0;\n\n            newState.filters = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n            newState.filtersTitle = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n            newState.datares = action.data;\n            newState.schemaFilter = action.schema;\n            newState.filtersLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n\n            newState.filtersTitleLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n            newState.dataresLocal = action.data;\n            newState.schemaFilterLocal = action.schema;\n            //  newState.filtersChangeFlag = false;\n            //console.log(\"CONNECT_DATA\", newState)\n            return newState\n        case ActionType.UPDATE_COMMENT_STORY_INFO:\n            //sessionStorage.setItem('storyData', JSON.stringify(action.visData));\n            newState.facts = action.facts;\n            newState.relations = action.relations;\n            newState.schema = action.schema;\n            newState.data = action.data;\n            newState.title = action.title || '';\n            newState.subtitle = action.subtitle || '';\n            newState.fileName = action.fileName || '';\n            newState.real_filename = action.real_filename || '';\n            newState.storyParameter = action.storyParameter\n            newState.aggregationLevel = action.aggregationLevel;\n            newState.resultCoverage = action.resultCoverage;\n            newState.historyStory = {\n                historyfacts: newState.facts,\n                historyTitle: newState.title,\n                historySubtitle: newState.subtitle,\n                historStoryParameter: newState.storyParameter,\n                historyAggregationLevel: newState.aggregationLevel,\n                historyResultCoverage: newState.resultCoverage\n            }\n\n            newState.filters = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n            newState.filtersTitle = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n            newState.datares = action.data;\n            newState.schemaFilter = action.schema;\n\n            newState.filtersLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\").map(d => {\n                if (d.type === 'numerical') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values.map(d => d.replace(',', '')), 'value1': [Math.min(...d.values.map(d => d.replace(',', ''))), Math.max(...d.values.map(d => d.replace(',', '')))] };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values, 'value2': [0, 100], 'value3': [0, d.values.length - 1] };\n                } else {\n                    return { 'field': d.field, 'type': 'equal', 'value': d.values }\n                }\n\n            });\n\n            newState.filtersTitleLocal = action.schema.filter(d => d.type !== 'text' && d.type !== \"ID\" && (d.type === 'categorical' || d.type === 'temporal'||d.type==='geographical')).map(d => {\n                if (d.type === 'categorical'||d.type==='geographical') {\n                    return { 'field': d.field, 'type': d.type, 'title': 'All ' + convertField(d.field, 'plural') };\n                } else if (d.type === 'temporal') {\n                    return { 'field': d.field, 'type': 'temporal', 'title': d.values[0] + '-' + d.values[d.values.length - 1] };\n                }\n            });\n            newState.dataresLocal = action.data;\n            newState.schemaFilterLocal = action.schema;\n            //  newState.filtersChangeFlag = false;\n            return newState\n        case ActionType.VISUALIZE_DATA:\n            // sessionStorage.setItem('visData', JSON.stringify(action.visData));\n            newState.visData = action.visData\n            return newState\n        case ActionType.UPDATE_UUID:\n            localStorage.setItem('uuid', JSON.stringify(action.uuid));\n            newState.uuid = action.uuid\n            return newState\n        case ActionType.UPDATE_DATA_URL:\n            newState.generateUrl = action.generateUrl\n            return newState\n        //change facts to animated facts\n        case ActionType.CHANGE_TO_ANIMATION:\n            newState.animationFlag = action.animationFlag\n            return newState\n\n        //pannel width update\n        case ActionType.UPDATE_PANNEL_WIDTH:\n            newState.leftPaneWidth = action.leftPaneWidth\n            newState.rightPaneWidth = action.rightPaneWidth\n            return newState\n            \n        //editor filters\n        case ActionType.UPDATE_FILTERS:\n            let schemaNoTextID = _.cloneDeep(newState.schema).filter(d => d.type !== 'text' && d.type !== \"ID\")\n\n            let dataclone = _.cloneDeep(newState.data);\n            let datares1 = [];\n            let filters = action.filters;\n            filters.map((item, index) => {\n                datares1 = [];\n\n                let itemfield = item.field;//Brand\n                item.value.map(item1 => {//BMW,Ford\n                    if (schemaNoTextID[index].type === \"numerical\") datares1.push(...dataclone.filter(filter => filter[itemfield] == parseFloat(item1)))\n                    else datares1.push(...dataclone.filter(filter => filter[itemfield] == item1))\n\n                })\n                dataclone = datares1;\n\n            })\n         \n            let schemaFilter1 = _.cloneDeep(newState.schema)\n            let filtersField = [];\n            for(let i = 0; i < filters.length; i++) {\n                filtersField.push(filters[i].field);\n            }\n\n            for(let i=0; i<schemaFilter1.length;i++){\n                if(schemaFilter1[i].type===\"ID\"||schemaFilter1[i].type===\"text\") {continue;}\n                let field = schemaFilter1[i].field;\n                let filtersIndex = filtersField.indexOf(field);\n                \n                schemaFilter1[i].values = _.cloneDeep(filters[filtersIndex].value);\n                if (schemaFilter1[i].type === \"numerical\") {\n                    schemaFilter1[i].mean = d3.mean(filters[filtersIndex].value)\n                    schemaFilter1[i].median = d3.median(filters[filtersIndex].value)\n                    schemaFilter1[i].std = d3.deviation(filters[filtersIndex].value)\n                    schemaFilter1[i].var = d3.variance(filters[filtersIndex].value)\n                }\n            }\n            newState.filters = action.filters;\n            newState.datares = datares1;\n            newState.schemaFilter = schemaFilter1;\n\n            return newState;\n        case ActionType.UPDATE_FILTERS_TITLE:\n            newState.filtersTitle = action.filtersTitle;\n            return newState;\n        case ActionType.UPDATE_DATARES:\n            newState.datares = action.dateres;\n            return newState;\n        case ActionType.UPDATE_SCHEMA_FILTER:\n            newState.schemaFilter = action.schemaFilter;\n            return newState;\n        case ActionType.UPDATE_FILTERS_CHANGE_FLAG:\n            newState.filtersChangeFlag = action.filtersChangeFlag;\n            return newState;\n        case ActionType.UPDATE_FILTERS_LOCAL:\n            newState.filtersLocal = action.filtersLocal;\n            newState.schemaFilterLocal = action.schemaFilterLocal;\n            newState.dataresLocal = action.dataresLocal;\n            newState.filtersTitleLocal = action.filtersTitleLocal;\n            return newState;\n\n        default:\n            break;\n    }\n    return newState;\n}","import ActionType from '../action/type';\nimport Cookies from 'js-cookie';\nimport OperationType from '@/constant/OperationType'\nimport ConvertType from '@/constant/ConvertType'\n\nlet userInfo = Cookies.get(\"userInfo\") && JSON.parse(Cookies.get(\"userInfo\")) ? JSON.parse(Cookies.get(\"userInfo\")) : {\n    username: \"\",\n    uid: -1\n}\n\nconst initialState = {\n    isLogin: userInfo.uid !== -1,\n    userInfo: userInfo,\n    operateState: OperationType.BEFORE_UPLOAD,// BEFORE_UPLOAD  UPLOADIND UPLOADED FILE_LARGE  GENERATING GENERATED,PUBLISHED\n    convertType: ConvertType.FACTSHEET,\n    currentLocale: '',\n    isClosePannel: false,\n\n}\n\nexport default (state = initialState, action) => {\n    const newState = Object.assign({}, state);\n    switch (action.type) {\n        case ActionType.UPDATE_USER_INFO:\n            newState.userInfo = action.userInfo;\n            if (action.userInfo.uid === -1) {\n                newState.isLogin = false\n            } else {\n                newState.isLogin = true\n            }\n            return newState;\n\n        case ActionType.UPDATE_USER_OPERATION:\n            newState.operateState = action.operateState\n            return newState;\n        case ActionType.UPDATE_CONVERT_TYPE:\n            newState.convertType = action.convertType\n            return newState;\n        case ActionType.CLOSE_PANNEL:\n            newState.isClosePannel = action.isClose\n            return newState;\n        case ActionType.UPDATE_LOCALE:\n            newState.currentLocale = action.currentLocale\n            return newState;\n        default:\n            break;\n    }\n    return newState;\n}","import ActionType from '../action/type';\r\nimport _ from 'lodash';\r\nimport { fact2unitVis, fact2unitSpec } from '@/tool/fact2unitVis';\r\n\r\n\r\nconst initialState = {\r\n    cardItems: [],\r\n    videoIndex: 0,\r\n    currentSpec: {},\r\n    nowVideoTime: 0,\r\n    allVideoTime: 0,\r\n    isPlayVideo: false,\r\n    leftContent: ActionType.SET_DEFAULT,\r\n    barWidthList: [],\r\n    dragDirection: 'null',\r\n    isMouseDown: false,\r\n    isDrag: false,\r\n    currentX: 0,\r\n    leftOffsetWidth: 0,\r\n    rightOffsetWidth: 0,\r\n    currentBarIndex: -1,\r\n    scenePosition:0,\r\n    sceneScale:1,\r\n    dragCursor:false,\r\n    question:'',\r\n    narrative_spec: '',\r\n    isGenerating: false,\r\n    temp_spec:'',\r\n    operatorType:false,\r\n    animationType:false,\r\n    keys:[]\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n    const newState = Object.assign({}, state);\r\n    let newFacts;\r\n    // 4action\r\n    switch (action.type) {\r\n\r\n        //init video slice card\r\n        case ActionType.INIT_VIDOE_CARD:\r\n            let cards = [];\r\n            let firstCard = {};\r\n            action.facts.map((fact, index) => {\r\n                let specData\r\n                let spec\r\n                action.schemaFilter ? specData = { \"schema\": action.schemaFilter, } : specData = { \"schema\": action.schema };\r\n                if (fact !== 'empty') {\r\n                    spec = fact2unitSpec(action.filename, specData, fact, action.datares, null, { \"width\": 477, \"height\": 268 }, true);\r\n                } else {\r\n                    spec = 'empty';\r\n                }\r\n                if (index === 0) {\r\n                    firstCard = { fact: fact, spec: spec, time: 6000, isGeneratedByAlg:false }\r\n                }\r\n                cards = [...cards, { fact: fact, spec: spec, time: 6000 ,isGeneratedByAlg:false }];\r\n            })\r\n            newState.cardItems = cards;\r\n            newState.currentSpec = firstCard.spec\r\n            return newState;\r\n\r\n        case ActionType.REPLAY_VIDEO_SLICE:\r\n            newState.videoIndex = 0\r\n            newState.currentSpec = newState.cardItems[0].spec\r\n            return newState;\r\n\r\n        case ActionType.PLAY_VIDEO_SLICE:\r\n            newState.videoIndex = action.index\r\n            newState.currentSpec = newState.cardItems[action.index].spec\r\n            return newState;\r\n\r\n        case ActionType.PLAY_VIDEO_CONTINUE:\r\n            newState.isPlayVideo = true;\r\n            return newState;\r\n\r\n        case ActionType.ADD_NOW_VIDEO_TIME:\r\n            newState.nowVideoTime = newState.nowVideoTime + 5;\r\n            return newState;\r\n\r\n        case ActionType.CHANGE_NOW_VIDEO_TIME:\r\n            newState.nowVideoTime = action.time;\r\n            return newState;\r\n        \r\n        case ActionType.CHANGE_ALL_VIDEO_TIME:\r\n            newState.allVideoTime = action.time;\r\n            return newState;\r\n\r\n        case ActionType.STOP_PLAY_VIDEO_CONTINUE:\r\n            newState.isPlayVideo = false;\r\n            return newState;\r\n\r\n        case ActionType.ADD_EMPTY_CARD:\r\n            newState.cardItems = [...newState.cardItems, { fact: 'empty', spec: 'empty', time: 6000,isGeneratedByAlg:false }]\r\n            newState.barWidthList = [...newState.barWidthList,{leftbar: 140, rightbar: 18,isDrag:false }]\r\n            newState.allVideoTime = newState.allVideoTime + 6000;\r\n            return newState;\r\n\r\n        //delete card \r\n        case ActionType.REMOVE_CARD:\r\n            if (newState.cardItems.length > 0) {\r\n                newState.allVideoTime = newState.allVideoTime - newState.cardItems[action.index].time;\r\n                newState.cardItems = newState.cardItems.filter((_, i) => i !== action.index)\r\n            }\r\n            return newState;\r\n\r\n        //add card\r\n        case ActionType.ADD_CARD:\r\n            let insertFact = _.cloneDeep(action.fact);\r\n            let cardIndex = action.insert;\r\n            let cardDataAll = _.cloneDeep(newState.cardItems);\r\n            //let newUnusedFacts = state.story.unusedFacts.slice();\r\n            //let newFact = newUnusedFacts.splice(factIndex, 1)[0];\r\n            let factToCard = {\r\n                fact: insertFact,\r\n                spec: action.specs,\r\n                time: action.time,\r\n                isGeneratedByAlg:action.isGeneratedByAlg,\r\n            }\r\n            cardDataAll.splice(cardIndex, 0, factToCard);\r\n            newState.cardItems = cardDataAll;\r\n            //newState.story.unusedFacts = newUnusedFacts;\r\n            console.log(newState)\r\n            return newState;\r\n        case ActionType.ADD_CARDS:\r\n            let insertCards = _.cloneDeep(action.cards);\r\n            let cardsIndex = action.insert;\r\n            let cardData = _.cloneDeep(newState.cardItems); \r\n            for(let x = 0;x<insertCards.length;x++){\r\n                cardData.splice(cardsIndex+x,0,insertCards[x])\r\n            }\r\n            newState.cardItems = cardData;\r\n            return newState;\r\n\r\n        //drag card\r\n        case ActionType.CHANGE_CARD:\r\n            let cardDatas = _.cloneDeep(newState.cardItems);\r\n            let origin = action.origin;\r\n            let target = action.target;\r\n            //\r\n            //\r\n            if (origin > target) {\r\n                cardDatas.splice(target, 0, cardDatas[origin]);\r\n                cardDatas.splice(origin + 1, 1)\r\n            }\r\n            else {\r\n                cardDatas.splice(target + 1, 0, cardDatas[origin]);\r\n                cardDatas.splice(origin, 1)\r\n            }\r\n            newState.cardItems = cardDatas;\r\n            console.log(newState)\r\n            return newState;\r\n\r\n        //exchange card\r\n        case ActionType.EXCHANGE_CARD:\r\n            let cardAll = _.cloneDeep(newState.cardItems);\r\n            let index = action.index;\r\n            let card = action.card;\r\n            cardAll.splice(index,1,card)\r\n            newState.cardItems = cardAll;\r\n            console.log(newState)\r\n            return newState;\r\n\r\n        case ActionType.CHANGE_CARD_FLAG:\r\n            cardDatas = _.cloneDeep(newState.cardItems);\r\n            cardDatas[action.index].isGeneratedByAlg = action.flag;\r\n            newState.cardItems = cardDatas;\r\n            return newState;\r\n            \r\n        // set video leftsider content\r\n        case ActionType.SET_LEFTSIDER_CONTENT:\r\n            newState.leftContent = action.content\r\n            return newState;\r\n\r\n        // -------time-line bar-drag\r\n        // init barWidthList\r\n        case ActionType.INIT_TIME_LINE_BAR_WDITH:\r\n            let bar = []\r\n            for (let i = 0; i < action.length; i++) {\r\n                bar = [...bar, { leftbar: 140, rightbar: 18,isDrag:false }]\r\n            }\r\n            newState.barWidthList = bar\r\n            return newState;\r\n        // add bar to barWidthList\r\n        case ActionType.ADD_BAR_TO_TIME_LINE_BAR:\r\n            let addBar = action.bar;\r\n            addBar = {leftbar: 140, rightbar: 18,isDrag:false };\r\n            let addIndex = action.index;\r\n            let newBar = _.cloneDeep(newState.barWidthList);\r\n            newBar.splice(addIndex,0,addBar);\r\n            newState.barWidthList = newBar;\r\n            newState.allVideoTime = newState.allVideoTime + 6000;\r\n            return newState;\r\n\r\n        case ActionType.ADD_BARS_TO_TIME_LINE_BAR:\r\n            let addBars = action.bars;\r\n            let myAddIndex = action.index;\r\n            let myNewBar = _.cloneDeep(newState.barWidthList);\r\n            for(let y =0; y<addBars.length;y++){\r\n                myNewBar.splice(myAddIndex+y,0,addBars[y])\r\n            }\r\n            newState.barWidthList = myNewBar;\r\n            newState.allVideoTime = newState.allVideoTime + 6000*addBars.length;\r\n            return newState;\r\n            \r\n        // delete bar from barWidthList\r\n        case ActionType.DELETE_BAR_FROM_TIME_LINE_BAR:\r\n            let deleteIndex = action.index;\r\n            let deletedBar = _.cloneDeep(newState.barWidthList);\r\n            deletedBar.splice(deleteIndex,1);\r\n            newState.barWidthList = deletedBar;\r\n            return newState;\r\n\r\n        // exchange bar in barWidthList\r\n        case ActionType.CHANGE_TIME_LINE_BAR:\r\n            let changedBar = _.cloneDeep(newState.barWidthList);\r\n            let originBar = action.origin;\r\n            let targetBar = action.target; \r\n            if (originBar > targetBar) {\r\n                changedBar.splice(targetBar, 0, changedBar[originBar]);\r\n                changedBar.splice(originBar + 1, 1)\r\n            }\r\n            else {\r\n                changedBar.splice(targetBar + 1, 0, changedBar[originBar]);\r\n                changedBar.splice(originBar, 1)\r\n            }\r\n            newState.barWidthList = changedBar;\r\n            return newState;\r\n\r\n        // set barWidth 's left bar chart with index\r\n        case ActionType.SET_LEFT_BAR_WIDTH:\r\n            let leftBarWidth = _.cloneDeep(newState.barWidthList)\r\n            leftBarWidth[action.index].leftbar = action.width\r\n            newState.barWidthList = leftBarWidth\r\n            //change time\r\n            let cardTimes = _.cloneDeep(newState.cardItems);\r\n            let formerTime = cardTimes[action.index].time\r\n            cardTimes[action.index].time=Math.floor(action.width*42.8571429);\r\n            newState.cardItems=cardTimes\r\n            newState.allVideoTime = newState.allVideoTime + (cardTimes[action.index].time - formerTime);\r\n            return newState;\r\n\r\n        // set barWidth 's right bar chart with index\r\n        case ActionType.SET_RIGHT_BAR_WIDTH:\r\n            let rightBarWidth = _.cloneDeep(newState.barWidthList)\r\n            rightBarWidth[action.index].rightbar = action.width\r\n            newState.barWidthList = rightBarWidth\r\n            return newState;\r\n\r\n        // set drag direction('left','right')\r\n        case ActionType.SET_DRAG_DIRECTION:\r\n            newState.dragDirection = action.direction\r\n            return newState;\r\n\r\n        // set mouse down state(true,false)\r\n        case ActionType.SET_MOUSE_DOWN_STATE:\r\n            newState.isMouseDown = action.mouseDown\r\n            return newState;\r\n\r\n        // set drag state(true,false)\r\n        case ActionType.SET_DRAG_STATE:\r\n            let barDrag = _.cloneDeep(newState.barWidthList)\r\n            barDrag[action.index].isDrag = action.drag\r\n            newState.barWidthList = barDrag\r\n            return newState;\r\n\r\n        case ActionType.SET_CURRENT_X:\r\n            newState.currentX = action.clientx\r\n            return newState;\r\n\r\n        case ActionType.SET_LEFT_OFFSET_WIDTH:\r\n            newState.leftOffsetWidth = action.offset\r\n            return newState;\r\n\r\n        case ActionType.SET_RIGHT_OFFSET_WIDTH:\r\n            newState.rightOffsetWidth = action.offset\r\n            return newState;\r\n\r\n        case ActionType.SET_CURRENT_BAR_INDEX:\r\n            newState.currentBarIndex = action.index\r\n            return newState;\r\n\r\n        case ActionType.SET_POSITION:\r\n            newState.scenePosition = action.position\r\n            return newState;\r\n\r\n        case ActionType.SET_SCENE_SCALE:\r\n            newState.sceneScale = action.scale\r\n            return newState;\r\n            \r\n        case ActionType.SET_DRAG_CURSOR:\r\n            newState.dragCursor=action.cursor\r\n            return newState;\r\n\r\n        case ActionType.QUESTION_2_GIF:\r\n            newState.question=action.question\r\n            newState.narrative_spec = action.narrative_spec\r\n            return newState;\r\n\r\n        case ActionType.ISGENERATINGGIF:\r\n            newState.isGenerating = action.isGenerating\r\n            newState.narrative_spec = ''\r\n            return newState;\r\n\r\n        case ActionType.CHANGE_TEMP_SPEC:\r\n            newState.temp_spec = action.temp_spec\r\n            return newState;\r\n\r\n        case ActionType.OPERATOR_CHANGE:\r\n            newState.operatorType = action.operatorType\r\n            return newState;\r\n\r\n        case ActionType.ANIMATION_CHANGE:\r\n            newState.animationType = action.animationType\r\n            return newState;\r\n            \r\n            \r\n        case ActionType.CHANGE_KEYS:\r\n            newState.keys = action.keys\r\n            return newState;\r\n\r\n        case ActionType.CHANGE_OPERATOR:\r\n            let operatorList = _.cloneDeep(newState.narrative_spec.operators);\r\n            let myOrigin = action.origin;\r\n            let myTarget = action.target;\r\n            if (myOrigin > myTarget) {\r\n                operatorList.splice(myTarget, 0, operatorList[myOrigin]);\r\n                operatorList.splice(myOrigin + 1, 1)\r\n            }\r\n            else {\r\n                operatorList.splice(myTarget + 1, 0, operatorList[myOrigin]);\r\n                operatorList.splice(myOrigin, 1)\r\n            }\r\n            newState.narrative_spec.operators = operatorList;\r\n            console.log(newState)\r\n            return newState;\r\n\r\n        default:\r\n            break;\r\n    }\r\n    return newState;\r\n}","import { combineReducers } from 'redux';\nimport story from './story';\nimport user from './user';\nimport video from './video'\nexport default combineReducers({\n    story,\n    user,\n    video\n});","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducer';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n\nconst middlewares = [\n    thunk\n]\n\nif (process.env.NODE_ENV === 'development' && process.env.TARO_ENV !== 'quickapp') {\n    middlewares.push(require('redux-logger').createLogger())\n}\n\nfunction configureStore(initialState = {}) {\n    return createStore(\n        rootReducer,\n        initialState,\n        composeEnhancers(\n            applyMiddleware(...middlewares)\n        )\n    );\n}\n\nconst store = configureStore();\n\nexport default store;","import React, { Component } from \"react\";\n\n\nexport default class LazyLoading extends Component {\n    render() {\n        const { isLoading, error } = this.props\n        // Handle the loading state\n        if (isLoading) {\n            return <div>Loading...</div>;\n        }\n        // Handle the error state\n        else if (error) {\n            return <div>Sorry, there was a problem loading the page.</div>;\n        }\n        else {\n            return null;\n        }\n    }\n};\n\n","import LazyLoading from '@/components/LazyLoadingView/LazyLoading'\nimport Loadable from 'react-loadable'\n\n//React Router Code Spliting \nlet Loading = (url) => {\n    return Loadable({\n        loader: () => import(`@/pages/${url}`),\n        loading: LazyLoading\n    });\n}\nexport default Loading","import React from 'react';\nimport { connect } from 'react-redux'\nimport * as userAction from './action/userAction'\nimport LazyLoading from '@/components/LazyLoadingView/index'\n\n\nimport './App.less';\nimport './common.less';\nimport intl from 'react-intl-universal';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  // useParams\n} from \"react-router-dom\";\n// common locale data\nrequire('intl/locale-data/jsonp/en.js');\nrequire('intl/locale-data/jsonp/zh.js');\n\n// app locale data\nconst locales = {\n  \"en-US\": require('./locales/en-US.json'),\n  \"zh-CN\": require('./locales/zh-CN.json'),\n};\n\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateLocale: (currentLocale) => dispatch(userAction.updateLocale(currentLocale)),\n  }\n}\nconst mapStateToProps = (state) => ({\n})\n\nclass App extends React.Component {\n\n  state = {\n    initDone: false,\n    currentLocale: ''\n  }\n\n  loadLocales(lang) {\n    // init method will load CLDR locale data according to currentLocale\n    // react-intl-universal is singleton, so you should init it only once in your app\n    intl.init({\n      currentLocale: lang,\n      locales,\n    })\n      .then(() => {\n        this.props.updateLocale(lang)\n        // After loading CLDR locale data, start to render\n        this.setState(\n          { initDone: true, currentLocale: lang });\n      });\n  }\n\n  initDefaultLang = () => {\n    let userDefaultLang = navigator.language || navigator.userLanguage;//IE\n    let lang = userDefaultLang.substr(0, 2);//lang2\n    if (lang === 'zh') {\n      lang = \"zh-CN\"\n    } else {\n      lang = \"en-US\"\n    }\n    if (this.state.currentLocale !== lang) {\n      this.loadLocales(lang)\n    }\n  }\n\n  componentDidMount() {\n    this.initDefaultLang()\n  }\n  render() {\n    const { initDone, currentLocale } = this.state\n\n\n    const MyRoute = ({ MyComponent, ...rest }) => {\n      return (\n        <Route\n          {...rest}\n          render={routerProps => (\n            <MyComponent\n              intl={intl}\n              initDone={initDone}\n              currentLocale={currentLocale}\n              onChangeLocaleListener={lang => this.loadLocales(lang)}\n              {...routerProps} ></MyComponent>)\n          } />\n      )\n    }\n\n    return (\n      <Router>\n        <Switch>\n          <MyRoute exact path='/' MyComponent={LazyLoading(\"Homepage/index\")} />\n          {/* <MyRoute exact path='/edit/factsheet' MyComponent={LazyLoading('EditPage/EditFactsheet/index')} /> */}\n          <MyRoute exact path='/edit/datavideos' MyComponent={LazyLoading(\"EditPage/EditDataVideos/index\")} />\n          {/* <MyRoute exact path='/edit/datacomics' MyComponent={LazyLoading(\"EditPage/EditDataComics/index\")} /> */}\n          {/* <MyRoute exact path='/edit/dashbooard' MyComponent={LazyLoading(\"EditPage/EditDashboard/index\")} /> */}\n          {/* <MyRoute exact path='/H5/:id' MyComponent={LazyLoading(\"H5page/index\")} /> */}\n        </Switch>\n      </Router>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import AutoVis from 'calliope-chart/lib/autovis';\nimport { Fade } from 'calliope-chart/lib/transitions';\n\nexport default class AutoAni {\n    constructor() {\n        if (!AutoAni.instance) {\n            this._container = document.createElement(\"div\");\n            this._paragraph = document.createElement(\"p\");\n            this._spec = {};\n            this._timeouts = [];\n            this.autovis = new AutoVis();\n            AutoAni.instance = this;\n        } else {\n            return AutoAni.instance;\n        }\n    }\n\n    container(value) {\n        if (!value) {\n            return this._container;\n        }\n        this._container = value;\n    }\n\n    paragraph(value) {\n        if (!value) {\n            return this._paragraph;\n        }\n        this._paragraph = value;\n    }\n\n    load(spec) {\n        this._spec = spec;\n    }\n\n    play() {\n        let animationDelay = 0;\n        let pauseDuration = 1500;\n        let transitionDuration = 500;\n        let fade = new Fade();\n        fade.container(this.container());\n        fade.duration(transitionDuration);\n        let videoSpec = this._spec;\n        let dataspec = videoSpec.data;\n        let specs = videoSpec.specs;\n        for (const spec of specs) {\n            spec.data = dataspec;\n            let newspec = JSON.parse(JSON.stringify(spec)) // deepclone\n                // if (newspec.chart.duration === 0) {\n                //     newspec.chart.duration = 4000; // default duration\n                // }\n\n            // play chart animation\n            this._timeouts.push(setTimeout(function() {\n                this.autovis.container(this.container());\n                this.autovis.paragraph(this.paragraph());\n                this.autovis.load(newspec);\n                this.autovis.shouldShowCaption(true)\n                this.autovis.generate();\n            }.bind(this), animationDelay));\n            animationDelay += 4000;\n\n            // pause\n            animationDelay += pauseDuration\n\n            // play transition\n            this._timeouts.push(setTimeout(function() {\n                fade.animateTransition();\n            }, animationDelay));\n            animationDelay += transitionDuration;\n\n        }\n    }\n\n    stop() {\n        for (var i = 0; i < this._timeouts.length; i++) {\n            clearTimeout(this._timeouts[i]);\n        }\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport store from './store';\nimport './index.css';\nimport 'calliope-chart/lib/font.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\nexport {\n  default as AutoAni\n} from \"./autoani\";\n","export default {\n    JUXTAPOSITION: 'juxtaposition',\n    AREA_CHART: 'Area Chart',\n    VERTICAL_BAR_CHART: 'Vertical Bar Chart',\n    VERTICAL_DIFFERENCE_BAR_CHART: 'Vertical Difference Bar Chart',\n    VERTICAL_DIFFERENCE_ARROW_CHART: 'Vertical Difference Arrow Chart',\n    HORIZONTAL_BAR_CHART: 'Horizontal Bar Chart',\n    PROGRESS_BAR_CHART: 'Progress Bar Chart',\n    STACKED_BAR_CHART: 'Stacked Bar Chart',\n    ISOTYPE_BAR_CHART: 'Isotype Bar Chart',\n    PROPORTION_ISOTYPE_CHART: 'Proportion Isotype Chart',\n    COLOR_FILLING_MAP: 'Color Filling Map',\n    BUBBLE_CHART: 'Bubble Chart',\n    TEXT_CHART: 'Text Chart',\n    LINE_CHART: 'Line Chart',\n    STACKED_LINE_CHART: 'Stacked Line Chart',\n    RING_CHART: 'Ring Chart',\n    HALF_RING_CHART: 'Half Ring Chart',\n    PIE_CHART: 'Pie Chart',\n    SCATTER_PLOT: 'Scatter Plot',\n    TREE_MAP: 'Treemap',\n    BUBBLE_MAP: 'Bubblemap'\n}","import FactType from '../constant/FactType';\nimport ChartType from '../constant/ChartType';\nimport FieldType from '../constant/FieldType';\n//\nexport const fact2visRules = [\n    //association \n    {\n        \"fact\": FactType.ASSOCIATION,\n        \"chart\": ChartType.SCATTER_PLOT,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL]\n    },\n    //outlier\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.CATEGORICAL],\n        // \"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n        // \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    //     // \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    // \"rang\": [6, 9]\n    // },\n    //extreme\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.CATEGORICAL],\n        // \"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.TEXT_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //proportion\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PROGRESS_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.RING_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //\"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.TEXT_CHART,\n    // },\n\n    //rank\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.LINE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    //distribution\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.TREE_MAP,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [6, 10000]\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.PIE_CHART,\n    // },\n    //difference\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n    },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.PIE_CHART,\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    // },\n    //categorization\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.TREE_MAP,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [6, 10000]\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.BUBBLE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [6, 9]\n    },\n    //trend\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //  \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //\"rang\": [6, 9]\n    // },\n\n    //value\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.TEXT_CHART,\n        \"breakdownType\": [],\n    },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    // \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    // }\n]","import {\n    fact2visRules\n} from './fact2visRule';\nimport {\n    fact2visAllRules\n} from './fact2visAllRule';\nimport FieldType from '@/constant/FieldType';\n\n/****\n *  fact.type  breakDown.type \n * isEdit===false\n *     isEdit===ture\n */\n\nconst getSupportedChartTypes = (fact, schema, isEdit = false) => {  \n    let breakDown = schema.filter(s => s[\"field\"] === fact.groupby[0])[0];\n    let supportedChartTypes;\n    let rules = isEdit ? fact2visAllRules : fact2visRules;//fact2visRules \n    supportedChartTypes = rules.filter(x => x.fact === fact.type);\n    if (breakDown) {\n        supportedChartTypes = supportedChartTypes.filter(x => x.breakdownType.indexOf(breakDown.type) !== -1);\n        if (breakDown.type === FieldType.CATEGORICAL && breakDown.values) {\n            supportedChartTypes = supportedChartTypes.filter(x => {\n                if (!x.rang) {\n                    return true\n                } else {\n                    return breakDown.values.length >= x.rang[0] && breakDown.values.length <= x.rang[1]\n                }\n            });\n        }\n        /*******important**** *****/\n        if (supportedChartTypes.length === 0 && !isEdit) {\n            supportedChartTypes = getSupportedChartTypes(fact, schema, true)\n        }\n        /*******important the end *********/\n    }\n    //console.log(\"supportedChartTypes\", supportedChartTypes)\n    return supportedChartTypes;\n};\nexport default getSupportedChartTypes;","import React, { Component } from 'react';\nimport { AutoVis } from \"calliope-chart\";\nimport { NarrativeChart } from '@/vis';\n\nexport default class Chart extends Component {\n\n    componentDidMount() {\n        const id = this.props.uuid;\n        let spec = this.props.spec;\n        let container = id ? `#vischart_${id}` : \"#demo-chart\";\n        console.log(Boolean(id));\n        //let container = \"#demo-chart\"\n\n        // this.autovis = new AutoVis();\n        // this.autovis.container(container);\n        // this.autovis.load(spec);\n        // this.autovis.generate();\n\n        this.narrativechart = new NarrativeChart();\n        this.narrativechart.container(container);\n        this.narrativechart.load(spec);\n        this.narrativechart.generate();\n\n        \n    }\n\n    componentDidUpdate() {\n        const id = this.props.uuid;\n        let container = id ? `#vischart_${id}` : \"#demo-chart\";\n        //let container = \"#demo-chart\"\n        let spec = this.props.spec;\n        \n        \n        // this.autovis.container(container);\n        // this.autovis.load(spec);\n        // this.autovis.generate();\n\n        this.narrativechart.container(container);\n        this.narrativechart.load(spec);\n        this.narrativechart.generate();\n\n    }\n\n    render() {\n        let height = 640, width = 640;\n        if (this.props.spec.chart) {\n            let size = this.props.spec.chart.size;\n            switch (size) {\n                case 'wide':\n                    height = 220;\n                    width = 560;\n                    break;\n                case 'middle':\n                    height = 200;\n                    width = 360;\n                    break;\n                case 'small':\n                    height = 150;\n                    width = 235;\n                    break;\n                case 'unitvis':\n                    height = 150;\n                    width = 235;\n                    break;\n    \n                default:\n                    break;\n            }\n        }\n        const id = this.props.uuid ? this.props.uuid : \"demo-chart\";\n        console.log(height)\n        //const id = \"demo-chart\";\n\n        return (\n            <div id={id ? `vischart_${id}` : 'demo-chart'} style={{\n            //<div id={'demo-chart'} style={{\n                height: height, width: width,\n                // borderStyle: 'solid',\n                // borderWidth: 1,\n                // borderColor: 'black',\n                margin: \"0 auto\"\n            }} />\n        )\n    }\n}\n","const datafilter = (data, subspace) => {\n    let filteredData = data;\n    for (const sub of subspace) {\n        filteredData = filteredData.filter((x)=>x[sub.field]===sub.value)\n    }\n    return filteredData\n}\n\nexport default datafilter;","import FactType from '../constant/FactType';\nimport ChartType from '../constant/ChartType';\nimport FieldType from '../constant/FieldType';\n//\nexport const fact2visAllRules = [\n    //association \n    {\n        \"fact\": FactType.ASSOCIATION,\n        \"chart\": ChartType.SCATTER_PLOT,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL]\n    },\n    //outlier\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        //\"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.BUBBLE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        \"rang\": [6, 9]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //extreme\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        //\"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.TEXT_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //proportion\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PROGRESS_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.TREE_MAP,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.RING_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    //     \"rang\": [0, 9]\n    // },\n\n    //rank\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.LINE_CHART,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    //distribution\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.BUBBLE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.TREE_MAP,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        \"rang\": [6, 10000]\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        \"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    //difference\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n        // \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    },\n    //categorization\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.TREE_MAP,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [6, 10000]\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.BUBBLE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL],\n        \"rang\": [6, 9]\n    },\n    //trend\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"rang\": [0, 9],\n        \"breakdownType\": [FieldType.TEMPORAL, FieldType.CATEGORICAL],\n    },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    //     \"rang\": [0, 9],\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.BUBBLE_CHART,\n        \"rang\": [6, 9],\n        \"breakdownType\": [FieldType.TEMPORAL, FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.SCATTER_PLOT,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    //value\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.TEXT_CHART,\n        \"breakdownType\": [],\n    },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [],\n    },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        // \"rang\": [0, 9],\n        \"breakdownType\": [],\n    },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.BUBBLE_MAP,\n        \"breakdownType\": [],\n    },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.COLOR_FILLING_MAP,\n        \"breakdownType\": [],\n    }\n]","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, in general, there is a {{positive/negative}} correlation between {{measure1}} and {{measure2}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, in general, {{measure2}} has a {{positive/negative}} relationship with {{measure1}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, in general, {{measure2}} has a {{positive/negative}} relationship with {{measure1}} (Pearson correlation coefficient = {{parameter}}).',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, there are {{parameter}} categories of {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the data include {{parameter}} groups of {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the difference between {{focus1}} and {{focus2}} is {{parameter}} in terms of {{agg}} {{measure}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, {{focus1}} and {{focus2}}\\'s difference on the {{agg}} {{measure}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, {{focus1}} is {{parameter}} {{higher/lower}} than {{focus2}} in terms of {{agg}} {{measure}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the distribution of the {{agg}} {{measure}}, by different {{groupby}}s, is as follows.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the breakdown of the {{agg}} {{measure}}, by different {{groupby}}s, is as follows.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, here is the distribution of the {{agg}} {{measure}}, by different {{groupby}}s.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, {{parameter[0]}} is the {{groupby}} that has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, {{focus}}\\'s {{agg}} {{measure}} is anomalously different from that of other {{groupby}}s\\'.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}} of {{focus}} is anomalously different when compared with that of other {{groupby}}s.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the {{focus}} makes up {{parameter}} of the {{agg}} {{measure}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the percentage of the {{focus}} in {{agg}} {{measure}} is {{parameter}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the top three {{groupby}}s, ordered by their {{agg}} {{measure}}, are {{no.1}}, {{no.2}}, and {{no.3}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, {{no.1}}, {{no.2}}, and {{no.3}} are the three {{groupby}}s that have the highest {{agg}} {{measure}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, {{no.1}}, {{no.2}}, and {{no.3}} are the top three {{groupby}}s in terms of {{agg}} {{measure}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}}  is {{parameter}} over time in general.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}}  has a/an {{parameter}} trend.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}}  is {{parameter}} over the {{groupby}}s in general.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, the {{agg}} {{measure}} is {{parameter}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the {{agg}} value of {{measure}} is {{parameter}}.',\n    },\n]\n\nexport default templates;","import FactType from '../../constant/FactType';\nimport association from './association';\nimport categorization from './categorization';\nimport difference from './difference';\nimport distribution from './distribution';\nimport extreme from './extreme';\nimport outlier from './outlier';\nimport proportion from './proportion';\nimport rank from './rank';\nimport trend from './trend';\nimport value from './value';\n\nconst templateCount = 3;\n\nconst pickFactTemplate = function(type, id=-1) {\n    // pick randomly when id == -1\n    let templates = []\n    switch (type) {\n        case FactType.ASSOCIATION:\n            templates = association;\n            break;\n\n        case FactType.CATEGORIZATION:\n            templates = categorization;\n            break;\n\n        case FactType.DIFFERENCE:\n            templates = difference;\n            break;\n\n        case FactType.DISTRIBUTION:\n            templates = distribution;\n            break;\n\n        case FactType.EXTREME:\n            templates = extreme;\n            break;\n\n        case FactType.OUTLIER:\n            templates = outlier;\n            break;\n\n        case FactType.PROPORTION:\n            templates = proportion;\n            break;\n\n        case FactType.RANK:\n            templates = rank;\n            break;\n\n        case FactType.TREND:\n            templates = trend;\n            break;\n\n        case FactType.VALUE:\n            templates = value;\n            break;\n    \n        default:\n            break;\n    }\n    if (id === -1) {\n        id = Math.floor(Math.random() * 10)%templateCount\n    }\n    let sentence = '';\n    try {\n        sentence = templates[id].template;\n    }\n    catch(error) {\n        console.error(error);\n        console.log('wrong id:'+id)\n    }\n    return sentence;\n}\n\nexport default pickFactTemplate;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{measure1}}  {{measure2}}  {{/}} .',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{measure1}}  {{measure2}}  {{/}} .',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{measure1}}  {{measure2}}  {{/}} ={{parameter}}.',\n    }\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{groupby}}  {{parameter}} : {{no.1}}{{no.2}}{{no.3}}',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{groupby}}s  {{parameter}}  {{no.1}}{{no.2}}{{no.3}}',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{parameter}}  {{groupby}}s {{no.1}}{{no.2}}{{no.3}}.',\n    }\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{focus1}}  {{focus2}}  {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{focus1} } {{focus2}}  {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{agg}} {{measure}} {{focus1}}  {{focus2}} {{/}} {{parameter}}.',\n    }\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{groupby}}s .',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{groupby}}s .',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{groupby}}s  {{agg}} {{measure}} .',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{parameter[0]}}  {{agg}} {{measure}}  {{parameter[1]}} {{groupby}}s  {{focus}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{focus}}  {{parameter[1]}} {{groupby}}  {{parameter[0]}}.',\n\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{parameter[0]}}  {{agg}} {{measure}}  {{focus}} {{parameter[1]}}',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{groupby}}s  {{focus}}  {{agg}} {{measure}} .',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{focus}}  {{agg}} {{measure}}  {{groupby}}s .',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{groupby}}s {{focus}}  {{agg}} {{measure}} ',\n\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{focus}}  {{agg}} {{measure}}  {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{focus}}  {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{focus}}  {{agg}} {{measure}}  {{parameter}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{groupby}}s  {{no.1}}{{no.2}}{{no.3}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{no.1}} {{no.2}}{{no.3}} {{agg}} {{measure}} {{groupby}}s.',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{no.1}} {{no.2}}{{no.3}} {{agg}} {{measure}}',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{parameter}} .',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{groupby}} {{parameter}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{parameter}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{subspace}} {{measure}}  {{agg}} {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': '{{subspace}} {{agg}} {{measure}}  {{parameter}}.',\n    },\n]\n\nexport default templates;","import FactType from '../../constant/FactType';\nimport association from './association';\nimport categorization from './categorization';\nimport difference from './difference';\nimport distribution from './distribution';\nimport extreme from './extreme';\nimport outlier from './outlier';\nimport proportion from './proportion';\nimport rank from './rank';\nimport trend from './trend';\nimport value from './value';\n\nconst templateCount = 3;\n\nconst pickFactTemplate = function(type, id=-1) {\n    // pick randomly when id == -1\n    let templates = []\n    switch (type) {\n        case FactType.ASSOCIATION:\n            templates = association;\n            break;\n\n        case FactType.CATEGORIZATION:\n            templates = categorization;\n            break;\n\n        case FactType.DIFFERENCE:\n            templates = difference;\n            break;\n\n        case FactType.DISTRIBUTION:\n            templates = distribution;\n            break;\n\n        case FactType.EXTREME:\n            templates = extreme;\n            break;\n\n        case FactType.OUTLIER:\n            templates = outlier;\n            break;\n\n        case FactType.PROPORTION:\n            templates = proportion;\n            break;\n\n        case FactType.RANK:\n            templates = rank;\n            break;\n\n        case FactType.TREND:\n            templates = trend;\n            break;\n\n        case FactType.VALUE:\n            templates = value;\n            break;\n    \n        default:\n            break;\n    }\n    if (id === -1) {\n        id = Math.floor(Math.random() * 10)%templateCount\n    }\n    let sentence = '';\n    try {\n        sentence = templates[id].template;\n    }\n    catch(error) {\n        console.error(error);\n        console.log('wrong id:'+id)\n    }\n    return sentence;\n}\n\nexport default pickFactTemplate;","import pickFactTemplate from './fact-templates';\nimport pickFactTemplateZh from './fact-templates-zh'\nimport pickRelationTemplate from './relation-templates';\nimport FactType from '../constant/FactType'\nimport { isValid } from '../view/FactEditor/helper'\nimport AggregationType from '../constant/AggregationType'\nimport _ from 'lodash'\n\nconst plur = require('plur');\nconst convertAggregation = function (aggType) {\n    switch (aggType) {\n        case AggregationType.SUM:\n            return 'total'\n\n        case AggregationType.MAX:\n            return 'maximum'\n\n        case AggregationType.MIN:\n            return 'minimum'\n\n        case AggregationType.AVG:\n            return 'average'\n\n        case AggregationType.COUNT:\n            return 'count'\n\n        case AggregationType.NONE:\n            return ''\n\n        default:\n            return ''\n    }\n}\n\nconst convertAggregationZH = function (aggType) {\n    switch (aggType) {\n        case AggregationType.SUM:\n            return ''\n\n        case AggregationType.MAX:\n            return ''\n\n        case AggregationType.MIN:\n            return ''\n\n        case AggregationType.AVG:\n            return ''\n\n        case AggregationType.COUNT:\n            return ''\n\n        case AggregationType.NONE:\n            return ''\n\n        default:\n            return ''\n    }\n}\n\nconst convertMeasure = function (measure) {\n    if (measure.aggregate === \"count\") return \"\"\n    else return measure.field.toLowerCase();\n}\n\nconst convertGroupby = function (groupby, param = 'single') {\n    let gb = groupby[0]\n    if (param === 'single')\n        return gb.toLowerCase()\n    else if (param === 'plural') {\n        if (gb.indexOf(' of ') !== -1) {\n            let gbWords = gb.split(\" \")\n            let gbWordIndex = gbWords.indexOf(\"of\") - 1\n            if (gbWordIndex > -1) {\n                let plurWord = plur(gbWords[gbWordIndex], 2)\n                return gb.replace(gbWords[gbWordIndex], plurWord)\n            }\n        } else\n            return plur(gb, 2).toLowerCase()\n    }\n}\n\n// for value/difference/categorization\nexport const formatNum = function (num) {\n    num = (num || 0).toString();\n    let number = 0,\n        floatNum = '',\n        intNum = '';\n    if (num.indexOf('.') > 0) {\n        number = num.indexOf('.');\n        floatNum = num.substr(number);\n        intNum = num.substring(0, number);\n    } else {\n        intNum = num;\n    }\n    let result = [],\n        counter = 0;\n    intNum = intNum.split('');\n\n    for (let i = intNum.length - 1; i >= 0; i--) {\n        counter++;\n        result.unshift(intNum[i]);\n        if (!(counter % 3) && i !== 0) { result.unshift(','); }\n    }\n    return result.join('') + floatNum || '';\n}\n\nconst genFactSubspace = function (fact, template) {\n    let subspace = '';\n    if (fact.subspace.length) {\n        fact.subspace.map((key, i) => { return subspace += `${i === 0 ? ' ' : ' and '}the ${key.field} is ${key.value}` })\n        template = template.replace(\"{{subspace}}\", subspace);\n    } else {\n        template = template.replace(\", when {{subspace}}\", '');\n        template = template.replace(\" when {{subspace}}\", '');\n        template = template.replace(\" in case of {{subspace}}\", '');\n        template = template.replace(\" given {{subspace}}\", '');\n        template = template.replace(\"When {{subspace}}, \", '');\n        template = template.replace(\"Given {{subspace}}, \", '');\n        template = template.replace(\"In case of {{subspace}}, \", '');\n        template = template.replace(/^\\S/, s => s.toUpperCase())\n    }\n    return template\n}\nconst genFactSubspaceZh = function (fact, template) {\n    let subspace = '';\n    if (fact.subspace.length) {\n        fact.subspace.map((key, i) => { return subspace += ` ${i === 0 ? ' ' : '  '} ${key.field}  ${key.value} ` })\n        template = template.replace(\"{{subspace}}\", subspace);\n    } else {\n        template = template.replace(\"{{subspace}}\", '');\n        template = template.replace(\" {{subspace}}\", '');\n        template = template.replace(\"{{subspace}}\", '');\n        template = template.replace(\"{{subspace}}\", '');\n        template = template.replace(\"{{subspace}}\", '');\n    }\n    return template\n}\n\nexport const genFactSentence = function (_fact ,lang) {\n    if (lang === \"en-US\") {\n        if (!isValid(_fact))\n            return ''\n        let fact = _.cloneDeep(_fact)\n        let template = pickFactTemplate(fact.type);\n        let aggregate = AggregationType.NONE;\n        if (fact.measure.length > 0) {\n            aggregate = fact.measure[0].aggregate;\n        }\n        switch (fact.type) {\n            case FactType.ASSOCIATION:\n                template = template.replace(\"{{measure1}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{measure2}}\", convertMeasure(fact.measure[1]));\n                template = template.replace(\"{{agg1}}\", convertAggregation(fact.measure[0].aggregate));\n                template = template.replace(\"{{agg2}}\", convertAggregation(fact.measure[1].aggregate));\n                template = genFactSubspace(fact, template)\n                if (fact.parameter !== '') {\n                    if(Number.parseFloat(fact.parameter)>0) template = template.replace(\"{{positive/negative}}\", \"positive\");\n                    else template = template.replace(\"{{positive/negative}}\", \"negative\");\n                    template = template.replace(\"{{parameter}}\", formatNum(Number.parseFloat(fact.parameter).toFixed(3)));\n                }\n                break;\n\n            case FactType.CATEGORIZATION:\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = genFactSubspace(fact, template)\n                if (fact.parameter.length) {\n                    template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                    let parameterList = ''\n                    fact.parameter.forEach((d, i) => {\n                        parameterList += `${i === 0 ? '' : ','} ${d}`\n                    });\n                    template = template.replace(\"{{no.1}}, {{no.2}}, {{no.3}}\", parameterList);\n                  \n                }\n                if (fact.focus.length) {\n                    if (template.indexOf(\". {{focus}}\") > -1) {\n                        let focusValue = fact.focus[0].value.slice(0, 1).toUpperCase() + fact.focus[0].value.slice(1)\n                        template = template.replace(\"{{focus}}\", focusValue);\n                    } else {\n                        template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                    }\n                } else {\n                    template = template.replace(\", and {{focus}} needs to pay attention\", \"\");\n                    template = template.replace(\", among which {{focus}} needs to pay attention\", \"\");\n                    template = template.replace(\". {{focus}} needs to pay attention\", \"\");\n                }\n                break;\n\n            case FactType.DIFFERENCE:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                if (fact.focus.length >= 2) {\n                    template = template.replace(\"{{focus1}}\", fact.focus[0].value);\n                    template = template.replace(\"{{focus2}}\", fact.focus[1].value);\n                }\n                template = genFactSubspace(fact, template)\n                if (fact.parameter !== '') {\n                    if(fact.parameter>0)  template = template.replace(\"{{higher/lower}}\", 'higher');\n                    else template = template.replace(\"{{higher/lower}}\", 'lower');\n                    template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n                }\n                break;\n\n            case FactType.DISTRIBUTION:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspace(fact, template)\n                if (fact.focus.length) {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                } else {\n                    template = template.replace(\" and {{focus}} needs to pay attention\", \"\");\n                }\n                break;\n\n            case FactType.EXTREME:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspace(fact, template)\n                if (fact.focus.length) {\n                    if (fact.focus[0].extremeFocus !== undefined && fact.focus[0].extremeValue !== undefined) {\n                        if (fact.focus[0].extremeFocus === 'min') { template = template.replace(\"{{focus}}\", 'minimum'); }\n                        else { template = template.replace(\"{{focus}}\", 'maximum'); }\n                        template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                        template = template.replace(\"{{parameter[1]}}\", formatNum(Math.round(fact.parameter[1] * 100) / 100));\n\n                    } else if (fact.parameter.length) {\n                        if (fact.parameter[0] === 'min') { template = template.replace(\"{{focus}}\", 'minimum'); }\n                        else { template = template.replace(\"{{focus}}\", 'maximum'); }\n                        template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                        template = template.replace(\"{{parameter[1]}}\", formatNum(fact.parameter[1]));\n                    }\n                }\n                break;\n\n            case FactType.OUTLIER:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = genFactSubspace(fact, template)\n                if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                break;\n\n            case FactType.PROPORTION:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = genFactSubspace(fact, template)\n                if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                if (fact.parameter) template = template.replace(\"{{parameter}}\", fact.parameter);\n                break;\n\n            case FactType.RANK:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = genFactSubspace(fact, template)\n                if (fact.parameter.length >= 3) {\n                    template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                    template = template.replace(\"{{no.1}}\", ` ${fact.parameter[0]}`);\n                    template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                    if (fact.parameter.length === 3) {\n                        template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                    } else if (fact.parameter.length > 3) {\n                        template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                    } else if (fact.parameter.length === 2) {\n                        template = template.replace(\", {{no.3}}\", '');\n                    }\n                } else {\n                    template = ''\n                }\n                break;\n\n            case FactType.TREND:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n                template = genFactSubspace(fact, template)\n                if (fact.parameter) {\n                    template = template.replace(\"{{parameter}}\", ` ${fact.parameter} `);\n                    if (fact.parameter === 'increasing') {\n                        template = template.replace(\"a/an\", 'an');\n                    } else {\n                        template = template.replace(\"a/an\", 'a');\n                    }\n                }\n                if (fact.focus.length) {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                } else {\n                    template = template.replace(\" and the value of {{focus}} needs to pay attention\", \"\");\n                }\n                break;\n\n            case FactType.VALUE:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n                template = genFactSubspace(fact, template)\n                if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n                break;\n\n            default:\n                break;\n        }\n        template = template.slice(0, 1).toUpperCase() + template.slice(1)\n        return template;\n    } else {\n        if (!isValid(_fact))\n            return ''\n        let fact = _.cloneDeep(_fact)\n        let template = pickFactTemplateZh(fact.type);\n        let aggregate = AggregationType.NONE;\n        if (fact.measure.length > 0) {\n            aggregate = fact.measure[0].aggregate;\n        }\n        switch (fact.type) {\n            case FactType.ASSOCIATION:\n                template = template.replace(\"{{measure1}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{measure2}}\", convertMeasure(fact.measure[1]));\n                template = template.replace(\"{{agg1}}\", convertAggregationZH(fact.measure[0].aggregate));\n                template = template.replace(\"{{agg2}}\", convertAggregationZH(fact.measure[1].aggregate));\n                template = genFactSubspaceZh(fact, template)\n                if (fact.parameter !== '') {\n                    if(Number.parseFloat(fact.parameter)>0) template = template.replace(\"{{/}}\", \"\");\n                    else template = template.replace(\"{{/}}\", \"\");\n                    template = template.replace(\"{{parameter}}\", formatNum(Number.parseFloat(fact.parameter).toFixed(3)));\n                }\n                break;\n\n            case FactType.CATEGORIZATION:\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspaceZh(fact, template)\n                if(Array.isArray(fact.parameter)){\n                    if (fact.parameter.length) {\n                        template = template.replace(\"{{parameter}}\", ` ${formatNum(fact.parameter.length)} `);\n                        let parameterList = ''\n                        fact.parameter.forEach((d, i) => {\n                            parameterList += `${i === 0 ? '' : ','} ${d}`\n                        });\n                        template = template.replace(\"{{no.1}}{{no.2}}{{no.3}}\", ` ${parameterList}`);\n                        // template = template.replace(\"{{no.1}}\", fact.parameter[0]);\n                        // template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                        // if (fact.parameter.length === 3) {\n                        //     template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                        // } else if (fact.parameter.length > 3) {\n                        //     template = template.replace(\"{{no.3}}\", fact.parameter[2] + ', etc');\n                        // } else if (fact.parameter.length === 2) {\n                        //     template = template.replace(\", {{no.3}}\", '');\n                        // }\n                    }\n                }\n                else{\n                    template = ''\n                }\n                if (fact.focus.length) {\n                    if (template.indexOf(\". {{focus}}\") > -1) {\n                        let focusValue = fact.focus[0].value.slice(0, 1).toUpperCase() + fact.focus[0].value.slice(1)\n                        template = template.replace(\"{{focus}}\", focusValue);\n                    } else {\n                        template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                    }\n                } else {\n                    template = template.replace(\"{{focus}}\", \"\");\n                }\n                break;\n\n            case FactType.DIFFERENCE:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                if (fact.focus.length >= 2) {\n                    template = template.replace(\"{{focus1}}\", fact.focus[0].value);\n                    template = template.replace(\"{{focus2}}\", fact.focus[1].value);\n                }\n                template = genFactSubspaceZh(fact, template)\n                \n                if (fact.parameter !== '') {\n                    if(fact.parameter>0)  template = template.replace(\"{{/}}\", '');\n                    else template = template.replace(\"{{/}}\", '');\n                    template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n                }\n                break;\n\n            case FactType.DISTRIBUTION:\n              \n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = genFactSubspaceZh(fact, template)\n\n                if (fact.focus.length) {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                } else {\n                    template = template.replace(\"{{focus}}\", \"\");\n                }\n                break;\n\n            case FactType.EXTREME:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                // template = template.replace(\"{{agg}}\", '');\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspaceZh(fact, template)\n                if (fact.focus.length) {\n                    if (fact.focus[0].extremeFocus !== undefined && fact.focus[0].extremeValue !== undefined) {\n                        if (fact.focus[0].extremeFocus === 'min') { template = template.replace(\"{{focus}}\", ''); }\n                        else { template = template.replace(\"{{focus}}\", ''); }\n                        template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                        template = template.replace(\"{{parameter[1]}}\", formatNum(Math.round(fact.parameter[1] * 100) / 100));\n\n                    } else if (fact.parameter.length) {\n                        if (fact.parameter[0] === 'min') { template = template.replace(\"{{focus}}\", ''); }\n                        else { template = template.replace(\"{{focus}}\", ''); }\n                        template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                        template = template.replace(\"{{parameter[1]}}\", formatNum(fact.parameter[1]));\n                    }\n                }\n                break;\n\n            case FactType.OUTLIER:\n                \n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = genFactSubspaceZh(fact, template)\n                \n                if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                break;\n\n            case FactType.PROPORTION:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                // template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby,'plural'));\n                template = genFactSubspaceZh(fact, template)\n                if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                if (fact.parameter) template = template.replace(\"{{parameter}}\", fact.parameter);\n               \n                break;\n\n            case FactType.RANK:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby,'plural'));\n                template = genFactSubspaceZh(fact, template)\n                if (fact.parameter.length >= 3) {\n                    // template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                    template = template.replace(\"{{no.1}}\", fact.parameter[0]);\n                    template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                    if (fact.parameter.length === 3) {\n                        template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                    } else if (fact.parameter.length > 3) {\n                        template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                    } else if (fact.parameter.length === 2) {\n                        template = template.replace(\"{{no.3}}\", '');\n                    }\n                } else {\n                    template = ''\n                }\n                break;\n\n            case FactType.TREND:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspaceZh(fact, template)\n                if (fact.parameter) {\n                    if (fact.parameter === 'increasing') {\n                        template = template.replace(\"{{parameter}}\", '');\n                    } else {\n                        template = template.replace(\"{{parameter}}\", '');\n                    }\n                }\n                if (fact.focus.length) {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                } else {\n                    template = template.replace(\"{{focus}}\", \"\");\n                }\n                break;\n\n            case FactType.VALUE:\n                template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n                template = template.replace(\"{{agg}}\", convertAggregationZH(aggregate));\n                // template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n                template = genFactSubspaceZh(fact, template)\n                // if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n                \n                break;\n\n            default:\n                break;\n        }\n        template = template.slice(0, 1).toUpperCase() + template.slice(1)\n        return template;\n    }\n}\n\n\nexport const genStoryText = function (facts, relations) {\n    let template;\n    let storyText = '';\n    let pairLength = parseInt(facts.length / 2)\n    //console.log(\"relations\", facts, relations)\n    for (let i = 0; i < pairLength; i++) {\n        if (facts[i]) {\n            template = pickRelationTemplate(relations[i * 2 + 1])\n            // template = template.replace(\"{{Sentence A}}\", facts[i * 2].script());\n            // template = template.replace(\"{{Sentence B}}\", facts[i * 2 + 1].script());\n            template = template.replace(\"{{Sentence A}}\", facts[i * 2].generatedScript);\n            template = template.replace(\"{{Sentence B}}\", facts[i * 2 + 1].generatedScript);\n            storyText += template + ' '\n        }\n    }\n    if (facts.length % 2) {\n        //storyText += facts[facts.length - 1].script()\n        storyText += facts[facts.length - 1].generatedScript\n    }\n    //console.log(\"storyText\", storyText)\n    return storyText\n}\n\nexport const genSubtitle = function (fact,lang) {\n    if (lang === \"en-US\") {\n        let title;\n        if (!isValid(fact))\n            return ''\n\n        title = 'The ' + fact.type\n        switch (fact.type) {\n            case FactType.ASSOCIATION:\n                title += ' of ' + fact.measure[0].field + ' and ' + fact.measure[1].field\n                break;\n            case FactType.CATEGORIZATION:\n                // title += ' of ' + fact.groupby[0]\n                title = fact.groupby[0]\n                break;\n\n            case FactType.DIFFERENCE:\n                title += ' between ' + fact.focus[0].value + ' and ' + fact.focus[1].value\n                break;\n            case FactType.DISTRIBUTION:\n                title += ' of ' + fact.measure[0].field\n                break;\n            case FactType.EXTREME:\n                title += ' of ' + fact.measure[0].field\n                break;\n            case FactType.OUTLIER:\n                title += ' of ' + fact.measure[0].field\n                break;\n            case FactType.PROPORTION:\n                title += ' of ' + fact.focus[0].value\n                break;\n            case FactType.RANK:\n                title += ' of ' + fact.measure[0].field\n                break;\n            case FactType.TREND:\n                title += ' of ' + fact.measure[0].field\n                break;\n            case FactType.VALUE:\n                title = 'The ' + convertAggregation(fact.measure[0].aggregate) + ' ' + fact.measure[0].field\n                break;\n            default:\n                break;\n        }\n        if (fact.subspace.length) {\n            let subspace = '';\n            fact.subspace.map((key, i) => { return subspace += ` in ${key.value}` })\n            title += subspace;\n        }\n        return title;\n    }else{\n        let title='';\n        if (!isValid(fact))\n            return ''\n        if (fact.subspace.length) {\n                let subspace = '';\n                fact.subspace.map((key, i) => { return subspace += ` ${key.value}` })\n                title += ' '+ subspace +'';\n        }\n        // title = 'The ' + fact.type\n        switch (fact.type) {\n            case FactType.ASSOCIATION:\n                title += fact.measure[0].field + '  ' + fact.measure[1].field + ''\n                break;\n            case FactType.CATEGORIZATION:\n                // title += ' of ' + fact.groupby[0]\n                title += fact.groupby[0]+''\n                break;\n\n            case FactType.DIFFERENCE:\n                title += fact.focus[0].value + '  ' + fact.focus[1].value +''\n                break;\n            case FactType.DISTRIBUTION:\n                title += fact.measure[0].field + ''\n                break;\n            case FactType.EXTREME:\n                title += fact.measure[0].field + ''\n                break;\n            case FactType.OUTLIER:\n                title += fact.measure[0].field+''\n                break;\n            case FactType.PROPORTION:\n                title +=  fact.focus[0].value + ''\n                break;\n            case FactType.RANK:\n                title += fact.measure[0].field +''\n                break;\n            case FactType.TREND:\n                title += fact.measure[0].field +''\n                break;\n            case FactType.VALUE:\n                switch (convertAggregation(fact.measure[0].aggregate)) {\n                    case AggregationType.SUM:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    case AggregationType.MAX:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    case AggregationType.MIN:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    case AggregationType.AVG:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    case AggregationType.COUNT:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    case AggregationType.NONE:\n                        title += fact.measure[0].field +''\n                        break;\n            \n                    default:\n                        title += fact.measure[0].field +''\n                        break;\n                        \n                }                \n\n            default:\n                break;\n        }\n        \n        return title;\n    }\n    \n   \n}\n\n\nexport const genTitle = function (fileName) {\n    let title;\n    switch (fileName) {\n        case 'CarSales.csv':\n            title = 'Car Sales'\n            break;\n\n        case 'nCoV2020.csv':\n            title = 'COVID-19'\n            break;\n\n        case 'deadstartup.csv':\n            title = 'Startup Failures'\n            break;\n\n        default:\n            if (fileName.indexOf('.') > 0) {\n                let number = fileName.indexOf('.');\n                // let csv = fileName.substr(number);\n                title = fileName.substring(0, number);\n            } else {\n                title = fileName\n            }\n            break;\n    }\n    return title\n}\n","export default {\n    NUMERICAL: 'numerical',\n    CATEGORICAL: 'categorical',\n    TEMPORAL: 'temporal',\n    GEOGRAPHICAL: 'geographical',\n}","export default {\n    // Data\n    UPLOAD_DATA: 'UPLOAD_DATA',\n    CONNECT_DATA: 'CONNECT_DATA',\n    CHANGE_DATA: 'CHANGE_DATA',\n    VISUALIZE_DATA: 'VISUALIZE_DATA',\n    UPDATE_DATA_URL: 'UPDATE_DATA_URL',\n    // Fact\n    ADD_FACT: 'ADD_FACT',\n    INSERT_FACT: 'INSERT_FACT',\n    INSERT_FACT_BY_FACT:'INSERT_FACT_BY_FACT',\n    UPDATE_FACT: 'UPDATE_FACT',\n    CHANGE_FACT:'CHANGE_FACT',\n    DELETE_FACT: 'DELETE_FACT',\n    DELETE_UNUSEDFACT: 'DELETE_UNUSEDFACT',\n    ORDER_FACTS: 'ORDER_FACTS',\n    SET_HOVER_INDEX: 'SET_HOVER_INDEX',\n    UPDATE_FILTERS:'UPDATE_FILTERS',\n    UPDATE_FILTERS_TITLE:'UPDATE_FILTERS_TITLE',\n    UPDATE_DATARES:'UPDATE_DATARES',\n    UPDATE_SCHEMA_FILTER:'UPDATE_SCHEMA_FILTER',\n    UPDATE_FILTERS_CHANGE_FLAG:'UPDATE_FILTERS_CHANGE_FLAG',\n    CHANGE_CURRENT_EDITING:'CHANGE_CURRENT_EDITING',\n    UPDATE_FILTERS_LOCAL: 'UPDATE_FILTERS_LOCAL', \n    UPDATE_PANNEL_WIDTH:'UPDATE_PANNEL_WIDTH',\n\n    // Story\n    INIT_FACT: 'INIT_FACT',\n    INIT_RELATION: 'INIT_RELATION',\n    SELECT_FACT: 'SELECT_FACT',\n    CHANGE_METHOD: 'CHANGE_METHOD',\n    SET_STORY_PARAMETER: 'SET_STORY_PARAMETER',\n    SET_AGGREGATION_LEVEL: 'SET_AGGREGATION_LEVEL',\n    SET_REWARD_WEIGHT: 'SET_REWARD_WEIGHT',\n    GENERATE_STORY: 'GENERATE_STORY',\n    CHANGE_TITLE: 'CHANGE_TITLE',\n    CHANGE_SUBTITLE: 'CHANGE_SUBTITLE',\n    UPDATE_STORY_CARD_NUMBER: 'UPDATE_STORY_CARD_NUMBER',\n    UPDATE_COMMENT_STORY_INFO: 'UPDATE_COMMENT_STORY_INFO',\n    UPDATE_UUID: 'UPDATE_UUID',\n    UPDATE_PROGRESS: 'UPDATE_PROGRESS',//\n    EXPORT_PDF: 'EXPORT_PDF',//pdf\n    // new\n    CHANGE_TO_ANIMATION: 'CHANGE_TO_ANIMATION',//change facts to animated facts\n    // user\n    UPDATE_USER_INFO: 'UPDATE_USER_INFO',\n    UPDATE_USER_OPERATION: 'UPDATE_USER_OPERATION',\n    UPDATE_CONVERT_TYPE: 'UPDATE_CONVERT_TYPE',\n    UPDATE_LOCALE: 'UPDATE_LOCALE',\n    CLOSE_PANNEL: 'CLOSE_PANNEL',\n\n    // video\n    INIT_VIDOE_CARD: 'INIT_VIDOE_CARD',\n    ADD_EMPTY_CARD: 'ADD_EMPTY_CARD',\n    REMOVE_CARD: 'REMOVE_CARD',\n    CHANGE_CARD: 'CHANGE_CARD',\n    EXCHANGE_CARD:'EXCHANGE_CARD',\n    CHANGE_CARD_FLAG:'CHANGE_CARD_FLAG',\n    ADD_CARD:'ADD_CARD',\n    ADD_CARDS:'ADD_CARDS',\n    REPLAY_VIDEO_SLICE:'REPLAY_VIDEO_SLICE',\n    PLAY_VIDEO_SLICE:'PLAY_VIDEO_SLICE',\n    PLAY_VIDEO_CONTINUE:'PLAY_VIDEO_CONTINUE',\n    STOP_PLAY_VIDEO_CONTINUE:'STOP_PLAY_VIDEO_CONTINUE',\n    ADD_NOW_VIDEO_TIME:'ADD_NOW_VIDEO_TIME',\n    CHANGE_NOW_VIDEO_TIME:'CHANGE_NOW_VIDEO_TIME',\n    CHANGE_ALL_VIDEO_TIME:'CHANGE_ALL_VIDEO_TIME',\n\n    // video leftsider content\n    SET_DATA_FILTER:'SET_DATA_FILTER',\n    SET_DATA_FACT:'SET_DATA_FACT',\n    SET_EDIT_SLICE:'SET_EDIT_SLICE',\n    SET_DEFAULT:'SET_DEFAULT',\n    SET_LEFTSIDER_CONTENT:'SET_LEFTSIDER_CONTENT',\n\n\n    //video time line bar\n    INIT_TIME_LINE_BAR_WDITH:'INIT_TIME_LINE_BAR_WDITH',\n    ADD_BAR_TO_TIME_LINE_BAR:'ADD_BAR_TO_TIME_LINE_BAR',\n    ADD_BARS_TO_TIME_LINE_BAR:'ADD_BARS_TO_TIME_LINE_BAR',\n    DELETE_BAR_FROM_TIME_LINE_BAR:'DELETE_BAR_FROM_TIME_LINE_BAR',\n    CHANGE_TIME_LINE_BAR:'CHANGE_TIME_LINE_BAR',\n    SET_LEFT_BAR_WIDTH:'SET_LEFT_BAR_WIDTH',\n    SET_RIGHT_BAR_WIDTH:'SET_RIGHT_BAR_WIDTH',\n    SET_DRAG_DIRECTION:'SET_DRAG_DIRECTION',\n    SET_MOUSE_DOWN_STATE:'SET_MOUSE_DOWN_STATE',\n    SET_DRAG_STATE:'SET_DRAG_STATE',\n\n    SET_CURRENT_X:'SET_CURRENT_X',\n    SET_LEFT_OFFSET_WIDTH:'SET_LEFT_OFFSET_WIDTH',\n    SET_RIGHT_OFFSET_WIDTH:'SET_RIGHT_OFFSET_WIDTH',\n    SET_CURRENT_BAR_INDEX:'SET_CURRENT_BAR_INDEX',\n\n    SET_DRAG_CURSOR:'SET_DRAG_CURSOR',\n    \n    SET_POSITION: 'SET_POSITION',\n    SET_SCENE_SCALE: 'SET_SCENE_SCALE',\n    QUESTION_2_GIF: 'QUESTION_2_GIF',\n    ISGENERATINGGIF:'ISGENERATINGGIF',\n    CHANGE_TEMP_SPEC:'CHANGE_TEMP_SPEC',\n    OPERATOR_CHANGE:'OPERATOR_CHANGE',\n    ANIMATION_CHANGE:'ANIMATION_CHANGE',\n    CHANGE_KEYS:'CHANGE_KEYS',\n    CHANGE_OPERATOR:'CHANGE_OPERATOR'\n\n}","const OperationType = {\n    BEFORE_UPLOAD: 0,\n    UPLOADIND: 1,\n    UPLOADED: 2,\n    GENERATING: 3,\n    GENERATED: 4,\n    FAILED: 5,\n    FILE_LARGE: 6,\n    ADDING: 7,\n    ADD_FAILED: 8,\n    ADDED: 9,\n    PUBLISHED: 10\n}\n\nexport default OperationType;","export default {\n    \"FACTSHEET\": \"Factsheet\",\n    \"DASHBOARD\": \"Dashboard\",\n    \"DATACOMICS\": \"DataComics\",\n    \"DATAVIDEOS\": \"DataVideos\",\n    \"H5\": \"H5\"\n}","import ActionType from './type';\n\n\nexport const updateUserInfo = (userInfo) => ({\n    type: ActionType.UPDATE_USER_INFO,\n    userInfo\n})\n\nexport const updateOperation = (operateState) => ({\n    type: ActionType.UPDATE_USER_OPERATION,\n    operateState\n})\n\nexport const updateCovertType = (convertType) => ({\n    type: ActionType.UPDATE_CONVERT_TYPE,\n    convertType\n})\n\nexport const updateLocale = (currentLocale) => ({\n    type: ActionType.UPDATE_LOCALE,\n    currentLocale\n})\n\nexport const closePannel = (isClose) => ({\n    type: ActionType.CLOSE_PANNEL,\n    isClose\n})\n","import React from 'react';\nimport ChartType from '../constant/ChartType';\nimport getSupportedChartTypes from '@/tool/getSupportedChartTypes';\nimport Chart from '../Chart';\nimport { isValid, customizeFact } from '@/view/FactEditor/helper';\nimport _ from 'lodash';\n\nexport const facts2charts = (facts, shema, chartDiversity = 0) => {\n    for (let i = 0; i < facts.length; i++) {\n        let supportedChartTypes = getSupportedChartTypes(shema, facts[i]);\n        let choiceCount = parseInt((supportedChartTypes.length + 1) * chartDiversity);\n        let choicedChartTypes = supportedChartTypes.slice(0, choiceCount + 1);\n        facts[i].chart = choicedChartTypes[Math.floor(Math.random() * choicedChartTypes.length)].chart;\n    }\n    return facts\n}\nexport const getChoice = (length) => {\n    let choice = Math.round(Math.random() * (length - 1));\n    return choice;\n}\n\n\nexport const getFactChartType = (shema, fact, choice = 0) => {\n    let supportedChartTypes = getSupportedChartTypes(fact, shema);\n    if (supportedChartTypes.length === 0) return null;\n    return supportedChartTypes[getChoice(supportedChartTypes.length)].chart;\n}\n\nconst getvischartype = (chart) => {\n    let chartType = chart;\n    switch (chart) {\n        case ChartType.AREA_CHART:\n            chartType = \"areachart\";\n            break;\n        case ChartType.BUBBLE_CHART:\n            chartType = \"bubblechart\";\n            break;\n        case ChartType.COLOR_FILLING_MAP:\n            chartType = \"filledmap\";\n            break;\n        case ChartType.BUBBLE_MAP:\n            chartType = \"bubblemap\";\n            break;\n        case ChartType.HALF_RING_CHART:\n            chartType = \"donutchart\";\n            break;\n        case ChartType.HORIZONTAL_BAR_CHART:\n            chartType = \"horizentalbarchart\";\n            break;\n\n        case ChartType.VERTICAL_BAR_CHART:\n        case ChartType.STACKED_BAR_CHART:\n        case ChartType.VERTICAL_DIFFERENCE_BAR_CHART:\n        case ChartType.ISOTYPE_BAR_CHART:\n        case ChartType.VERTICAL_DIFFERENCE_ARROW_CHART:\n            chartType = \"verticalbarchart\"\n            break;\n        case ChartType.LINE_CHART:\n        case ChartType.STACKED_LINE_CHART:\n            chartType = \"linechart\";\n            break;\n        case ChartType.PROPORTION_ISOTYPE_CHART:\n        case ChartType.PIE_CHART:\n            chartType = \"piechart\";\n            break;\n        case ChartType.PROGRESS_BAR_CHART:\n            chartType = \"progresschart\";\n            break;\n        case ChartType.RING_CHART:\n            chartType = \"donutchart\";\n            break;\n        case ChartType.SCATTER_PLOT:\n            chartType = \"scatterplot\";\n            break;\n        case ChartType.TEXT_CHART:\n            chartType = \"textchart\";\n            break;\n        case ChartType.TREE_MAP:\n            chartType = \"treemap\";\n            break;\n        default:\n            break;\n    }\n    return chartType;\n}\n\nexport const fact2chart = function (specData, uuid, fact, data, size, compound = false) {\n    if (!fact.chart || fact.chart === \"\") {\n        fact.chart = getFactChartType(specData.schema, fact);//chart\n    }\n\n    let chart = fact.chart;\n    // if (compound) {\n    //     chart = fact.compoundChart;\n    // }\n\n    if (chart === ChartType.ISOTYPE_BAR_CHART) {\n        fact.chart = ChartType.VERTICAL_BAR_CHART;\n    }\n    fact = customizeFact(fact);//important\n    if (!fact.chart || !isValid(fact)) {\n        console.log(\"no valid\", fact)\n        return null;\n    }\n    let specFact = {\n        ...fact,\n        breakdown: fact.groupby.map(d => {\n            return {\n                \"field\": d\n            }\n        })\n    }\n\n    //console.log(\"size\", size)\n    let specChart = {\n        size: size,\n        type: getvischartype(chart),\n        style: \"business\",\n        duration: 0,\n        showSuggestion: true,//Unsupported\n    }\n    specData = {\n        ...specData,\n        values: data,\n    }\n    let specNew = {\n        data: specData,\n        fact: specFact,\n        chart: specChart,\n    }\n    return <Chart spec={_.cloneDeep(specNew)} uuid={uuid} />\n}\n","import React from 'react';\nimport ChartType from '../constant/ChartType';\nimport getSupportedChartTypes from '@/tool/getSupportedChartTypes';\nimport Chart from '../Chart';\nimport { isValid, customizeFact } from '@/view/FactEditor/helper';\nimport _ from 'lodash';\n\nexport const facts2unitVises = (facts, shema, chartDiversity = 0) => {\n    for (let i = 0; i < facts.length; i++) {\n        let supportedChartTypes = getSupportedChartTypes(shema, facts[i]);\n        let choiceCount = parseInt((supportedChartTypes.length + 1) * chartDiversity);\n        let choicedChartTypes = supportedChartTypes.slice(0, choiceCount + 1);\n        facts[i].chart = choicedChartTypes[Math.floor(Math.random() * choicedChartTypes.length)].chart;\n    }\n    return facts\n}\nexport const getChoice = (length) => {\n    let choice = Math.round(Math.random() * (length - 1));\n    return choice;\n}\n\n\nexport const getFactChartType = (shema, fact, choice = 0) => {\n    let supportedChartTypes = getSupportedChartTypes(fact, shema);\n    if (supportedChartTypes.length === 0) return null;\n    return supportedChartTypes[getChoice(supportedChartTypes.length)].chart;\n}\n\nexport const fact2unitSpec = function(filename,specData, fact, data, size, width_height, compound = false) {\n    if (!fact.chart || fact.chart === \"\") {\n        fact.chart = getFactChartType(specData.schema, fact); //chart\n    }\n\n    let chart = fact.chart;\n\n    if (chart === ChartType.ISOTYPE_BAR_CHART) {\n        fact.chart = ChartType.VERTICAL_BAR_CHART;\n    }\n    fact = customizeFact(fact); //important\n    \n    /* if (!fact.chart || !isValid(fact)) {\n        console.log(\"no valid\", fact)\n        return null;\n    } */\n\n    let specFact = {\n        type:fact.type,\n        subspace:fact.subspace,\n        measure:fact.measure.map(d => {\n            return {\n                \"field\": d.field,\n                \"aggregate\":d.aggregate\n            }\n        }),\n        breakdown: fact.groupby.map(d => {\n            return {\n                \"field\": d\n            }\n        }),\n        focus:fact.focus,\n    }\n    let specChart\n    if (width_height) {\n        specChart = {\n            width: width_height.width,\n            height: width_height.height,\n            type: \"unitvis\",\n            style: \"business\",\n            duration: 0,\n            // showSuggestion: true, //Unsupported\n        }\n    } else {\n        specChart = {\n            size: size,\n            type: \"unitvis\",\n            style: \"business\",\n            duration: 0,\n            // showSuggestion: true, //Unsupported\n        }\n    }\n\n    specData = {\n        ...specData,\n        values: data,\n    }\n    let specNew = {\n        data: specData,\n        fact: specFact,\n        chart: specChart,\n    }\n    return specNew\n\n}\n\nexport const fact2unitVis = function(specData, uuid, fact, data, size, width_height, compound = false) {\n    if (!fact.chart || fact.chart === \"\") {\n        fact.chart = getFactChartType(specData.schema, fact); //chart\n    }\n\n    let chart = fact.chart;\n\n    if (chart === ChartType.ISOTYPE_BAR_CHART) {\n        fact.chart = ChartType.VERTICAL_BAR_CHART;\n    }\n    fact = customizeFact(fact); //important\n    if (!fact.chart || !isValid(fact)) {\n        console.log(\"no valid\", fact)\n        return null;\n    }\n    let specFact = {\n        ...fact,\n        type: fact.type,\n        breakdown: fact.groupby.map(d => {\n            return {\n                \"field\": d\n            }\n        })\n    }\n    let specChart\n    if (width_height) {\n        specChart = {\n            width: width_height.width,\n            height: width_height.height,\n            type: \"unitvis\",\n            style: \"business\",\n            duration: 0,\n            showSuggestion: true, //Unsupported\n        }\n    } else {\n        specChart = {\n            size: size,\n            type: \"unitvis\",\n            style: \"business\",\n            duration: 0,\n            showSuggestion: true, //Unsupported\n        }\n    }\n\n    specData = {\n        ...specData,\n        values: data\n    }\n\n    let specNew = {\n        data: specData,\n        fact: specFact,\n        chart: specChart,\n    }\n    /* specData.schema.forEach(a => {\n        console.log(\"{\"+\n        \"\\\"field\\\":\\\"\"+a.field+\n        \"\\\",type\\\":\\\"\"+a.type+\n        \"\\\",subtype\\\":\\\"\"+a.subtype+\"\\\"\"\n        \"},\")\n    }); */\n    \n\n\n    return <Chart spec = { _.cloneDeep(specNew) } uuid = { uuid }/>\n}","import * as d3 from 'd3';\n\nclass DataLoader {\n    constructor() {\n        this._data = [];\n        this._schema = [];\n    }\n\n    data() {\n        return this._data;\n    }\n\n    schema() {\n        return this._schema;\n    }\n\n    load(spec) {\n        return new Promise((resolve, reject) => {\n            let numericalFields = [];\n            let numerical = spec.schema.filter(d => d.type === \"numerical\");\n            numericalFields = numerical.map(d => d.field);\n            if ('values' in spec) {\n                let data = spec.values;\n                data.forEach((d, i) => {\n                    for (let key in d) {\n                        if (numericalFields.indexOf(key) !== -1) {\n                            d[key] = parseFloat(d[key])\n                        }\n                    }\n                })\n                this._data = data;\n                this._schema = spec.schema;\n                resolve(this);\n            } else {\n                d3.csv(spec.url)\n                .then(function (data) {\n                    data.forEach((d, i) => {\n                        for (let key in d) {\n                            if (numericalFields.indexOf(key) !== -1) {\n                                d[key] = parseFloat(d[key])\n                            }\n                        }\n                    })\n                    this._data = data;\n                    this._schema = spec.schema;\n                    resolve(this);\n                }.bind(this)).catch(function (error) {\n                    reject(error);\n                })\n            }\n        });\n    }\n}\n\nexport default DataLoader;","const FactType = {\n    Association: 'association',\n    Categorization: 'categorization',\n    Difference: 'difference',\n    Distribution: 'distribution',\n    Extreme: 'extreme',\n    Outlier: 'outlier',\n    Proportion: 'proportion',\n    Rank: 'rank',\n    Trend: 'trend',\n    Value: 'value',\n}\n\nexport default FactType","export default {\n    SUM: 'sum',\n    MAX: 'max',\n    MIN: 'min',\n    AVG: 'avg',\n    COUNT: 'count',\n    NONE: 'none'\n}","import * as d3 from 'd3';\nimport FactType from './visualization/facttype';\nimport AggregationType from './visualization/aggtype';\n\nclass Fact {\n    constructor() {\n        // data, factspec\n        this._data = [];\n        this._schema = [];\n        this._factdata = [];\n        this._type = \"\";\n        this._measure = [];\n        this._subspace = [];\n        this._breakdown = [];\n        this._parameter = \"\";\n        this._focus = [];\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n        this._factdata = value;\n    }\n\n    schema(value) {\n        this._schema = value;\n    }\n\n    factdata() {\n        return this._factdata;\n    }\n\n    fact() {\n        return {\n            type: this._type,\n            measure: this._measure,\n            subspace: this._subspace,\n            breakdown: this._breakdown,\n            focus: this._focus,\n            parameter: this._parameter\n        }\n    }\n\n    process(spec) {\n        this._type = spec.type ? spec.type : FactType.Distribution;\n        this._measure = spec.measure ? spec.measure : [];\n        if (this._measure.length === 0) {\n            this._measure = [{ 'aggregate': 'count' }];\n        }\n        this._subspace = spec.subspace ? spec.subspace : [];\n        this._breakdown = spec.breakdown ? spec.breakdown : [];\n        this._focus = spec.focus ? spec.focus : [];\n\n        let schemaDict = {};\n        for (const column of this._schema) {\n            schemaDict[column.field] = {};\n            schemaDict[column.field]['subtype'] = column.subtype;\n            schemaDict[column.field]['pictype'] = column.pictype;\n            schemaDict[column.field]['type'] = column.type;\n            schemaDict[column.field]['values'] = column.values;\n            schemaDict[column.field]['isPostCode'] = column.isPostCode;\n        }\n        this._measure = this._measure.map(x => {\n            if ('field' in x) {\n                x['type'] = schemaDict[x.field]['type'];\n                if (schemaDict[x.field]['subtype']) {\n                    x['subtype'] = schemaDict[x.field]['subtype'];\n                }\n                if (schemaDict[x.field]['pictype']) {\n                    x['pictype'] = schemaDict[x.field]['pictype'];\n                }\n            }\n            return x;\n        });\n        this._subspace = this._subspace.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            if (schemaDict[x.field]['isPostCode']) {\n                x['isPostCode'] = schemaDict[x.field]['isPostCode'];\n            }\n            return x;\n        });\n        this._breakdown = this._breakdown.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            if (schemaDict[x.field]['values']) {\n                x['values'] = schemaDict[x.field]['values'];\n            }\n            if (schemaDict[x.field]['isPostCode']) {\n                x['isPostCode'] = schemaDict[x.field]['isPostCode'];\n            }\n            return x;\n        });\n        this._focus = this._focus.map(x => {\n            x['type'] = schemaDict[x.field]['type'];\n            if (schemaDict[x.field]['subtype']) {\n                x['subtype'] = schemaDict[x.field]['subtype'];\n            }\n            if (schemaDict[x.field]['pictype']) {\n                x['pictype'] = schemaDict[x.field]['pictype'];\n            }\n            return x;\n        });\n\n        /** subspace **/\n        if (this._subspace.length > 0) {\n            this._factdata = this.filter(this.factdata(), this._subspace);\n        }\n        /** aggregate **/\n        if (this._measure.length > 0) {\n            let measure = this._measure;\n            let breakdown = this._breakdown;\n            this._factdata = this.aggregate(this._factdata, measure, breakdown);\n        }\n\n        /** parameter **/\n        try {\n            this._parameter = this.parameter()\n        } catch (error) {\n            console.log('parameter is wrong')\n        }\n        \n        return new Promise((resolve, reject) => {\n            resolve(this);\n        });\n    }\n\n    parameter() {\n        let data = this.factdata();\n        let fact = this.fact();\n        let breakdown = fact.breakdown;\n        let focus = fact.focus;\n        let measure = fact.measure;\n\n        switch (fact.type) {\n            case FactType.Association:\n                function pearson(items, k1, k2) {\n                    var x = 0,\n                        xx = 0,\n                        y = 0,\n                        yy = 0,\n                        xy = 0;\n\n                    items.forEach(item => {\n                        xx += item[k1] * item[k1];\n                        x += item[k1];\n\n                        yy += item[k2] * item[k2];\n                        y += item[k2]\n\n                        xy += item[k1] * item[k2];\n                    });\n\n                    var Lxx = xx - ((x * x) / items.length),\n                        Lyy = yy - ((y * y) / items.length),\n                        Lxy = xy - ((x * y) / items.length);\n\n                    if (Lxx === 0 || Lyy === 0)\n                        return 0;\n\n                    return Lxy / Math.sqrt(Lxx * Lyy);\n                }\n                const x = \"measure0:\" + (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field),\n                    y = \"measure1:\" + (measure[1].aggregate === \"count\" ? \"COUNT\" : measure[1].field);\n                let pearsons = pearson(data, x, y)\n                return pearsons;\n\n            case FactType.Categorization:\n                let categories = data.map((d) => {\n                    return d[breakdown[0].field]\n                })\n                return Array.from(new Set(categories));\n\n            case FactType.Rank:\n                let rankList = data.sort((a, b) => b['Recovered'] - a['Recovered'])\n                let rankCaetgories = rankList.map((d) => {\n                    return d[breakdown[0].field]\n                })\n                return rankCaetgories;\n\n            case FactType.Proportion:\n                let focusItem = data.find(d => d[focus[0].field] === focus[0].value),\n                    restItems = data.filter(d => d[focus[0].field] !== focus[0].value);\n                let yEncoding = measure[0].field;\n                let seriesData = [focusItem[yEncoding], d3.sum(restItems, d => d[yEncoding])];\n                let pieData = d3.pie().sort(null)(seriesData);\n                let percent = pieData[0].value / d3.sum(pieData, d => d.value);\n                let percentText = (percent * 100).toFixed(1) + \"%\";\n                return percentText;\n\n            case FactType.Value:\n                return data[0][measure[0].field];\n\n            case FactType.Trend:\n                const getLeastSquares = (X, Y) => {\n                    let ret = {}\n\n                    let sumX = 0\n                    let sumY = 0\n                    let sumXY = 0\n                    let sumXSq = 0\n                    let N = X.length\n\n                    for (let i = 0; i < N; ++i) {\n                        sumX += X[i]\n                        sumY += Y[i]\n                        sumXY += X[i] * Y[i]\n                        sumXSq += X[i] * X[i]\n                    }\n\n                    ret.m = ((sumXY - sumX * sumY / N)) / (sumXSq - sumX * sumX / N)\n                    ret.b = sumY / N - ret.m * sumX / N\n\n                    return ret;\n                }\n\n                let arr = Array.apply(null, { length: data.length }).map((item, index) => {\n                    return index\n                })\n\n                let ret = getLeastSquares(arr, data.map(d => d[measure[0].field]))\n\n                if (ret.m > 0) return 'increasing'\n                if (ret.m < 0) return 'decreasing'\n                return 'flat'\n\n            case FactType.Difference:\n                let filteredData = []\n                for (const fs of focus) {\n                    data.filter((x) => x[fs.field] === fs.value)[0] && filteredData.push(data.filter((x) => x[fs.field] === fs.value)[0])\n                }\n                let differenceValue = Math.abs(Number(filteredData[0][measure[0].field]) - Number(filteredData[1] ? filteredData[1][measure[0].field] : 0));\n                return differenceValue;\n\n            case FactType.Extreme:\n                let extremeItem = data.find(d => d[focus[0].field] === focus[0].value)\n                let maxValue = d3.max(data, d => d[measure[0].field])\n                let minValue = d3.min(data, d => d[measure[0].field])\n                extremeItem.extremeFocus = ''\n                if(extremeItem[measure[0].field] === minValue) extremeItem.extremeFocus = \"minimum\" \n                if(extremeItem[measure[0].field] === maxValue) extremeItem.extremeFocus = \"maximum\" \n                return Object.values(extremeItem);\n\n            default:\n                return \"\";\n        }\n    }\n\n    filter(data, subspace) {\n        let filteredData = data;\n        //subspace\n        //subspace\"operator\"\n        //\"operator\":\n        //\"operator\":\n        let wayFlag=subspace[0].hasOwnProperty(\"operator\");\n        if(wayFlag){\n            //subspace\n            //subspacevalue\n            //operator\n            subspace.forEach((item)=>{\n                let operator=item[\"operator\"];\n                switch (operator) {\n                    case \"EQ\":\n                        //==\n                        filteredData= filteredData.filter((x) => {\n                            //\n                            return Math.abs(x[item.field]-parseFloat(item.value[0]))<1e-2;\n                        });\n                        break;\n                    case \"IN\":\n                        //==\n                        filteredData= filteredData.filter((x) => {\n                            return item.value.includes(x[item.field]);\n                        });\n                        break;\n                    case \"RANGE\":\n                        //value\n                        //,\n                        let value1=parseFloat(item.value[0]);\n                        let value2=parseFloat(item.value[1]);\n                        let max=value1;\n                        let min=value2;\n                        // \n                        if(value1<value2) {\n                            max=value2;\n                            min=value1;\n                        }\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]>=min &&x[item.field]<=max;\n                        });\n                        break;\n                    case \"NOT RANGE\":\n                        //value\n                        //,\n                        let valueNoRange1=parseFloat(item.value[0]);\n                        let valueNoRange2=parseFloat(item.value[1]);\n                        let max1=valueNoRange1;\n                        let min1=valueNoRange2;\n                        // \n                        if(valueNoRange1<valueNoRange2) {\n                            max1=valueNoRange2;\n                            min1=valueNoRange1;\n                        }\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]<min1 || x[item.field]>max1;\n                        });\n                        break;\n                    case \"GT\":\n                        //\n                        //\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]>parseFloat(item.value[0]);\n                        });\n                        break;\n                    case \"LT\":\n                        //\n                        //\n                        filteredData= filteredData.filter((x) => {\n                            return x[item.field]<parseFloat(item.value[0]);\n                        });\n                        break;\n                    default:\n                        console.log(\"operator error!not in [GT,IN,LT,NOT RANGE,RANGE,EQ]\");\n\n                }\n            });\n            return  filteredData;\n\n        }else{\n\n            /** filter rows **/\n            for (const sub of subspace) {\n                filteredData = filteredData.filter((x) => {\n                    // console.log(x);\n                    return x[sub.field] === sub.value})\n            }\n            return filteredData\n        }\n    }\n\n    aggregate(data, measures, breakdowns) {\n        let aggdata = [];\n        if (measures.length < 1) {\n            aggdata = data;\n        } else if (measures.length === 1) {\n            let measure = measures[0];\n            aggdata = this.agg(data, measure, breakdowns);\n\n        } else if (measures.length === 2) {\n            // over one measure\n            let aggdata1 = [];\n            let aggdata2 = [];\n            if (breakdowns.length > 0) {\n                aggdata1 = this.agg(data, measures[0], breakdowns);\n                aggdata2 = this.agg(data, measures[1], breakdowns);\n            } else {\n                aggdata1 = JSON.parse(JSON.stringify(data));\n                aggdata2 = JSON.parse(JSON.stringify(data));\n            }\n            let breakdownfields = breakdowns.map(x => x.field)\n            for (let index = 0; index < aggdata1.length; index++) {\n                const element1 = aggdata1[index];\n                for (const key in element1) {\n                    if (!breakdownfields.includes(key)) {\n                        element1[\"measure0:\" + key] = element1[key];\n                        delete element1[key];\n                    }\n                }\n                const element2 = aggdata2[index];\n                for (const key in element2) {\n                    if (!breakdownfields.includes(key)) {\n                        element2[\"measure1:\" + key] = element2[key];\n                        delete element2[key];\n                    }\n                }\n                aggdata.push(Object.assign(element1, element2));\n            }\n        } else if (measures.length === 3) {\n            // 3 measures\n            let aggdata1 = [];\n            let aggdata2 = [];\n            let aggdata3 = [];\n            if (breakdowns.length > 0) {\n                aggdata1 = this.agg(data, measures[0], breakdowns);\n                aggdata2 = this.agg(data, measures[1], breakdowns);\n                aggdata3 = this.agg(data, measures[2], breakdowns);\n            } else {\n                aggdata1 = JSON.parse(JSON.stringify(data));\n                aggdata2 = JSON.parse(JSON.stringify(data));\n                aggdata3 = JSON.parse(JSON.stringify(data));\n            }\n            let breakdownfields = breakdowns.map(x => x.field)\n            for (let index = 0; index < aggdata1.length; index++) {\n                const element1 = aggdata1[index];\n                for (const key in element1) {\n                    if (!breakdownfields.includes(key)) {\n                        element1[\"measure0:\" + key] = element1[key];\n                        delete element1[key];\n                    }\n                }\n                const element2 = aggdata2[index];\n                for (const key in element2) {\n                    if (!breakdownfields.includes(key)) {\n                        element2[\"measure1:\" + key] = element2[key];\n                        delete element2[key];\n                    }\n                }\n                const element3 = aggdata3[index];\n                for (const key in element3) {\n                    if (!breakdownfields.includes(key)) {\n                        element3[\"measure2:\" + key] = element3[key];\n                        delete element3[key];\n                    }\n                }\n                aggdata.push(Object.assign(element1, element2, element3));\n            }\n        }\n        return aggdata;\n    }\n\n    agg(data, measure, breakdowns) {\n        let aggdata = {};\n        /**\n         * filter columns\n         */\n        let columns = [];\n        columns = columns.concat(breakdowns.map(x => x.field));\n        if (measure.aggregate !== \"count\") {\n            columns.push(measure.field);\n        }\n        aggdata = data.map(x => {\n            let y = {};\n            for (const column of columns) {\n                y[column] = x[column];\n            }\n            return y;\n        });\n        switch (measure.aggregate) {\n            case AggregationType.SUM:\n                aggdata = this.sum(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.AVG:\n                aggdata = this.avg(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.MAX:\n                aggdata = this.max(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.MIN:\n                aggdata = this.min(aggdata, measure, breakdowns);\n                break;\n            case AggregationType.COUNT:\n                aggdata = this.count(aggdata, measure, breakdowns)\n                break;\n\n            default:\n                aggdata = this.max(aggdata, measure, breakdowns);\n                break;\n        }\n        return aggdata;\n    }\n\n    sum(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let sumData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(d => {\n                        sumData[i] += d[measure.field]\n                    })\n                    let sumRows = Object.assign({}, d.values[0])\n                    sumRows[measure.field] = sumData[i]\n                    return sumRows\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let sumData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(d => {\n                    sumData[i] += d[measure.field]\n                })\n                let sumRows = Object.assign({}, d.values[0])\n                sumRows[measure.field] = sumData[i]\n                return sumRows\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = 0;\n            for (let index = 0; index < data.length; index++) {\n                agg[measure.field] += data[index][measure.field];\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    avg(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let sumData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(d => {\n                        sumData[i] += d[measure.field]\n                    })\n                    let sumRows = Object.assign({}, d.values[0])\n                    sumRows[measure.field] = sumData[i] / d.values.length;\n                    return sumRows;\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let sumData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(d => {\n                    sumData[i] += d[measure.field]\n                })\n                let sumRows = Object.assign({}, d.values[0])\n                sumRows[measure.field] = sumData[i] / d.values.length;\n                return sumRows;\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = 0;\n            for (let index = 0; index < data.length; index++) {\n                agg[measure.field] += data[index][measure.field];\n            }\n            agg[measure.field] /= data.length;\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    max(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let categoryData = calculateData.map(function (d, i) {\n                    let index = d3.scan(d.values, function (a, b) {\n                        if (a[measure.field] && b[measure.field])\n                            return b[measure.field] - a[measure.field];\n                    });\n                    if (index >= 0) {\n                        return d.values[index]\n                    } else {\n                        return d.values[0];\n                    }\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            factdata = calculateData.map(function (d, i) {\n                let index = d3.scan(d.values, function (a, b) {\n                    if (a[measure.field] && b[measure.field])\n                        return b[measure.field] - a[measure.field];\n                });\n                if (index >= 0) {\n                    return d.values[index]\n                } else {\n                    return d.values[0];\n                }\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = data[0][measure.field];\n            for (let index = 0; index < data.length; index++) {\n                if (agg[measure.field] < data[index][measure.field]) {\n                    agg[measure.field] = data[index][measure.field];\n                }\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    min(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let categoryData = calculateData.map(function (d) {\n                    let index = d3.scan(d.values, function (a, b) {\n                        if (a[measure.field] && b[measure.field])\n                            return a[measure.field] - b[measure.field];\n                    });\n                    if (index >= 0) {\n                        return d.values[index]\n                    } else {\n                        return d.values[0]\n                    }\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            factdata = calculateData.map(function (d) {\n                let index = d3.scan(d.values, function (a, b) {\n                    if (a[measure.field] && b[measure.field])\n                        return a[measure.field] - b[measure.field];\n                });\n                if (index >= 0) {\n                    return d.values[index]\n                } else {\n                    return d.values[0]\n                }\n            });\n        } else {\n            /** no breakdown **/\n            let agg = {};\n            agg[measure.field] = data[0][measure.field];\n            for (let index = 0; index < data.length; index++) {\n                if (agg[measure.field] > data[index][measure.field]) {\n                    agg[measure.field] = data[index][measure.field];\n                }\n            }\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n\n    count(data, measure, breakdowns) {\n        let factdata = [];\n        if (breakdowns.length > 1) {\n            /** has series **/\n            let seriesData = d3.nest().key(d => d[breakdowns[1].field]).entries(data);\n            for (const series of seriesData) {\n                let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(series.values);\n                let countData = new Array(calculateData.length).fill(0);\n                let categoryData = calculateData.map(function (d, i) {\n                    d.values.forEach(() => {\n                        countData[i] += 1;\n                    })\n                    let countRows = d.values[0];\n                    countRows['COUNT'] = countData[i];\n                    return countRows;\n                });\n                factdata = factdata.concat(categoryData);\n            }\n\n        } else if (breakdowns.length === 1) {\n            /** no series **/\n            let calculateData = d3.nest().key(d => d[breakdowns[0].field]).entries(data);\n            let countData = new Array(calculateData.length).fill(0);\n            factdata = calculateData.map(function (d, i) {\n                d.values.forEach(() => {\n                    countData[i] += 1\n                })\n                let countRows = d.values[0];\n                countRows['COUNT'] = countData[i];\n                return countRows;\n            });\n        } else {\n            /** no breakdown **/\n            let agg = { 'COUNT': data.length };\n            factdata.push(agg);\n        }\n        return factdata;\n    }\n}\n\nexport default Fact;\n","const MarkType = {\n    BAR: 'bar',\n    LINE: 'line',\n    POINT: 'point',\n    UNIT: 'unit'\n}\n\nexport default MarkType","const Size = {\n    LARGE: 'large',\n    WIDE: 'wide',\n    MIDDLE: 'middle',\n    SMALL: 'small',\n}\n\nexport default Size","import MarkType from './visualization/marktype';\nimport Size from './visualization/size';\n\nclass Visualization {\n    constructor() {\n        this._container = \"\";\n        this._data = [];\n        this._fact = {};\n        this._factdata = [];\n        this._processedData = [];\n        this._size = Size.LARGE;\n        this._width = 0;\n        this._height = 0;\n        this._mark = MarkType.POINT;\n        this._chart = {};\n        this._caption = \"\";\n    }\n\n    container(value) {\n        this._container = value;\n    }\n\n    size(value) {\n        if (!value) {\n            return this._size;\n        }\n        this._size = value;\n    }\n\n    width(value) {\n        if (!value) {\n            return this._width;\n        }\n        this._width = value;\n    }\n\n    height(value) {\n        if (!value) {\n            return this._height;\n        }\n        this._height = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n        this._processedData = value;\n    }\n\n    factdata(value) {\n        if (!value) {\n            return this._factdata;\n        }\n        this._factdata = value;\n    }\n\n    processedData(value) {\n        if (!value) {\n            return this._processedData;\n        }\n        this._processedData = value;\n    }\n\n    fact(value) {\n        if (!value) {\n            return this._fact;\n        }\n        this._fact = value;\n    }\n\n    chart(value) {\n        if (!value) {\n            return this._chart;\n        }\n        this._chart = value;\n    }\n\n    caption(value) {\n        if (!value) {\n            return this._caption;\n        }\n        this._caption = value;\n    }\n\n    run(pipeline) {\n        pipeline.operate(this);\n    }\n}\n\nexport default Visualization;","class Pipeline {\n    constructor() {\n        this._actions = []\n    }\n\n    add(action) {\n        this._actions.push(action);\n    }\n\n    actions() {\n        return this._actions;\n    }\n\n    operate(vis) {\n        this.actions().forEach(action => {\n            action.operate(vis);\n        });\n    }\n}\n\nexport default Pipeline;","class Action {\n    constructor(spec) {\n        this._target = null\n    }\n\n    target(value) {\n        if (!value) {\n            return this._target;\n        }\n        this._target = value;\n    }\n\n    operate(vis) {\n        \n    }\n}\n\nexport default Action;","import { max, min, sum } from 'd3';\nimport Action from './action';\n\nclass DataProcess extends Action {\n    constructor(spec) {\n        super(spec);\n        this._select = [];\n        this._groupby = [];\n        this._filter = [];\n        if ('select' in spec) {\n            this._select = spec['select'];\n        }\n        if ('groupby' in spec) {\n            this._groupby = spec['groupby'];\n        }\n        if ('filter' in spec) {\n            this._filter = spec['filter'];\n        }\n    }\n\n    operate(vis) {\n        //  spec  data\n        let data = vis.data();\n\n        // Step 1: Filter \n        try {\n            if (this._filter.length !== 0) {\n                data = data.filter(row => {\n                    for (const f of this._filter) {\n                        if (!(f.field in row && row[f.field] === f.value)) {\n                                return false;\n                            }\n                    }\n                    return true;\n                })\n            }\n        } catch (error) {\n            console.error('Data Processing: Error In Filtering:\\n' + Error);\n        }\n        \n        // Step 2: Groupby\n        // aggregate(select) by groupby\n        //  agg  groupby ==>  groupby  min/max/...\n        //  agg  groupby ==> filter \n        //  agg  groupby ==>  agg\n        //  agg  groupby ==> \n        let processedData = data;\n        try {\n            processedData = this.aggregate(data, this._select, this._groupby);\n        } catch (error) {\n            console.error('Data Processing: Error In Group By:\\n' + Error);\n        }\n\n        // Step 3: Select\n        // select: only store cols being selected\n        try {\n            const selectCols = this._select.map(s => s.field);\n\n            processedData.forEach(row => {\n                for (const key in row) {\n                    if (!selectCols.includes(key)) {\n                        delete row[key];\n                    }\n                }\n            });\n        } catch (error) {\n            console.error('Data Processing: Error In Select:\\n' + Error);\n        }\n        \n        //  processedData  vis \n        vis.processedData(processedData);\n    }\n\n    /**\n     * aggregating data specified in 'select'\n     * @param {*} data \n     * @param {*} selects selected cols\n     * @param {*} groupbys aggregate with groupby\n     * @returns \n     */\n    aggregate(data, selects, groupbys) {\n        if (selects.length === 0 && groupbys.length === 0) {\n            return data;\n        }\n        const groupbyCols = groupbys.map(g => g.field); \n        const aggCols = selects.filter(s => 'aggregate' in s && s.aggregate !== 'None') // filter for cols needed to be aggregated\n                                .reduce(function(res, col) {\n                                    res[col.field] = col.aggregate;\n                                    return res;\n                                }, {});\n        // restore records by groupby values\n        const result = data.reduce(function (res, obj) {\n            //  res unique  groupby \n            let recordName = groupbyCols.reduce(function(res, col) {\n                return res + col + ':' + obj[col] + ';';\n            }, \"\");\n\n            if (!(recordName in res)) {\n                let tempObj = { ...obj };\n                //  agg  col  agg function\n                Object.keys(aggCols).forEach(s => {\n                    tempObj[s] = [tempObj[s]];\n                });\n                res.push(res[recordName] = tempObj);\n            } else {\n                Object.keys(aggCols).forEach(col => {\n                    res[recordName][col].push(obj[col]);\n                })\n            }\n            return res;\n            \n        }, []);\n\n        // aggregate data with min/max/sum/count\n        result.forEach(record => {\n            Object.keys(aggCols).forEach(col => {\n                if (col in record) {\n                    record[col] = this.aggFuncRouter(record[col], aggCols[col]);\n                }\n            })\n        })\n        \n        return [...result];\n    }\n\n    /**\n     * aggregate a column with different agg function\n     * @param {*} colData column data to be aggregated\n     * @param {*} aggFunc aggregate function eg min/max/sum/avg/mean/count/...\n     * @returns \n     */\n    aggFuncRouter(colData, aggFunc) {\n        switch(aggFunc.toLowerCase()) {\n            case 'min':\n                return min(colData);\n            case 'max':\n                return max(colData);\n            case 'sum':\n                return sum(colData);\n            case 'count':\n                return colData.length;\n            case 'avg':\n            case 'mean':\n            default:\n                return sum(colData) / colData.length;\n        }\n\n    }\n\n}\n\nexport default DataProcess;","import * as d3 from 'd3';\n\nclass Chart {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._svg = d3.select(this._container).append(\"svg\")\n        this._width = 0;\n        this._height = 0;\n        this._data = [];\n        this._processedData = [];\n\n        // this._factdata = [];\n        // this._subspace = [];\n        // this._measure = [];\n        // this._breakdown = [];\n        // this._focus = [];\n    }\n\n    container(value) {\n        if (!value) {\n            d3.select(this._container).selectAll(\"*\").remove();\n            return this._container;\n        }\n        this._container = value;\n    }\n\n    svg() {\n        return this._svg;\n    }\n\n    width(value) {\n        console.log(this)\n        if (!value) {\n            if (this._width !== 0 && this._width !== '') {\n                return this._width;\n            } else {\n                if(this._container === \"#video-chart\")\n                    return 750\n                else\n                    return 200;\n            }\n        }\n        this._width = value;\n    }\n\n    height(value) {\n        if (!value) {\n            if (this._height !== 0 && this._height !== '') {\n                return this._height;\n            } else {\n                if(this._container === \"#video-chart\")\n                    return 545;\n                else\n                    return 130;\n            }\n        }\n        this._height = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._data;\n        }\n        this._data = value;\n    }\n\n    factdata(value) {\n        if (!value) {\n            return this._factdata;\n        }\n        this._factdata = value;\n    }\n\n    processedData(value) {\n        if (!value && !this._processedData) {\n            return this._data;\n        }\n        if (!value) {\n            return this._processedData;\n        }\n        this._processedData = value;\n    }\n\n    subspace(value) {\n        if (!value) {\n            return this._subspace;\n        }\n        this._subspace = value;\n    }\n\n    measure(value) {\n        if (!value) {\n            return this._measure;\n        }\n        this._measure = value;\n    }\n\n    breakdown(value) {\n        if (!value) {\n            return this._breakdown;\n        }\n        this._breakdown = value;\n    }\n\n    focus(value) {\n        if (!value) {\n            return this._focus;\n        }\n        this._focus = value\n    }\n\n    visualize() { }\n\n    drawAxis() { }\n\n    encodeXY() { }\n\n    encodeColor() { }\n\n    encodeSize() { }\n\n    encodeShape() { }\n\n    addEncoding(channel, field, style) { }\n\n    modifyEncoding(channel, field, style) { }\n\n    removeEncoding(channel, field, style) { }\n\n}\n\nexport default Chart;","export default function Color(mode = \"light\") {\n    const lightMode = {\n        BACKGROUND: '#FFFFFF',\n        DIVIDER: '#D9D9D9',\n        AXIS: '#000000',\n        TITLE: '#000000',\n        TEXT: '#000000',\n        ANNOTATION: '#FFBE32',\n        DEFAULT: '#73C8F3',\n        TOOLTIP: '#F28787',\n\n        //Qualitativecategorical)\n        CATEGORICAL: ['#73C8F3', '#FFE86D', '#F6B0A7', '#B2DBC1', '#EAE2B7', '#F3705C', '#4ECBC4', '#96A7CE'],\n        //Sequential\n        SEQUENTIAL: ['#7A0715', '#A71017', '#D32322', '#F04535', '#FA6B4D', '#FDAD92', '#FDCBBB', '#FFE5D9'],\n        //Diverging\n        DIVERGING: ['#1892FA', '#7CC0FB', '#ADD7F9', '#DEECF8', '#F3DEDE', '#F0ADAD', '#EC7C7C', '#E0191A']\n    }\n    const darkMode = {\n        BACKGROUND: '#000000',\n        DIVIDER: '#323232',\n        AXIS: '#FFFFFF',\n        TITLE: '#FFFFFF',\n        TEXT: '#FFFFFF',\n        ANNOTATION: '#FFBE32',\n        DEFAULT: '#73C8F3',\n\n        //Qualitativecategorical)\n        CATEGORICAL: ['#73C8F3', '#FFE86D', '#F6B0A7', '#B2DBC1', '#EAE2B7', '#F3705C', '#4ECBC4', '#96A7CE'],\n        //Sequential\n        SEQUENTIAL: ['#E0191A', '#FC4B4B', '#F46464', '#FC8585', '#FFA6A6', '#FFC8C8', '#FFDADA', '#F3DEDE'],\n        //Diverging\n        DIVERGING: ['#1892FA', '#7CC0FB', '#ADD7F9', '#DEECF8', '#F3DEDE', '#FFA6A6', '#F46464', '#E0191A']\n    }\n\n    switch (mode) {\n        case \"light\":\n            return lightMode;\n\n        case \"dark\":\n            return darkMode;\n\n        default:\n            return lightMode;\n    }\n\n}","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nclass BarChart extends Chart {\n\n    visualize() {\n        let margin = {\n                \"top\": 10,\n                \"right\": 10,\n                \"bottom\": 50,\n                \"left\": 50\n            }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n\n        this._svg = d3.select(this.container())\n                .append(\"svg\")\n                .attr(\"width\", this.width() + margin.left + margin.right)\n                .attr(\"height\", this.height() + margin.top + margin.bottom)\n                .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        \n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n\n        return this.svg();       \n    }\n\n    drawAxis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        let fontsize = 16, strokeWidth = 2;\n        const padding = fontsize * 0.6,\n            triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n        \n        let axis = svg.select('.axis');\n        svg.select(\".axis_x\").remove();\n        svg.select(\".axis_y\").remove();\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + padding - 1)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .text(breakdown[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"x1\", -strokeWidth / 2)\n            .attr(\"x2\", width)\n            .attr(\"y1\", height)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .text(measure[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"y1\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n    }\n\n    encodeXY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field);\n        \n        /** process data */\n        // get categories\n        let categoriesData = {};\n        factData.forEach((d, i) => {\n            if(categoriesData[d[xEncoding]]) {\n                categoriesData[d[xEncoding]].push(d);\n            } else {\n                categoriesData[d[xEncoding]] = [d];\n            }\n        });\n        // sum value group by category\n        let processedData = [];\n        for(let category in categoriesData) {\n            processedData.push({\n                [xEncoding]: category,\n                [yEncoding]: d3.sum(categoriesData[category], d => d[yEncoding])\n            })\n        }\n    \n        /** set the ranges */\n        let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]))\n            .padding(0.5);\n    \n        let yScale = d3.scaleLinear()\n            .range([height, 0])\n            .domain([0, d3.max(processedData, d => d[yEncoding])])\n            .nice();\n    \n        /** draw axis */\n        let axis = svg.append(\"g\")\n            .attr(\"class\", \"axis\"),\n            content = svg.append(\"g\")\n                .attr(\"class\", \"content\")\n                .attr(\"chartWidth\", width)\n                .attr(\"chartHeight\", height);\n\n        let axisX = d3.axisBottom(xScale);\n        let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickSize(-(height), 0, 0)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_x\")\n            .attr('transform', `translate(0, ${height})`)\n            .call(axisX);\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .call(axisY);\n        \n        // draw y axis path\n        axis.selectAll(\".axis_y .domain\")\n            .attr(\"opacity\", 0);\n        axis.selectAll(\".axis_y\")\n            .append(\"line\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke\", Color().AXIS);\n        \n        // axix-label\n        const labelPadding = 25, fontsize = 12;\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .attr(\"font-size\", fontsize)\n            .text(`${breakdown[0].field}`);\n\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-labelPadding}, ${height / 2}) rotate(-90)`)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-size\", fontsize)\n            .text(`${measure[0].field} (${measure[0].aggregate})` || \"Count\");\n        \n        /** draw grid */\n        axis.selectAll(\".axis_y .tick line\")\n            .attr(\"class\", \"gridline\")\n            .attr(\"stroke\", d => {\n                if(d ===0) return 0;\n                else return Color().DIVIDER;\n            });\n        \n        /* draw rects */\n        content.append(\"g\")\n            .attr(\"class\", \"rects\")\n            .selectAll(\"rect\")\n            .data(processedData)\n            .enter().append(\"rect\")\n            .attr(\"class\", \"mark\")\n            .attr(\"x\", d => xScale(d[xEncoding]))\n            .attr(\"y\", d => yScale(d[yEncoding]))\n            .attr(\"width\", xScale.bandwidth())\n            .attr(\"height\", d => height - yScale(d[yEncoding]))\n            .attr(\"fill\", Color().DEFAULT);\n\n    }\n\n    encodeColor() {\n        // if colorEncoding, clear and redraw \n        const breakdown = this.breakdown();\n        const colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n        if(colorEncoding) {\n            let width = this.width(),\n                height = this.height();\n            const factData = this.factdata();\n            const measure = this.measure();\n            const xEncoding = breakdown[0].field,\n                yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field);\n                // colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n            let content = d3.select(\".content\");\n\n            /** clear rects */\n            d3.selectAll(\".rects\").remove();\n\n            /** process data */\n            let stackData = [];\n            // get categories\n            let categoriesData = {};\n            factData.forEach((d, i) => {\n                if(categoriesData[d[xEncoding]]) {\n                    categoriesData[d[xEncoding]].push(d);\n                } else {\n                    categoriesData[d[xEncoding]] = [d];\n                }\n            });\n            // get series\n            let seriesData = {};\n            factData.forEach(d => {\n                if(seriesData[d[colorEncoding]]) {\n                    seriesData[d[colorEncoding]].push(d);\n                } else {\n                    seriesData[d[colorEncoding]] = [d];\n                }\n            });\n            let series = Object.keys(seriesData);\n            // get stack data\n            let processedData = [];\n            for(let category in categoriesData) {\n                let row = {};\n                row[xEncoding] = category;\n                series.map(s => row[s] = 0); \n                categoriesData[category].map(d => row[d[colorEncoding]] = d[yEncoding]);\n                processedData.push(row);\n            }\n            stackData = d3.stack().keys(series)(processedData);\n\n            /** set the ranges */\n            let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]))\n            .padding(0.5);\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, d3.max(stackData[stackData.length - 1], d => d[1])])\n                .nice();\n\n            /** draw rect layers */\n            let rectLayers = content.append(\"g\")\n                .selectAll(\"g\")\n                .data(stackData)\n                .join(\"g\")\n                .attr(\"class\", \"rectLayer\")\n                .attr(\"fill\", (d, i) => Color().CATEGORICAL[i]);\n            rectLayers.selectAll(\"rect\")\n                .data(d => d)\n                .enter().append(\"rect\")\n                .attr(\"class\", \"mark\")\n                .attr(\"x\", d => xScale(d.data[xEncoding]))\n                .attr(\"y\", d => yScale(d[1]))\n                .attr(\"width\", xScale.bandwidth())\n                .attr(\"height\", d => Math.abs(yScale(d[1]) - yScale(d[0])));\n        }\n    }\n\n}\nexport default BarChart;\n\n","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nclass LineChart extends Chart {\n\n    visualize() {\n        let margin = {\n                \"top\": 10,\n                \"right\": 10,\n                \"bottom\": 50,\n                \"left\": 50\n            }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n\n        this._svg = d3.select(this.container())\n                .append(\"svg\")\n                .attr(\"width\", this.width() + margin.left + margin.right)\n                .attr(\"height\", this.height() + margin.top + margin.bottom)\n                .append(\"g\")\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        \n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n\n        return this.svg();       \n    }\n\n    drawAxis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        let fontsize = 16, strokeWidth = 2;\n        const padding = fontsize * 0.6,\n            triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n        \n        let axis = svg.select('.axis');\n        svg.select(\".axis_x\").remove();\n        svg.select(\".axis_y\").remove();\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + padding - 1)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .text(breakdown[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"x1\", -strokeWidth / 2)\n            .attr(\"x2\", width)\n            .attr(\"y1\", height)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n            .attr(\"font-size\", fontsize)\n            .attr(\"text-anchor\", \"middle\")\n            .text(measure[0].field || \"Count\");\n        axis.append(\"path\")\n            .attr(\"class\", \"triangle\")\n            .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n            .attr(\"fill\", Color.AXIS);\n        axis.append(\"line\")\n            .attr(\"y1\", 0)\n            .attr(\"y2\", height)\n            .attr(\"stroke-width\", strokeWidth)\n            .attr(\"stroke\", Color.AXIS);\n    }\n\n    encodeXY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field)\n\n        /** process data */\n        // get categories\n        let categoriesData = {};\n        factData.forEach((d, i) => {\n            if(categoriesData[d[xEncoding]]) {\n                categoriesData[d[xEncoding]].push(d);\n            } else {\n                categoriesData[d[xEncoding]] = [d];\n            }\n        });\n        // sum value group by category\n        let processedData = [];\n        for(let category in categoriesData) {\n            processedData.push({\n                [xEncoding]: category,\n                [yEncoding]: d3.sum(categoriesData[category], d => d[yEncoding])\n            })\n        }\n\n\n    \n        /** set the ranges */\n        let xScale = d3.scaleBand()\n            .range([0, width])\n            .domain(factData.map(d => d[xEncoding]));\n    \n        let yScale = d3.scaleLinear()\n            .range([height, 0])\n            .domain([0, d3.max(factData, d => d[yEncoding])])\n            .nice();\n    \n        /** draw axis */\n        let axis = svg.append(\"g\")\n            .attr(\"class\", \"axis\"),\n        content = svg.append(\"g\")\n            .attr(\"class\", \"content\")\n            .attr(\"chartWidth\", width)\n            .attr(\"chartHeight\", height);\n        let axisX = d3.axisBottom(xScale);\n    \n        let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickSize(-height, 0, 0)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_x\")\n            .attr('transform', `translate(0, ${height})`)\n            .call(axisX);\n    \n    \n        axis.append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .call(axisY);\n\n        axis.selectAll(\".axis_y\")\n      .selectAll(\".domain\")\n      .attr(\"opacity\", 0);\n\n         /** draw grid */\n    axis.selectAll(\".axis_y\")\n      .selectAll(\"line\")\n            .attr(\"stroke\", d => {\n                if (d === 0) return Color().AXIS;\n                else return Color().DIVIDER;\n            })\n            .attr(\"class\", \"gridline\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", width)\n            .attr(\"y2\", 0)\n      .attr(\"opacity\", 1);\n\n        axis.selectAll(\".axis_x\")\n            .append(\"line\")\n            .attr(\"stroke\", Color().AXIS)\n            .attr(\"class\", \"gridline\")\n            .attr(\"x1\", 0)\n            .attr(\"y1\", -height)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", 0);\n\n        /* draw labels */\n        const labelPadding = 20, fontsize = 12;\n        console.log(\"measure:\", measure)\n        console.log(\"breakdown:\",breakdown)\n\n        axis.append(\"text\")\n            .attr(\"x\", width / 2)\n            .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dominant-baseline\", \"hanging\")\n            .attr(\"font-size\", fontsize)\n            .text(`${breakdown[0].field} (${breakdown[0].pictype})` || \"Catogory\");\n\n        axis.append(\"text\")\n            .attr(\"transform\", `translate(${-labelPadding}, ${height / 2}) rotate(-90)`) \n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"font-size\", fontsize)\n            .text(`${measure[0].field} (${measure[0].aggregate})` || \"Count\");\n\n        /* draw lines */\n        const line = d3.line()\n        .x(d => xScale(d[xEncoding]))\n        .y(d => yScale(d[yEncoding]))\n\n        content.append(\"g\")\n            .attr(\"class\", \"lineGroup\")\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", Color().DEFAULT)\n            .attr(\"stroke-width\", 2)\n            .attr(\"opacity\", 1)\n            .selectAll(\"path\")\n            .data(processedData)\n            .enter()\n            .append(\"path\")\n            .attr(\"class\", \"path\")\n            .attr(\"d\" , line(processedData));\n\n        /* draw points */\n        const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 50), 4);\n        content.append(\"g\")\n            .attr(\"class\", \"circleGroup\")\n            .attr(\"fill\", Color().DEFAULT)\n            .selectAll(\"circle\")\n            .data(processedData)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"mark\")\n            .attr(\"r\", circleSize)\n            .attr(\"cx\", d => xScale(d[xEncoding]))\n            .attr(\"cy\", d => yScale(d[yEncoding]));\n    }\n\n    encodeColor() {\n        let width = this.width(),\n            height = this.height();\n        const factData = this.factdata();\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        const xEncoding = breakdown[0].field,\n            yEncoding = (measure[0].aggregate === \"count\" ? \"COUNT\" : measure[0].field),\n            colorEncoding = breakdown.length < 2  ? null : breakdown[1].field;\n        \n        if(colorEncoding) {\n            let processedData = [];\n            /** get series */\n            let seriesData = {};\n            factData.forEach(d => {\n                if(seriesData[d[colorEncoding]]) {\n                    seriesData[d[colorEncoding]].push(d);\n                } else {\n                    seriesData[d[colorEncoding]] = [d];\n                }\n            });\n            processedData = seriesData;\n\n            /** set the ranges */\n            let xScale = d3.scaleBand()\n                .range([0, width])\n                .domain(factData.map(d => d[xEncoding]));\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, d3.max(factData, d => d[yEncoding])])\n                .nice();\n\n            /* draw lines */\n            for(let factKey in processedData) {\n                const line = d3.line()\n                .x(d => xScale(d[xEncoding]))\n                .y(d => yScale(d[yEncoding]))\n\n                d3.select(\".content\")\n                    .append(\"g\")\n                    .attr(\"class\", \"lineGroup\")\n                    .attr(\"fill\", \"none\")\n                    .attr(\"stroke\", Color().DEFAULT)\n                    .attr(\"stroke-width\", 3)\n                    .attr(\"opacity\", 1)\n                    .selectAll(\"path\")\n                    .data(processedData[factKey])\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"class\", \"path\")\n                    .attr(\"d\" , line(processedData[factKey]));\n            }\n\n            /* draw points */\n            const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 50), 4);\n            for(let factKey in processedData) {\n                d3.select(\".content\")\n                    .append(\"g\")\n                    .attr(\"class\", \"circleGroup\")\n                    .attr(\"fill\", Color().DEFAULT)\n                    .selectAll(\"circle\")\n                    .data(processedData[factKey])\n                    .enter().append(\"circle\")\n                    .attr(\"class\", \"mark\")\n                    .attr(\"r\", circleSize)\n                    .attr(\"cx\", d => xScale(d[xEncoding]))\n                    .attr(\"cy\", d => yScale(d[yEncoding]));\n            }\n            \n            d3.selectAll(\".circleGroup\")\n                .attr(\"fill\", (d,i) => {\n                    return Color().CATEGORICAL[i]\n                })\n\n            d3.selectAll(\".lineGroup\")\n                .attr(\"stroke\", (d,i) => {\n                    return Color().CATEGORICAL[i]\n                })\n\n        } \n    }\n\n}\nexport default LineChart;","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\n\nclass Scatterplot extends Chart {\n\n    visualize() {\n        // if (this.measure().length < 2) return;\n        let margin = {\n            \"top\": 10,\n            \"right\": 10,\n            \"bottom\": 50,\n            \"left\": 50\n        }\n        this.width(this.width() - margin.left - margin.right);\n        this.height(this.height() - margin.top - margin.bottom);\n\n        this._svg = d3.select(this.container())\n            .append(\"svg\")\n            .attr(\"width\", this.width() + margin.left + margin.right)\n            .attr(\"height\", this.height() + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        const measure = this.measure();\n        const breakdown = this.breakdown();\n        if (measure[0] && measure[1]) {\n            this.x = measure[0]\n            this.y = measure[1]\n        }\n        if (measure[2]) {\n            this.size = measure[2]\n        }\n        if (breakdown[1]) {\n            this.color = breakdown[1]\n        }\n\n        this.drawAxis();\n        this.encodeXY();\n        this.encodeColor();\n        this.encodeSize();\n        return this.svg();\n    }\n\n    drawAxis() {\n        if (this.x && this.y) {\n            let x = this.x,\n                y = this.y;\n            let svg = this.svg();\n            let width = this.width(),\n                height = this.height();\n            let fontsize = 16, strokeWidth = 2;\n            const padding = fontsize * 0.6,\n                triangleSize = Math.ceil(Math.sqrt(height * width) / 10);\n\n            let axis = svg.select('.axis');\n            svg.select(\".axis_x\").remove();\n            svg.select(\".axis_y\").remove();\n\n            axis.append(\"text\")\n                .attr(\"x\", width / 2)\n                .attr(\"y\", height + padding - 1)\n                .attr(\"font-size\", fontsize)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"dominant-baseline\", \"hanging\")\n                .text(x || \"Count\");\n            axis.append(\"path\")\n                .attr(\"class\", \"triangle\")\n                .attr(\"transform\", `translate(${width - triangleSize / 25 * 2}, ${height})rotate(90)`)\n                .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n                .attr(\"fill\", Color().AXIS);\n            axis.append(\"line\")\n                .attr(\"x1\", -strokeWidth / 2)\n                .attr(\"x2\", width)\n                .attr(\"y1\", height)\n                .attr(\"y2\", height)\n                .attr(\"stroke-width\", strokeWidth)\n                .attr(\"stroke\", Color().AXIS);\n            axis.append(\"text\")\n                .attr(\"transform\", `translate(${-padding}, ${height / 2}) rotate(-90)`)\n                .attr(\"font-size\", fontsize)\n                .attr(\"text-anchor\", \"middle\")\n                .text(y || \"Count\");\n            axis.append(\"path\")\n                .attr(\"class\", \"triangle\")\n                .attr(\"transform\", `translate(0, ${triangleSize / 25 * 2})`)\n                .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(triangleSize))\n                .attr(\"fill\", Color().AXIS);\n            axis.append(\"line\")\n                .attr(\"y1\", 0)\n                .attr(\"y2\", height)\n                .attr(\"stroke-width\", strokeWidth)\n                .attr(\"stroke\", Color().AXIS);\n        }\n    }\n\n    encodeXY() {\n        if (this.x && this.y) {\n            let svg = this.svg();\n            let width = this.width(),\n                height = this.height();\n            const processedData = this.processedData();\n            const xEncoding = this.x,\n                yEncoding = this.y;\n\n            let axis = svg.append(\"g\")\n                .attr(\"class\", \"axis\"),\n                content = svg.append(\"g\")\n                    .attr(\"class\", \"content\")\n                    .attr(\"chartWidth\", width)\n                    .attr(\"chartHeight\", height);\n\n            // set the ranges\n            let xScale = d3.scaleLinear()\n                .range([0, width])\n                .domain([0, d3.max(processedData, d => d[xEncoding])])\n                .nice();\n\n            let yScale = d3.scaleLinear()\n                .range([height, 0])\n                .domain([0, d3.max(processedData, d => d[yEncoding])])\n                .nice();\n\n            let axisX = d3.axisBottom(xScale)\n                .ticks(5)\n                .tickPadding(5)\n                .tickFormat(function (d) {\n                    if ((d / 1000000) >= 1) {\n                        d = d / 1000000 + \"M\";\n                    } else if ((d / 1000) >= 1) {\n                        d = d / 1000 + \"K\";\n                    }\n                    return d;\n                });\n\n            let axisY = d3.axisLeft(yScale)\n                .ticks(5)\n                .tickPadding(5)\n                .tickFormat(function (d) {\n                    if ((d / 1000000) >= 1) {\n                        d = d / 1000000 + \"M\";\n                    } else if ((d / 1000) >= 1) {\n                        d = d / 1000 + \"K\";\n                    }\n                    return d;\n                });\n\n            axis.append(\"g\")\n                .attr(\"class\", \"axis_x\")\n                .attr('transform', `translate(0, ${height})`)\n                .call(axisX)\n\n            axis.append(\"g\")\n                .attr(\"class\", \"axis_y\")\n                .call(axisY);\n\n            // for grid line\n            axis.selectAll(\".axis_y .tick\")\n                .append(\"line\")\n                .attr(\"stroke\", d => {\n                    if (d === 0) return Color().AXIS;\n                    else return Color().DIVIDER;\n                })\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", 0)\n                .attr(\"x2\", width)\n                .attr(\"y2\", 0);\n\n            axis.selectAll(\".axis_x .tick\")\n                .append(\"line\")\n                .attr(\"stroke\", Color().DIVIDER)\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", -height)\n                .attr(\"x2\", 0)\n                .attr(\"y2\", 0);\n\n            axis.append(\"line\")\n                .attr(\"stroke\", Color().DIVIDER)\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", width)\n                .attr(\"y1\", height)\n                .attr(\"x2\", width)\n                .attr(\"y2\", 0);\n\n            axis.append(\"line\")\n                .attr(\"stroke\", Color().DIVIDER)\n                .attr(\"class\", \"gridline\")\n                .attr(\"x1\", 0)\n                .attr(\"y1\", 0)\n                .attr(\"x2\", width)\n                .attr(\"y2\", 0);\n\n            /* draw labels */\n            const labelPadding = 20, fontsize = 12;\n\n            axis.append(\"text\")\n                .attr(\"x\", width / 2)\n                .attr(\"y\", height + svg.selectAll(\".axis_x\").select(\"path\").node().getBBox().height + labelPadding)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"dominant-baseline\", \"hanging\")\n                .attr(\"font-size\", fontsize)\n                .text(xEncoding);\n\n            axis.append(\"text\")\n                .attr(\"transform\", `translate(${-labelPadding - svg.selectAll(\".axis_y\").select(\"path\").node().getBBox().width}, ${height / 2}) rotate(-90)`)\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"font-size\", fontsize)\n                .text(yEncoding);\n\n            /* draw points */\n            const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 50), 7);\n            content.append(\"g\")\n                .attr(\"class\", \"circleGroup\")\n                .selectAll(\"circle\")\n                .data(processedData)\n                .enter().append(\"circle\")\n                .attr(\"class\", \"mark\")\n                .attr(\"r\", circleSize)\n                .attr(\"stroke\", \"#FFF\")\n                .attr(\"stroke-width\", 0)\n                .attr(\"fill\", Color().DEFAULT)\n                .attr(\"opacity\", 1)\n                .attr(\"cx\", d => xScale(d[xEncoding]))\n                .attr(\"cy\", d => yScale(d[yEncoding]));\n        }\n\n    }\n\n    encodeColor() {\n        if (this.color) {\n            let color = this.color;\n            let categories = Array.from(new Set(this.processedData().map(d => d[color])))\n            let svg = this.svg();\n            svg.selectAll(\"circle\")\n                .attr(\"fill\", (d) => {\n                    let i = categories.indexOf(d[color]);\n                    return Color().CATEGORICAL[i % 8]\n                })\n        }\n    }\n\n    encodeSize() {\n        if (this.size) {\n            let size = this.size;\n            let width = this.width(),\n                height = this.height();\n            let sizeEncoding = size;\n            const circleSize = Math.min(Math.ceil(Math.sqrt(height * width) / 40), 15);\n            const maxR = circleSize;\n            const minR = circleSize / 10;\n            let minValue = d3.min(this.processedData(), d => d[sizeEncoding]),\n                maxValue = d3.max(this.processedData(), d => d[sizeEncoding]);\n            let scale = d3.scaleSqrt([minValue, maxValue], [minR, maxR]);\n            let svg = this.svg();\n            svg.selectAll(\"circle\")\n                .attr(\"r\", d => scale(d[sizeEncoding]))\n        }\n    }\n\n    encodeShape() {\n\n    }\n\n    addEncoding(channel, field, style) {\n        console.log(field)\n        if (!this[channel]) {\n            this[channel] = field.field;\n            d3.selectAll(\"svg > g > *\").remove();\n            this.drawAxis();\n            if (this.x && this.y) this.encodeXY();\n            if (this.color) this.encodeColor();\n            if (this.size) this.encodeSize();\n        }\n    }\n\n    modifyEncoding(channel, field, style) {\n        if (this[channel]) {\n            this[channel] = field;\n            d3.selectAll(\"svg > g > *\").remove();\n            this.drawAxis();\n            if (this.x && this.y) this.encodeXY();\n            if (this.color) this.encodeColor();\n            if (this.size) this.encodeSize();\n        }\n    }\n\n    removeEncoding(channel, style) {\n        this[channel] = null;\n        d3.selectAll(\"svg > g > *\").remove();\n        if (this.x && this.y) this.encodeXY();\n        if (this.color) this.encodeColor();\n        if (this.size) this.encodeSize();\n    }\n}\n\nexport default Scatterplot;","import Color from '../../visualization/color';\n\nclass Unit {\n    constructor() {\n        this._id = 0;\n        this._x = 0;\n        this._y = 0;\n        this._radius = 0;\n        this._color = Color().DEFAULT;\n        this._visible = \"1\";\n        this._opacity = 1;\n        this._unitgroup = {};\n    }\n\n    id(value) {\n        if (!value) {\n            return this._id;\n        }\n        this._id = value;\n    }\n\n    data(value) {\n        if (!value) {\n            return this._dataItem;\n        }\n        Object.entries(value).forEach(\n            ([key, value]) => this[key] = value\n        )\n    }\n\n    unitgroup(key, value) {\n        if (!value && !key) {\n            return this._unitgroup;\n        }\n        this._unitgroup[key] = value;\n    }\n\n\n    x(value) {\n        if (!value) {\n            return this._x;\n        }\n        this._x = value;\n    }\n\n\n    y(value) {\n        if (!value) {\n            return this._y;\n        }\n        this._y = value;\n    }\n\n    radius(value) {\n        if (!value) {\n            return this._radius;\n        }\n        this._radius = value;\n    }\n\n    color(value) {\n        if (!value) {\n            return this._color;\n        }\n        this._color = value;\n    }\n\n    visible(value) {\n        if (!value) {\n            return this._visible;\n        }\n        this._visible = value;\n    }\n\n    opacity(value) {\n        if (!value) {\n            return this._opacity;\n        }\n        this._opacity = value;\n    }\n}\n\nexport default Unit;","import * as d3 from 'd3';\nimport Chart from '../chart';\nimport Color from '../../visualization/color';\nimport Unit from './unit';\nimport { text } from 'd3';\nclass Unitvis extends Chart {\n\n    visualize() {\n        let margin = {\n            \"top\": 10,\n            \"right\": 10,\n            \"bottom\": 10,\n            \"left\": 10\n        }\n\n        this.units = []\n        this._svg = d3.select(this.container())\n            .append(\"svg\")\n            // .attr(\"width\", this.width() + margin.left + margin.right)\n            // .attr(\"height\", this.height() + margin.top + margin.bottom+80)\n            .attr(\"width\", this.width() )\n            .attr(\"height\", this.height())\n            .append(\"g\")\n            // .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        this.data()\n        this.initvis()\n\n        return this.svg();\n    }\n\n    data() {\n        let processedData = this.processedData();\n        processedData.forEach((d, i) => {\n            let unit = new Unit();\n            unit.id(i);\n            unit.data(d)\n            this.units.push(unit);\n        })\n        return this;\n    }\n\n    // The initial status of unit vis (square layout)\n    initvis() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n        const processedData = this.processedData()\n\n        let min = Math.min(width, height);\n        let vwidth = min;\n        let setLength = 50;\n        let setNumber = setLength * setLength;\n        let margin = {\n            left: vwidth / 10,\n            right: vwidth / 10\n        };\n\n        let maxSet = Math.ceil(processedData.length / setNumber);\n        let maxRow = Math.floor(Math.sqrt(maxSet));\n        let maxColumn = Math.ceil(maxSet / maxRow);\n        let radius = Math.min(((vwidth - margin.left - margin.right) / (maxColumn * (setLength + 1) - 1)), 6);\n\n        let row = Math.floor(Math.sqrt(processedData.length));\n        let column = Math.ceil(processedData.length / row); // row 3 col 4\n        \n        // let initX = width / 2 - column * radius;\n        // let initY = height / 2 - row * radius;\n        let initX = (width - 2.2*column * radius) / 2 - radius;\n        let initY = (height - 2.2*row * radius) / 2 - radius;\n\n        let units = this.units.filter(d => d.visible() === \"1\");\n        let id = 0\n        for (let i = 0; i < row; i++) {\n            for (let j = 0; j < column; j++) {\n                let baseX = initX + 2.2 * radius * j;\n                let baseY = initY + 2.2 * radius * i;\n                if (id >= units.length) {\n                    break;\n                }\n                units[id].x(baseX);\n                units[id].y(baseY)\n                units[id].radius(radius);\n                id += 1\n            }\n        }\n\n        let content = svg.append(\"g\")\n            .attr(\"class\", \"content\")\n            .attr(\"chartWidth\", width)\n            .attr(\"chartHeight\", height);\n\n        content.append(\"g\")\n            .attr(\"class\", \"circleGroup\")\n            .selectAll(\"circle\")\n            .data(this.units)\n            .enter().append(\"circle\")\n            .attr(\"class\", \"mark\")\n            .attr(\"r\", d => d.radius())\n            .attr(\"stroke\", \"#FFF\")\n            .attr(\"stroke-width\", 0)\n            .attr(\"fill\", d => d.color())\n            .attr(\"opacity\", 0)\n            .attr(\"cx\", d => d.x())\n            .attr(\"cy\", d => d.y())\n            .transition()\n            .delay((height<=200)? 0:2000)\n            .duration((height<=200)? 0:2000)\n            .attr(\"opacity\", 1)         \n            ;\n\n    }\n    // Draw X axis\n    encodeX() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n\n        let margin = {\n            left: width / 20,\n            right: width / 20\n        }\n        let textSize = 15;\n        if(height<200){\n            textSize = 14\n        }\n        // situation 1: \n        if (this.x && this.y && this.size) {\n            let sizeField = this.units[0].unitgroup().size;\n            let yField = this.units[0].unitgroup().y;\n            let xField = this.x.field\n\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n\n            let maxR = 0.7*d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n\n            if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else if(width<=200){averageradius = Math.sqrt(nodesmaxcount) / 5; ratio = 1;}\n            else { averageradius = Math.sqrt(nodesmaxcount) / 2; ratio = 1.8; }\n\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            rowTotalWidth=2.1*maxR*(column)\n\n            function textSizef(fontSize,fontFamily,text){\n                var span = document.createElement(\"span\");\n                var result = {};\n                result.width = span.offsetWidth;\n                result.height = span.offsetHeight;\n                span.style.visibility = \"hidden\";\n                span.style.fontSize = fontSize;\n                span.style.fontFamily = fontFamily;\n                span.style.display = \"inline-block\";\n                document.body.appendChild(span);\n                if(typeof span.textContent != \"undefined\"){\n                  span.textContent = text;\n                }else{\n                  span.innerText = text;\n                }\n                result.width = parseFloat(window.getComputedStyle(span).width) - result.width;\n                result.height = parseFloat(window.getComputedStyle(span).height) - result.height;\n                return result;\n              }\n\n\n            let strlen = yValueFreq.map(d => textSizef(textSize,'Arial',d['key']).width)\n            let strmax = d3.max(strlen)\n            \n            let Minleftpadding =  2*maxR +2*textSize+textSizef(textSize,'Arial',yField).height+strmax\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else {\n                    \n                    if (0.9 * width - rowTotalWidth - 2 * Minleftpadding > 0) {\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n                        \n                    }\n                    else if (0.9 * width - rowTotalWidth  - 2 * Minleftpadding <=0) {\n                        let leftpadding = 1*Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n\n                        \n                    }\n                }\n            })\n\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 2) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n\n            simulation.tick(200);\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2 * maxR)\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[0] - 2 * maxR)\n                    .attr(\"y\", centernodey[iBar])\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"end\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 2 * textSize, height))\n\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(yField)\n                .attr(\"x\", centernodex[0] - 2 * maxR - 3 * textSize)\n                .attr(\"y\", height / 2)\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize}, ${height / 2})`)\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n    }}\n        // situation 2:\n        else {   \n            let breakdownField = this.x.field;\n\n            let databreakdown = d3.nest().key(function (d) { return d[breakdownField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            let bar = databreakdown.length;\n\n            databreakdown.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n\n            let breakdownValue = databreakdown.map(d => d['key']);\n            let count = databreakdown.map(d => d['value']);\n\n            let maxCount = d3.max(count);\n\n            let length = Math.ceil(30 / bar) < 5 ? Math.ceil(30 / bar) : 5\n\n            let wradius = ((width - margin.left - margin.right) / ((length + 2) * (bar - 1) + length)) / 2;\n            let hradius = height * 0.8 / Math.ceil(maxCount / length) / 2;\n\n            // let radius = 0.8*Math.min(wradius, hradius);\n            let radius = Math.min(Math.min(wradius, hradius),6);\n            if (height<200){\n                radius = Math.min(Math.min(wradius, hradius),3);\n            }\n\n            let s=(0.9*width-2*(bar)*length*radius)/(radius)/(bar+3)/2<1?0.2:Math.floor((0.9*width-2*(bar)*length*radius)/(radius)/(bar+3)/2)         \n\n            let padding = (0.9* width -bar*length*2*radius-(bar-1)*s*2*radius ) / 2\n            let baseX = d3.range(padding + radius, width-padding-(2*length-1)*radius+1, (width-2*padding-(2*length)*radius)/(bar-1));\n            let baseY = (0.9*height - Math.ceil(maxCount / length) * 2 * radius) / 2 + Math.ceil(maxCount / length) * 2 * radius - radius;\n            let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n            if(height<200){\n                baseY = 0.85*baseY\n            }\n\n            let units = [];\n            for (let i = 0; i < bar; i++) {\n                let barUnits = visibleUnits.filter(d => d[breakdownField] === breakdownValue[i]);\n                units.push(barUnits);\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n                .transition()\n                .delay(this.delay)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 0)\n\n            \n            units.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(breakdownValue[iBar])\n                    .attr(\"x\", baseX[iBar] + (length - 1) * radius)\n                    // .attr(\"x\", baseX[iBar] + radius*6)\n                    .attr(\"y\", baseY + radius + textSize)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", (width<=200&breakdownValue[iBar].length>=4)?`rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`:\"translate(\" + baseX[iBar] - radius + length * radius + \",\" + baseY + radius + textSize + \") rotate(-45)\")\n                    // .attr(\"transform\", \"translate(\" + baseX[iBar] - radius + length * radius + \",\" + baseY + radius + textSize + \") rotate(-45)\")\n                    // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n                    \n\n                bar.forEach((d, i) => {\n                    let row = Math.floor(i / length);\n                    let col = i % length;\n                    d.x(baseX[iBar] + 2 * radius * col);\n                    d.y(baseY - 2 * radius * row);\n                    d.radius(radius);\n                    d.opacity(1);\n                    d.unitgroup('x', breakdownField);\n                })\n\n                if (height>200){\n                svg.select(\".content\").append(\"text\")\n                    .text(breakdownField)\n                    .attr(\"x\", width / 2)\n                    .attr(\"y\", function() {\n                        if (height<200) {\n                            return baseY+30\n                        } else {\n                            return  Math.min(baseY + 50, height)\n                        }\n                    })\n                    .attr(\"font-size\", textSize)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay)\n                    .duration(this.delay + this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n                }});\n            }   \n        }\n\n    //  Draw y axis\n    encodeY() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        // situation 1:\n        if (this.x && !this.size) {\n\n\n            let margin = {\n                left: width / 20,\n                right: width / 20\n            }\n\n\n            let textSize;\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.y.field;\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            let xbar = xValueFreq.length;\n            let length = Math.ceil(30 / xbar) < 5 ? Math.ceil(30 / xbar) : 5\n            if (xbar >= 8 & height>200) { textSize = 14; }\n            else if (xbar >= 8 & height<200) { textSize = 10;}\n            else { textSize = 15; }\n\n            let ybar = yValueFreq.length;\n\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n\n            let unit = [];\n            let ymax = {}\n\n            let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n\n            for (let i = 0; i < xbar; i++) {\n                let xunit = [];\n                let barUnits = visibleUnits.filter(d => d[xField] === xValue[i]);\n                for (let j = 0; j < ybar; j++) {\n                    let yuint = barUnits.filter(d => d[yField] === yValue[j]);\n                    if (!ymax[yValue[j]]) { ymax[yValue[j]] = yuint.length }\n                    if (yuint.length > ymax[yValue[j]]) {\n                        ymax[yValue[j]] = yuint.length\n                    }\n                    xunit.push({ \"x\": xValue[i], \"y\": yValue[j], \"data\": yuint })\n                }\n                unit.push(xunit);\n            }\n\n            let xmaxCount = 0\n            for (const [key, value] of Object.entries(ymax)) {\n                xmaxCount += Math.ceil(value / length);\n            }\n\n\n            let wradius = ((width - margin.left - margin.right) / ((length +1) * (xbar - 1) + length)) / 2.2;\n            let hradius = d3.min([(height * 0.9-2*textSize) / (xmaxCount )/ 2,(height * 0.9-2*textSize) / ybar/(Math.ceil( length)+1)/ 2]);\n            // let radius =0.8* Math.min(wradius, hradius);\n            let radius = Math.min(Math.min(wradius, hradius),6);\n\n            if(height<200){\n                radius = 0.8*radius\n            }\n            let textpadding = 10\n            let baseX = xValueFreq.map(function (d, i) {\n                if (xbar === 1) {\n\n                    return (width - length * radius * 2.2) / 2\n                }\n                else if (height<200 & xbar>10) {\n                    let s=(0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2<1?0.2:Math.floor((0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2)         \n                    let leftPadding = (1* width -xbar*length*2*radius-(xbar-1)*s*2*radius ) / 2+1*margin.left\n                    return 0.5*leftPadding + (width-2*leftPadding)/(xbar-1)*1.2*i;\n                }\n\n                else if (xbar >= 2) {\n                    let s=(0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2<1?0.2:Math.floor((0.9*width-2*(xbar)*length*radius)/(radius)/(xbar+3)/2)         \n                    let leftPadding = (1* width -xbar*length*2*radius-(xbar-1)*s*2*radius ) / 2+1*margin.left\n                    return leftPadding + (width-2*leftPadding)/(xbar-1)*i;\n                }\n            })\n\n            let topPadding = d3.max([(height - xmaxCount * radius * 2 - ybar * radius * 2 - 2 * textpadding) / 2, 0.1*height])\n\n            let baseY\n\n            if (height<200 & ybar>10) {\n                baseY = [0]\n            }\n            else if (height<200 & xbar>10) {\n                baseY = [0]\n            }\n            else if (height<200 && ybar<3) {\n                baseY = [1.1*topPadding]\n            }\n            else if (height<200) {\n                baseY = [0.4*topPadding]\n            }\n            else if (ybar>10){\n                baseY = [topPadding]\n            }\n            else{\n                baseY = [topPadding]\n            }\n\n\n            let y = baseY[0]\n            if (height<200 & ybar>10) {\n                for (let i = 0; i < ybar; i++) {\n                    y += ymax[yValue[i]] / length * 2 * radius + 5\n                    baseY.push(y)\n                }                    \n            }\n            else if (height<200) {\n                for (let i = 0; i < ybar; i++) {\n                    y += ymax[yValue[i]] / length * 2 * radius + 5\n                    baseY.push(y)\n                }                    \n            }\n            else{\n                for (let i = 0; i < ybar; i++) {\n                    y += ymax[yValue[i]] / length * 2 * radius + 10\n                    baseY.push(y)\n                }\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n\n            for (let i = 0; i < xbar; i++) {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[i])\n                    .attr(\"x\", baseX[i] + (length - 1) * radius)\n                    // .attr(\"x\", baseX[iBar] + radius*6)\n                    .attr(\"y\", baseY[baseY.length - 1] + textpadding)\n                    .attr(\"font-size\", function() {\n                        if (height<200) {\n                            return textSize*0.7\n                        } else {\n                            return textSize\n                        }\n                    })\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + baseX[i] - radius + length * radius + \",\" + baseY[baseY.length - 1] + radius + textSize + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n    \n                let xbar = unit[i]\n                for (let j = 0; j < ybar; j++) {\n                    svg.select(\".content\")\n                        .append(\"text\")\n                        .text(yValue[j])\n                        .attr(\"x\", function() {\n                            if (height<200 & xValueFreq.length>10) {\n                                return baseX[0] - radius - textpadding\n                            } else {\n                                return baseX[0] - radius - 2 * textpadding\n                            }\n                        })\n                        // .attr(\"x\", baseX[iBar] + radius*6)\n                        .attr(\"y\", baseY[j] + radius * 2)\n                        .attr(\"font-size\", textSize)\n                        .attr(\"text-anchor\", \"end\")\n                        .attr(\"transform\", \"translate(\" + baseY[0] + radius + textSize - radius + length * radius + \",\" + baseY[j] + radius * 3 + radius + textSize + \") rotate(-45)\")\n                        // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                        .attr(\"fill-opacity\", 0)\n                        .transition()\n                        .delay(this.delay + this.duration/2)\n                        .duration(this.duration/2)\n                        .attr(\"fill-opacity\", 1)\n    \n                    let x = baseX[i]\n                    let y = baseY[j]\n\n                    let yset = xbar[j]\n                    if (yset) {\n                        yset['data'].forEach((d, i) => {\n                            let row = Math.floor(i / length);\n                            let col = i % length;\n                            d.x(x + 2 * radius * col);\n                            d.y(y + 2 * radius * row);\n                            d.radius(radius);\n                            d.opacity(1);\n                            d.unitgroup('y', yField);\n\n                        })\n                    }\n                }\n\n\n                if (height>200){\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xField)\n                    .attr(\"x\", width / 2)\n                    .attr(\"y\", function() {\n                        if (height<200) {\n                            return baseY[baseY.length - 1] +20\n                        } else {\n                            return  Math.min(baseY[baseY.length - 1] + 3 * textSize, height)\n                        }\n                    })\n                    .attr(\"font-size\", textSize)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration)\n                    .attr(\"fill-opacity\", 1)\n\n\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yField)\n                    .attr(\"x\", function() {\n                        if (height<200 && xbar>3) {\n                            return baseX[0]  - radius - 2 * textpadding - 1.5 * textSize\n                        } \n                        else if (height<200 && xbar<3) {\n                            return baseX[0]  - radius - 2 * textpadding - 3 * textSize\n                        } \n       \n                        else if (xbar<3) {\n                            return baseX[0]  - radius - 2 * textpadding - 6 * textSize\n                        } \n\n                        else {\n                            return  baseX[0] - radius - 2 * textpadding - 3.5 * textSize -5\n                        }\n                    })\n                    .attr(\"y\", function() {\n                        if (height<200) {\n                            return height / 3\n                        } else {\n                            return  height / 2\n                        }\n                    })\n                    .attr(\"font-size\", textSize)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"transform\", function() {\n                        if (height<200) {\n                            return `rotate(-90, ${baseX[0]- radius - 2 * textpadding - 1.5 * textSize}, ${height / 3})`\n                        } else if (xbar<3){\n\n                            return `rotate(-90, ${baseX[0]  - radius - 2 * textpadding - 6 * textSize}, ${height / 3})`\n                        }\n                        \n                        else {\n                            return  `rotate(-90, ${baseX[0] - radius - 2 * textpadding - 3.5 * textSize -5}, ${height / 2})`\n                        }\n                    })                    \n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n                }\n            }\n        }\n        // situation 2:\n        else if (!this.x) {\n\n            let margin = {\n                left: width / 20,\n                right: width / 20\n            }\n            let textSize = 15;\n\n            let breakdownField = this.y.field;\n\n            let databreakdown = d3.nest().key(function (d) { return d[breakdownField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            let bar = databreakdown.length;\n\n            databreakdown.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n\n            let breakdownValue = databreakdown.map(d => d['key']);\n            let count = databreakdown.map(d => d['value']);\n\n            let maxCount = d3.max(count);\n            // wradius -> calculated radius based on width\n            // hradius -> calculated radius based on height\n\n            let length = Math.ceil(30 / bar) < 5 ? Math.ceil(30 / bar) : 5\n\n            let wradius = d3.min([width - margin.left - margin.right,0.8*width])/ Math.ceil(maxCount / length) / 2;\n            let hradius = height * 0.8 /bar/(Math.ceil( length)+1)/ 2;\n            \n            // let radius = 0.7*Math.min(wradius, hradius);\n            let radius = Math.min(Math.min(wradius, hradius),6);\n\n            let s=(0.9*height-2*(bar)*length*radius)/(radius)/(bar+3)/2<1?0.2:Math.floor((0.9*height-2*(bar)*length*radius)/(radius)/(bar+3)/2)                 \n            let padding = (0.9* height -bar*length*2*radius-(bar-1)*s*2*radius ) / 2\n            let baseY = d3.range(padding , height-padding-(2*length-1)*radius+1,(height-padding-(2*length-1)*radius-padding)/(bar-1));\n            let rowTotalWidth = d3.min([Math.ceil(maxCount / length) * 2 * radius, width * 0.8])\n            let baseX = (0.9 * width - rowTotalWidth) / 2 + 4 * textSize + radius\n\n            let visibleUnits = this.units.filter(d => d.visible() === \"1\");\n\n\n            let units = [];\n            for (let i = 0; i < bar; i++) {\n                let barUnits = visibleUnits.filter(d => d[breakdownField] === breakdownValue[i]);\n                units.push(barUnits);\n            }\n\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            units.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(breakdownValue[iBar])\n                    .attr(\"x\", baseX - radius - 2 * textSize)\n                    // .attr(\"x\", baseX[iBar] + radius*6)\n                    .attr(\"y\", baseY[iBar] + (length - 3) * radius)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    // .attr(\"transform\", \"translate(\"+baseX[iBar]-radius+length*radius+\",\"+baseY+radius+textSize+\") rotate(-45)\")\n                    .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay)\n                    .duration(this.delay + this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n                bar.forEach((d, i) => {\n                    let col = Math.floor(i / length);\n                    let row = i % length;\n                    d.x(baseX + 2 * radius * col);\n                    d.y(baseY[iBar] + 2 * radius * row);\n                    d.radius(radius);\n                    d.opacity(1);\n                    d.unitgroup('x', breakdownField);\n                })\n\n                svg.select(\".content\").append(\"text\")\n                    .text(breakdownField)\n                    .attr(\"x\", Math.min(baseX - radius - 4 * textSize, width))\n                    .attr(\"y\", height / 2)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"transform\", `rotate(-90, ${Math.min(baseX - radius - 4 * textSize, width)}, ${height / 2})`)\n                    .attr('text-anchor', 'middle')\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            });\n\n        }\n        // situation 3:\n        else if (this.x && this.y && this.size) {\n            let textSize = 15;\n            let sizeField = this.units[0].unitgroup().size;\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.y.field\n\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n\n            let maxR = 0.7*d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n\n            if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else if(width<=200){averageradius = Math.sqrt(nodesmaxcount) / 5; ratio = 1;}\n            else { averageradius = Math.sqrt(nodesmaxcount) / 2; ratio = 1.8; }\n\n\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            rowTotalWidth=2.1*maxR*(column)\n\n            function textSizef(fontSize,fontFamily,text){\n                var span = document.createElement(\"span\");\n                var result = {};\n                result.width = span.offsetWidth;\n                result.height = span.offsetHeight;\n                span.style.visibility = \"hidden\";\n                span.style.fontSize = fontSize;\n                span.style.fontFamily = fontFamily;\n                span.style.display = \"inline-block\";\n                document.body.appendChild(span);\n                if(typeof span.textContent != \"undefined\"){\n                  span.textContent = text;\n                }else{\n                  span.innerText = text;\n                }\n                result.width = parseFloat(window.getComputedStyle(span).width) - result.width;\n                result.height = parseFloat(window.getComputedStyle(span).height) - result.height;\n                return result;\n              }\n\n\n            let strlen = yValueFreq.map(d => textSizef(textSize,'Arial',d['key']).width)\n            let strmax = d3.max(strlen)\n            \n            let Minleftpadding =  2*maxR +2*textSize+textSizef(textSize,'Arial',yField).height+strmax\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column <3){\n                    let paddingMaxR = 2;\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    \n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n                else {\n                    \n                    if (0.9 * width - rowTotalWidth - 2 * Minleftpadding > 0) {\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n                        \n                    }\n                    else if (0.9 * width - rowTotalWidth  - 2 * Minleftpadding <=0) {\n                        let leftpadding = 1*Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n\n                        \n                    }\n                }\n            })\n\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 2) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n\n            simulation.tick(200);\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2 * maxR)\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[0] - 2 * maxR)\n                    .attr(\"y\", centernodey[iBar])\n                    .attr(\"font-size\", textSize * 0.8)\n                    .attr(\"text-anchor\", \"end\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 2 * textSize, height))\n\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(yField)\n                .attr(\"x\", centernodex[0] - 2 * maxR - 3 * textSize)\n                .attr(\"y\", height / 2)\n                .attr(\"font-size\", textSize * 0.9)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize}, ${height / 2})`)\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n            }\n    }\n    }\n\n    //  add color to the unit circle\n    encodeColor() {\n        // situation 1\n        if (this.color) {\n            let svg = this.svg()\n            let colorField = this.color.field;\n            let colorFreqValue = d3.nest().key(function (d) { return d[colorField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let colorValue = colorFreqValue.map(d => d['key']);\n\n            let units = [];\n            for (let i = 0; i < colorFreqValue.length; i++) {\n                let colorUnits = this.units.filter(d => d[colorField] === colorValue[i]);\n                units.push(colorUnits);\n            }\n\n            units.forEach((color, iColor) => {\n\n                color.forEach((d) => {\n                    d.color(Color().CATEGORICAL[iColor % 8]);\n                    d.unitgroup('color', colorField);\n                })\n            })\n        }\n    }\n\n    //  add size to the unit circle\n    encodeSize() {\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        // situation 1\n        if (this.x && this.y && this.size) {\n            let textSize = 15;\n\n            let xField = this.units[0].unitgroup().x;\n            let yField = this.units[0].unitgroup().y;\n            let sizeField = this.size.field\n\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n            let maxR\n            if (row>10){\n                 maxR = 0.5* d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n            }else{\n                maxR = 0.7* d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n                \n            }\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n            if (row > 10) { averageradius = Math.sqrt(nodesmaxcount) / 5; ratio = 1.3; }\n            else if (height<200 & column>10) { \n                averageradius = Math.sqrt(nodesmaxcount) / 8; ratio = 0.3; }\n            else if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else if(height<200){\n                averageradius = Math.sqrt(nodesmaxcount) / 6; ratio = 0.6;}\n            // else if (column <4){averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1;}\n            else { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            rowTotalWidth=2.1*maxR*(column)\n\n            function textSizef(fontSize,fontFamily,text){\n                var span = document.createElement(\"span\");\n                var result = {};\n                result.width = span.offsetWidth;\n                result.height = span.offsetHeight;\n                span.style.visibility = \"hidden\";\n                span.style.fontSize = fontSize;\n                span.style.fontFamily = fontFamily;\n                span.style.display = \"inline-block\";\n                document.body.appendChild(span);\n                if(typeof span.textContent != \"undefined\"){\n                  span.textContent = text;\n                }else{\n                  span.innerText = text;\n                }\n                result.width = parseFloat(window.getComputedStyle(span).width) - result.width;\n                result.height = parseFloat(window.getComputedStyle(span).height) - result.height;\n                return result;\n              }\n\n\n            let strlen = yValueFreq.map(d => textSizef(textSize,'Arial',d['key']).width)\n            let strmax = d3.max(strlen)\n            \n            let Minleftpadding =  2*maxR +2*textSize+textSizef(textSize,'Arial',yField).height+strmax\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n            \n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column <3){\n                    let paddingMaxR = 2;\n                    if (height<200){\n                        paddingMaxR = -1.8\n                    }\n\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    \n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n                else {\n                    if(height<200 & row >10){\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return 0.5*leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * 2.5*(Math.floor(i % column))\n                    }\n                    else if(height<200 & column >10){\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return 0.15*leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * 1.8*(Math.floor(i % column))\n                    }\n                    else if (0.9 * width - rowTotalWidth - 2 * Minleftpadding > 0) {\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n                    }\n                    else if (0.9 * width - rowTotalWidth  - 2 * Minleftpadding <=0) {\n                        let leftpadding = 1*Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n  \n                    }\n                }\n            })\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 10 & height<200) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.6])\n                    let topPadding = (0.5 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return 0.35*topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * 1.1*(i);\n                }\n                else if (column > 10 & height<200) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.6])\n                    let topPadding = (0.5 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return 0.4*topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * 1.1*(i);\n                }\n\n                else if (row > 10) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.6])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else if (row > 3) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else if (row < 3) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    console.log('am herer')\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n\n            simulation.tick(200);\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2.2 * maxR)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[0] - 2 * maxR)\n                    .attr(\"y\", centernodey[iBar])\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"end\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", function() {\n                    if (height<200) {\n                        return centernodey[centernodey.length - 1] +  2 * maxR + 0.5*textSize\n                    }\n                    else{\n                        return  Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 2 * textSize + 5, height)\n                    }\n                })\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n\n            svg.select(\".content\").append(\"text\")\n                .text(yField)\n                .attr(\"x\", function() {\n                    if (height<200) {\n                        return centernodex[0] - 2 * maxR - 1.5 * textSize \n                    } \n                    else if (column<3) {\n                        return centernodex[0] - 2 * maxR - 5 * textSize \n                    }         \n                    else {\n                        return  centernodex[0] - 2 * maxR - 3 * textSize -5\n                    }\n                })\n                .attr(\"y\", function() {\n                    if (height<200) {\n                        return height / 3\n                    } else {\n                        return  height / 2\n                    }\n                })\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", function() {\n                    if (height<200) {\n                        return `rotate(-90, ${centernodex[0] - 2 * maxR - 1.5 * textSize}, ${height / 3})`\n                    } \n                    else if (column<3) {\n                        return `rotate(-90, ${centernodex[0] - 2 * maxR - 5 * textSize}, ${height / 2})`\n                    } \n                    \n                    else {\n                        return  `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize - 5}, ${height / 2})`\n                    }\n                })                    \n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n            }\n            \n    }\n        // situation 2\n        else if (this.x && this.size) {\n            let xField = this.units[0].unitgroup().x;\n\n            let sizeField = this.size.field;\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            let xValue = xValueFreq.map(d => d['key']);\n\n            let categories = xValueFreq\n\n            let row = 1\n            let column = xValueFreq.length\n\n            let maxR = 0.7*d3.min([(0.8 * height - 20)/ (row + 1) / 2, (0.8 * width - 20)/ (column + 1) / 2])\n            if(height<200){\n                maxR = 0.3*maxR\n            }\n\n            let nodesmaxcount = d3.max(xValueFreq, function (d) { return d.value; })\n\n            //  \n            let averageradius;\n            if (column > 10)\n                averageradius = Math.sqrt(nodesmaxcount) / 4;\n            else if (column > 4)\n            averageradius = Math.sqrt(nodesmaxcount) / 3;\n            else\n                averageradius = Math.sqrt(nodesmaxcount) / 2;\n\n            let ratio = (height<=200)?1:1.8;\n\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n\n            let rowTotalWidth;\n            if (categories.length % 2 === 0) {\n                rowTotalWidth = 2.5 * maxR * column;//2.4\n            } else {\n                rowTotalWidth = 2.5 * maxR * (column + 1);\n            }\n\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.9])\n\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column <3){\n                    let paddingMaxR = 2;\n                    if (height<200){\n                        paddingMaxR = -2\n                    }\n                    console.log(paddingMaxR)\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    \n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n\n                else {\n                    rowTotalWidth = rowTotalWidth < width? width:rowTotalWidth\n                    // rowTotalWidth = d3.min([rowTotalWidth, width])\n                    let paddingMaxR = 3.3;                    \n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n            })\n            \n            let centernodey\n            if(height<=200){\n                centernodey = xValueFreq.map(function (d, i) {\n                   return 70;\n                })\n            }\n            else{\n            centernodey = xValueFreq.map(function (d, i) {\n                let startPoint = ((height - 3.6 * maxR - 5 * radiusa) / (row - 1) <= 3 * maxR ? 1.8 * maxR : (height - 3 * maxR * (row - 1) - 5 * radiusa) / 1.4);\n                return startPoint + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (Math.floor(i / column));\n            })}\n\n\n            let unitnew = [];\n            let nodesvalue1 = [];\n\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: xValue.indexOf(d[xField]),\n                    radius: 0,\n                    value: d[sizeField]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n            simulation.tick(200);\n\n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    this.units[f.id].x(f.x);\n                    this.units[f.id].y(f.y);\n                    this.units[f.id].visible(\"1\")\n                    this.units[index].radius(f.radius)\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n            \n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\").append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[0] + 2 * radiusa + 1 * maxR)\n                    .attr(\"y\", (width<=200)? centernodey[0]+20 :centernodey[0] + 2 * radiusa + 1 * maxR)\n                    .attr(\"font-size\", 14)\n                    .attr(\"text-anchor\", \"middle\")\n                    // .attr(\"rotate\", 45)\n                    // .attr(\"transform\", (width<=200)?`rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`:\"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    // .attr(\"transform\", `rotate(-45, ${centernodex[iBar] - radius + length * radius}, ${centernodey + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", (width<=200)? centernodey[0]+30 :Math.min(centernodey[0] + 2 * radiusa + 2 * maxR, height))\n                // .attr(\"y\", Math.min(centernodey[0] + 2 * radiusa + 2 * maxR, height))\n                .attr(\"font-size\", 14)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n        }\n    }\n        // situation 3\n        else {\n            let units = this.units.filter(d => d.visible() === \"1\");\n            let sizeField = this.size.field\n\n            let allcenter = {\n                xcenter: width / 2,\n                ycenter: height / 2\n            };\n\n            // circle size and position calculation\n            let nodesradius = [];\n            let nodesvalue1 = [];\n\n            nodesradius = units.map((d, i) => {\n                nodesvalue1[i] = d[sizeField];\n                return {\n                    id: d.id(),\n                    radius: d.radius(),\n                    value: d[sizeField]\n                }\n            });\n\n            let focusextent1 = d3.extent(units, d => d[sizeField]);\n            let nodesScale = d3.scaleLinear()\n                .domain([focusextent1[0], focusextent1[1]])\n                // .range([height / 300 * height / 300, height / 30 * height / 30])\n                .range(units.length > 800 ?\n                    [height / 500 * height / 800, height / 50 * height / 80]\n                    //  : [height / 300 * height / 300, height / 30 * height / 30]);\n                    : [height / 500 * height / 500, height / 50 * height / 50]);\n\n\n            for (let index in nodesradius) {\n                nodesradius[index].radius = Math.sqrt(nodesScale(nodesradius[index].value));\n            }\n\n            let simulation = d3.forceSimulation(nodesradius)\n                .force('charge', d3.forceManyBody().strength(1))\n                .force('center', d3.forceCenter(allcenter.xcenter, allcenter.ycenter))\n                .force(\"collide\", d3.forceCollide().radius((d, i) => d.radius + 0.5).iterations(2))\n\n            simulation.tick(nodesvalue1.length > 800 ? 100 : 200);\n\n\n            for (let index in units) {\n                let f = nodesradius.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    units[f.id].x(f.x);\n                    units[f.id].y(f.y);\n                    units[f.id].visible(\"1\")\n                    units[f.id].radius(f.radius)\n                    units[f.id].unitgroup('size',sizeField)\n\n                }\n                else {\n                    units[index].visible(\"0\")\n                }\n\n                units[index].opacity(\"1\")\n            }\n\n        }\n\n    }\n\n\n    encodeShape() {\n\n    }\n\n    // allocating the encoding actions based on spec and then update the chart.\n    addEncoding(channel, field, style) {\n        if (!this[channel]) {\n            this[channel] = field;\n            this.delay = style.delay\n            this.duration = style.duration\n            let changesize = false;\n            let changecolor = false;\n            let changelayout = false;\n\n            switch (channel) {\n                case 'x':\n                    this.encodeX();\n                    changelayout = true\n                    break;\n                case 'y':\n                    this.encodeY();\n                    changelayout = true\n                    break;\n                case 'size':\n                    this.encodeSize();\n                    changelayout = true\n                    changesize = true\n                    break;\n                case 'color':\n                    this.encodeColor();\n                    changecolor = true\n                    break;\n                default:\n                    console.log('no channel select')\n            }\n\n            if (changecolor) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change color\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"fill\", d => d.color());\n            }\n\n            if (changesize) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change size\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"r\", d => d.radius());\n            }\n\n            if (changelayout) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change layout\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"cx\", d => d.x())\n                    .attr(\"cy\", d => d.y())\n                    .attr(\"r\", d => d.radius())\n                    // .style(\"opacity\", d => d.opacity());\n            }\n\n\n\n\n        }\n\n    }\n\n    // modify existing encoding action and update the chart\n    modifyEncoding(channel, field, style) {\n        if (this[channel]) {\n            this[channel] = field;\n            this.delay = style.delay\n            this.duration = style.duration\n            let changesize = false;\n            let changecolor = false;\n            let changelayout = false;\n\n            switch (channel) {\n                case 'x':\n                    this.encodeX();\n                    changelayout = true\n                    break;\n                case 'y':\n                    this.encodeY();\n                    changelayout = true\n                    break;\n                case 'size':\n                    this.encodeSize();\n                    changelayout = true\n                    changesize = true\n                    break;\n                case 'color':\n                    this.encodeColor();\n                    changecolor = true\n                    break;\n                default:\n                    console.log('no channel select')\n            }\n\n            if (changecolor) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change color\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"fill\", d => d.color());\n            }\n\n            if (changesize) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change size\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"r\", d => d.radius());\n            }\n\n            if (changelayout) {\n                this.svg().select(\".content\")\n                    .selectAll(\"circle\")\n                    .transition(\"change layout\")\n                    .delay(this.delay)\n                    .duration(this.duration)\n                    .attr(\"cx\", d => d.x())\n                    .attr(\"cy\", d => d.y())\n                    .attr(\"r\", d => d.radius())\n                    // .style(\"opacity\", d => d.opacity());\n            }\n\n        }\n    }\n\n    // remove existing encoding action and update the chart\n    removeEncoding(channel,style) {\n        this[channel] = null;\n        this.delay = style.delay\n        this.duration = style.duration\n\n        let changesize = false;\n        let changecolor = false;\n        let changelayout = false;\n\n        if (this.x) { this.encodeX(); changelayout = true }\n\n        if (this.y) { this.encodeY(); changelayout = true }\n\n        if (this.size) { this.encodeSize(); changesize = true }\n\n        if (this.color) { this.encodeColor(); changecolor = true }\n        \n        if (changecolor) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change color\")\n                .delay(this.delay)\n                .duration(this.duration)\n                .attr(\"fill\", d => d.color());\n        }\n\n        if (changesize) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change size\")\n                .delay(this.delay)\n                .duration(this.duration)\n                .attr(\"r\", d => d.radius());\n        }\n\n        if (changelayout) {\n            this.svg().select(\".content\")\n                .selectAll(\"circle\")\n                .transition(\"change layout\")\n                .delay(this.delay)\n                .duration(this.duration)\n                .attr(\"cx\", d => d.x())\n                .attr(\"cy\", d => d.y())\n                .attr(\"r\", d => d.radius())\n                // .style(\"opacity\", d => d.opacity());\n        }\n\n    }\n\n    // unitvis only, aggregate many unit circle into one circle\n    addAggregation(field, operator,style) {\n        //  min max average sum\n        let svg = this.svg();\n        let width = this.width(),\n            height = this.height();\n        this.delay = style.delay\n        this.duration = style.duration\n    \n        let sizeField = this.size.field\n        let xField = this.units[0].unitgroup().x;\n        let yField = this.units[0].unitgroup().y;\n\n        let aggregated\n        let aggregatedunit\n        let xy_aggregared\n\n        \n        switch (operator) {\n            case 'min':\n                aggregated = d3.nest().key(function (d) {return d[xField]}).rollup(function (v) { return d3.min(v, function(d){return d[sizeField]} ); }).entries(this.units.filter(d => d.opacity() === \"1\"))\n                if(style.aggregated_point)\n                    aggregatedunit = this.units.filter(d => d[style.aggregated_point[\"field\"]] === style.aggregated_point[\"value\"])\n                else\n                    aggregatedunit = this.units.filter(d => d.opacity() === \"1\" && d[sizeField] === Math.min.apply(Math, this.units.map(function(o) {return o[sizeField]})))     \n                break;\n            case 'max':\n                aggregated = d3.nest().key(function (d) {return d[xField]}).rollup(function (v) { return d3.max(v, function(d){return d[sizeField]} ); }).entries(this.units.filter(d => d.opacity() === \"1\"))\n                if(style.aggregated_point)\n                    aggregatedunit = this.units.filter(d => d[style.aggregated_point[\"field\"]] === style.aggregated_point[\"value\"])\n                else\n                    aggregatedunit = this.units.filter(d => d.opacity() === \"1\" && d[sizeField] === Math.max.apply(Math, this.units.map(function(o) {return o[sizeField]})))                     \n                break;\n            case 'average':\n                if (xField && yField){\n                    xy_aggregared = d3.nest()\n                                        .key(function(d) { return d[xField]})\n                                        .key(function(d) { return d[yField]})\n                                        .rollup(function(v) {return d3.mean(v, function(d) { return d[sizeField]; }); })\n                                        .object(this.units.filter(d => d.opacity() === \"1\"))\n                    \n                }else{\n                aggregated = d3.nest().key(function (d) {return d[xField]}).rollup(function (v) { return d3.mean(v, function(d){return d[sizeField]} ); }).entries(this.units.filter(d => d.opacity() === \"1\"))\n                }\n                break;\n            case 'sum':\n                if (xField && yField){\n                    xy_aggregared = d3.nest()\n                                        .key(function(d) { return d[xField]})\n                                        .key(function(d) { return d[yField]})\n                                        .rollup(function(v) {return d3.sum(v, function(d) { return d[sizeField]; }); })\n                                        .object(this.units.filter(d => d.opacity() === \"1\"))\n                    \n                }else{\n                aggregated = d3.nest().key(function (d) {return d[xField]}).rollup(function (v) { return d3.sum(v, function(d){return d[sizeField]} ); }).entries(this.units.filter(d => d.opacity() === \"1\"))\n                }\n                break;\n            default:\n                console.log('no channel select')}\n    \n    \n        // situation 1\n        if (this.x && this.y && this.size) {\n            let textSize = 15;\n\n            let yField = this.units[0].unitgroup().y;\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.units.filter(d => d.opacity() === \"1\"))\n            let yValueFreq = d3.nest().key(function (d) { return d[yField] }).rollup(function (v) { return v.length; }).entries(this.units.filter(d => d.opacity() === \"1\"))\n            \n    \n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            yValueFreq.sort(function (x, y) {\n                return d3.descending(x['key'], y['key']);\n            })\n\n\n            let num_of_x = xValueFreq.length;\n            let num_of_y = yValueFreq.length;\n\n            let column = num_of_x\n            let row = num_of_y\n\n\n            let maxR = 0.7*d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            xValueFreq.forEach(d => {\n                d.values.sort(function (x, y) {\n                    return d3.descending(x['key'], y['key'])\n                })\n            });\n\n            let nodesmaxcount = 0\n\n            for (let i = 0; i < num_of_x; i++) {\n                let MaxNodeinEach = d3.max(xValueFreq[i].values, function (j) { return j.value; })\n                nodesmaxcount = Math.max(nodesmaxcount, MaxNodeinEach)\n            }\n\n            let averageradius;\n            let ratio\n            if (column > 4) { averageradius = Math.sqrt(nodesmaxcount) / 3; ratio = 1.5; }\n            else if(width<=200){averageradius = Math.sqrt(nodesmaxcount) / 5; ratio = 1;}\n            else { averageradius = Math.sqrt(nodesmaxcount) / 2; ratio = 1.8; }\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n            let rowTotalWidth;\n\n            rowTotalWidth=2.1*maxR*(column)\n\n            function textSizef(fontSize,fontFamily,text){\n                var span = document.createElement(\"span\");\n                var result = {};\n                result.width = span.offsetWidth;\n                result.height = span.offsetHeight;\n                span.style.visibility = \"hidden\";\n                span.style.fontSize = fontSize;\n                span.style.fontFamily = fontFamily;\n                span.style.display = \"inline-block\";\n                document.body.appendChild(span);\n                if(typeof span.textContent != \"undefined\"){\n                    span.textContent = text;\n                }else{\n                    span.innerText = text;\n                }\n                result.width = parseFloat(window.getComputedStyle(span).width) - result.width;\n                result.height = parseFloat(window.getComputedStyle(span).height) - result.height;\n                return result;\n                }\n\n\n            let strlen = yValueFreq.map(d => textSizef(textSize,'Arial',d['key']).width)\n            let strmax = d3.max(strlen)\n            \n            let Minleftpadding =  2*maxR +2*textSize+textSizef(textSize,'Arial',yField).height+strmax\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.8])\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column <3){\n                    let paddingMaxR = 1;\n                    // if (height<200){\n                    //     paddingMaxR = -4\n                    // }\n\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    \n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n                else {\n                    \n                    if (0.9 * width - rowTotalWidth - 2 * Minleftpadding > 0) {\n                        let rowTotalWidth1=0.9 * width - 2 * Minleftpadding \n                        let leftpadding = (1 * width - rowTotalWidth1  - 2 * Minleftpadding) / 2 + Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n                        \n                    }\n                    else if (0.9 * width - rowTotalWidth  - 2 * Minleftpadding <=0) {\n                        let leftpadding = 1*Minleftpadding\n                        let rightpadding=(column<=6)?0.5* leftpadding:d3.min([2*maxR,0.5*leftpadding+maxR])\n                        return leftpadding + (0.9*width-leftpadding -rightpadding) / (column - 1) * (Math.floor(i % column))\n\n                        \n                    }\n                }\n            })\n            let columnTotalHeight;\n            if (row % 2 === 0) {\n                columnTotalHeight = 2 * maxR * row;//2.4\n            } else {\n                columnTotalHeight = 2 * maxR * (row + 1);\n            }\n\n\n            let centernodey = yValueFreq.map(function (d, i) {\n                if (row > 3) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else if (row < 3) {\n                    columnTotalHeight = d3.min([columnTotalHeight, height * 0.8])\n                    let topPadding = (0.6 * height - columnTotalHeight) / 2 + 2 * maxR;\n                    return topPadding + d3.min([(height - 6 * maxR) / (row - 1), 4 * maxR]) * (i);\n                }\n                else {\n                    let topPadding = ((height - 3.6 * maxR) / (row - 1) <= 3 * maxR ? 3 * maxR : (height - 3 * maxR * (row - 1)) / 1.4);\n                    return topPadding + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (i);\n                }\n            })\n            let unitnew = [];\n            let nodesvalue1 = [];\n            let xValue = xValueFreq.map(d => d['key']);\n            let yValue = yValueFreq.map(d => d['key']);\n\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: [xValue.indexOf(d[xField]), yValue.indexOf(d[yField])],\n                    radius: 0,\n                    value: xy_aggregared[d[xField]][d[yField]],\n                    color: Color().CATEGORICAL[yValue.indexOf(d[yField]) % 8]\n                }\n            })\n            \n            let yScale = d3.scaleLinear()\n            .range([\n                centernodey[centernodey.length - 1] + 1.8 * maxR, \n                height<200?10:80])\n            .domain([0, 1.1* d3.max(unitnew, d => d.value)])\n            .nice();\n\n\n\n            let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category[0]]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category[1]];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.3))\n                .stop()\n\n            \n            \n\n            simulation.tick(200);\n            for (let index in this.units) {\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    if(aggregatedunit){\n                        this.units[f.id].x(aggregatedunit[0].x());\n                        this.units[f.id].y(aggregatedunit[0].y());\n                        this.units[index].radius(aggregatedunit[0].radius())    \n                    }\n                    else {\n                        this.units[f.id].x(centernodex[f.category[0]]);\n                        this.units[f.id].y(yScale(f.value));\n                        // this.units[f.id].y(centernodey[f.category[1]]);\n                        this.units[index].radius(f.radius*2);\n                    }\n                    this.units[f.id].visible(\"1\")\n                    this.units[f.id].color(f.color)\n                    this.units[f.id].unitgroup('size',sizeField)\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            svg.select(\".content\")\n            .append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .attr(\"transform\", `translate(${centernodex[0] - 1.2*maxR}, ${0})`)\n            .transition()\n            .delay(this.delay + this.duration/2)\n            .call(axisY)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", centernodey[centernodey.length - 1] + 2 * maxR)\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n\n            })\n\n            \n            let rectsize = height<200? 4: 15\n            yValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\")\n                    .append(\"text\")\n                    .text(yValue[iBar])\n                    .attr(\"x\", centernodex[centernodex.length-1] + 1.5 * maxR)\n                    .attr(\"y\", d3.min(this.units, d => d.y()) - rectsize*(iBar+0.6) )\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"start\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n                svg.select(\".content\")\n                    .append(\"rect\")\n                    .attr(\"x\", centernodex[centernodex.length-1] + 1.5 * maxR -rectsize)\n                    .attr(\"y\", d3.min(this.units, d => d.y()) - rectsize*(iBar+1.5))\n                    .attr(\"height\", rectsize)\n                    .attr(\"width\", rectsize)\n                    .style(\"fill\", Color().CATEGORICAL[iBar % 8])\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", function() {\n                    if (height<200) {\n                        return centernodey[centernodey.length - 1] +  2 * maxR + 0.5*textSize\n                    }\n                    else{\n                        return  Math.min(centernodey[centernodey.length - 1] + 2 * maxR + 2 * textSize + 5, height)\n                    }\n                })\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n            \n            svg.select(\".content\").append(\"text\")\n                .text(sizeField + ` (${operator}) `)\n                .attr(\"x\", function() {\n                    if (height<200) {\n                        return centernodex[0] - 2 * maxR - 1.5 * textSize \n                    } \n                    else if (column<3) {\n                        return centernodex[0] -  1.5 * maxR - 1.5 * textSize\n                    }         \n                    else {\n                        return  centernodex[0] - 2 * maxR - 3 * textSize -5\n                    }\n                })\n                .attr(\"y\", function() {\n                    if (height<200) {\n                        return height / 3\n                    } else {\n                        return  height / 2\n                    }\n                })\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", function() {\n                    if (height<200) {\n                        return `rotate(-90, ${centernodex[0] - 2 * maxR - 1.5 * textSize}, ${height / 3})`\n                    } \n                    else if (column<3) {\n                        return `rotate(-90, ${centernodex[0] -  1.5 * maxR - 1.5 * textSize}, ${height / 2})`\n                    } \n                    \n                    else {\n                        return  `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize - 5}, ${height / 2})`\n                    }\n                })                    \n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n        }}\n        // situation 2\n        else if (this.x && this.size) {\n\n            let textSize = 15;\n            if(height<200){\n                textSize = 14\n            }    \n\n\n            let xValueFreq = d3.nest().key(function (d) { return d[xField] }).rollup(function (v) { return v.length; }).entries(this.processedData())\n\n\n            xValueFreq.sort(function (x, y) {\n                return d3.ascending(x['key'], y['key']);\n            })\n\n            let xValue = xValueFreq.map(d => d['key']);\n\n            let categories = xValueFreq\n\n            let row = 1\n            let column = xValueFreq.length\n\n            let maxR = 0.7*d3.min([0.8 * height / (row + 1) / 2, 0.8 * width / (column + 1) / 2])\n\n\n            let nodesmaxcount = d3.max(xValueFreq, function (d) { return d.value; })\n\n\n            let averageradius;\n            if (column > 4)\n                averageradius = Math.sqrt(nodesmaxcount) / 3;\n            else\n                averageradius = Math.sqrt(nodesmaxcount) / 2;\n\n            let ratio = (width<=200)?1:1.8;\n            let radiusa = maxR / Math.sqrt(averageradius) * ratio;\n\n            let rowTotalWidth;\n            if (categories.length % 2 === 0) {\n                rowTotalWidth = 2.5 * maxR * column;//2.4\n            } else {\n                rowTotalWidth = 2.5 * maxR * (column + 1);\n            }\n\n            rowTotalWidth = d3.min([rowTotalWidth, width * 0.9])\n\n\n            let centernodex = xValueFreq.map(function (d, i) {\n                if (column === 1) {\n                    if (xValueFreq.length === 2) {//\n                        return i === 0 ? radiusa : 3.1 * maxR + radiusa\n                    }\n                    return (width - radiusa) / 2\n                }\n                else if (column <3){\n                    let paddingMaxR = 2;\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    \n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n                else {\n                    rowTotalWidth = rowTotalWidth < width? width:rowTotalWidth\n                    // rowTotalWidth = d3.min([rowTotalWidth, width])\n                    let paddingMaxR = 3.3;\n                    let leftPadding = (width - (rowTotalWidth - paddingMaxR * maxR)) / 2;\n                    return leftPadding + (rowTotalWidth - paddingMaxR * maxR) / (column - 1) * (Math.floor(i % column));\n                }\n            })\n\n\n            let centernodey\n            if(width<=200){\n                centernodey = xValueFreq.map(function (d, i) {\n                   return 70;\n                })\n            }\n            else{\n            centernodey = xValueFreq.map(function (d, i) {\n                let startPoint = ((height - 3.6 * maxR - 5 * radiusa) / (row - 1) <= 3 * maxR ? 1.8 * maxR : (height - 3 * maxR * (row - 1) - 5 * radiusa) / 1.4);\n                return 1.1*startPoint + d3.min([(height - 3.6 * maxR) / (row - 1), 3 * maxR]) * (Math.floor(i / column));\n            })}\n\n            console.log('centernodey', centernodey)\n\n\n\n            let unitnew = [];\n            let nodesvalue1 = [];\n\n            let aggregateValue = aggregated.map(d => d['value'])\n            unitnew = this.units.map(function (d, i) {\n                nodesvalue1[i] = d[sizeField]\n                return {\n                    id: d.id(),\n                    distribution: d[xField],\n                    category: xValue.indexOf(d[xField]),\n                    radius: 0,\n                    value: aggregateValue[aggregated.map(d => d['key']).indexOf(d[xField])]\n                }\n            })\n\n            let unitExtent = d3.extent(this.units, d => d[sizeField]); //d3.extent(focusextent1.concat(focusextent2))\n            let size = d3.scaleLinear()\n                .domain([unitExtent[0], unitExtent[1]])\n                .range([radiusa / 100, radiusa]);\n\n            for (let index in unitnew) {\n                unitnew[index].radius = Math.sqrt(size(unitnew[index].value))\n            }\n\n\n            let yScale = d3.scaleLinear()\n            .range([\n                (centernodey[0] + 2 * radiusa + 0.8 * maxR), \n                30])\n            .domain([0, 1.1* d3.max(aggregateValue)])\n            .nice();\n\n            let axisY = d3.axisLeft(yScale)\n            .ticks(5)\n            .tickPadding(5)\n            .tickFormat(function (d) {\n                if ((d / 1000000) >= 1) {\n                    d = d / 1000000 + \"M\";\n                } else if ((d / 1000) >= 1) {\n                    d = d / 1000 + \"K\";\n                }\n                return d;\n            });\n            \n            let simulation = d3.forceSimulation(unitnew)\n                .force('charge', d3.forceManyBody().strength(0.01))\n                .force('x', d3.forceX().x(function (d) {\n                    return centernodex[d.category]\n                }))\n                .force('y', d3.forceY().y(function (d) {\n                    return centernodey[d.category];\n                }))\n                .force('collision', d3.forceCollide().strength(1).radius(d => d.radius + 0.15))\n                .stop()\n\n            simulation.tick(200);\n            \n            for (let index in this.units) {\n\n                let f = unitnew.find(item => item.id == index) //eslint-disable-line\n                if (f) {\n                    if(aggregatedunit){\n                        this.units[f.id].x(aggregatedunit[0].x());\n                        this.units[f.id].y(aggregatedunit[0].y());\n                        this.units[index].radius(aggregatedunit[0].radius())    \n                    }\n                    else{\n                        this.units[f.id].x(centernodex[f.category]);\n                        this.units[f.id].y(yScale(f.value));\n                        // this.units[f.id].y(centernodey[f.category]);\n                        this.units[f.id].visible(\"1\")\n                        this.units[index].radius(f.radius * 2)\n                        this.units[f.id].color(f.color)\n                        this.units[f.id].unitgroup('size',sizeField)\n                    }\n\n                }\n                else {\n                    this.units[index].visible(\"0\")\n                }\n\n                this.units[index].opacity(\"1\")\n            }\n            \n            // setTimeout(()=>{svg.select(\".content\").selectAll(\"text\").remove()},5000);\n            svg.select(\".content\").selectAll(\"text\")\n            .transition()\n            .delay(this.delay)\n            .duration(this.duration/2)\n            .attr(\"fill-opacity\", 0)\n\n            svg.select(\".content\")\n            .append(\"g\")\n            .attr(\"class\", \"axis_y\")\n            .attr(\"transform\", `translate(${centernodex[0] - 1.2*maxR}, ${centernodey[0] - yScale(d3.min(this.units, d => d.y()))})`)\n            .transition()\n            .delay(this.delay + this.duration/2)\n            .call(axisY)\n\n            xValueFreq.forEach((bar, iBar) => {\n                svg.select(\".content\").append(\"text\")\n                    .text(xValue[iBar])\n                    .attr(\"x\", centernodex[iBar])\n                    .attr(\"y\", Math.min(centernodey[0] + 2 * radiusa + 1.5 * maxR, 0.8*height))\n                    .attr(\"font-size\", textSize)\n                    .attr(\"text-anchor\", \"middle\")\n                    // .attr(\"transform\", \"translate(\" + centernodex[iBar] + \",\" + centernodey + \") rotate(-45)\")\n                    // .attr(\"transform\", `rotate(-45, ${baseX[iBar] - radius + length * radius}, ${baseY + radius + textSize})`)\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .delay(this.delay + this.duration/2)\n                    .duration(this.duration/2)\n                    .attr(\"fill-opacity\", 1)\n            })\n\n            if (height>200){\n            svg.select(\".content\").append(\"text\")\n                .text(xField)\n                .attr(\"x\", width / 2)\n                .attr(\"y\", Math.min(centernodey[0] + 2 * radiusa + 3 * maxR, 0.9*height))\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n                svg.select(\".content\").append(\"text\")\n                .text(sizeField + ` (${operator}) `)\n                .attr(\"x\", function() {\n                    if (height<200) {\n                        return centernodex[0] - 2 * maxR - 1.5 * textSize \n                    } \n                    else if (column<3) {\n                        return centernodex[0] -  1.5 * maxR - 1.5 * textSize\n                    }         \n                    else {\n                        return  centernodex[0] - 2 * maxR - 3 * textSize -5\n                    }\n                })\n                .attr(\"y\", function() {\n                    if (height<200) {\n                        return height / 3\n                    } else {\n                        return  height / 3\n                    }\n                })\n                .attr(\"font-size\", textSize)\n                .attr('text-anchor', 'middle')\n                .attr(\"transform\", function() {\n                    if (height<200) {\n                        return `rotate(-90, ${centernodex[0] - 2 * maxR - 1.5 * textSize}, ${height / 3})`\n                    } \n                    else if (column<3) {\n                        return `rotate(-90, ${centernodex[0] -  1.5 * maxR - 1.5 * textSize}, ${height / 3})`\n                    } \n                    \n                    else {\n                        return  `rotate(-90, ${centernodex[0] - 2 * maxR - 3 * textSize - 5}, ${height / 3})`\n                    }\n                })                    \n                .attr(\"fill-opacity\", 0)\n                .transition()\n                .delay(this.delay + this.duration/2)\n                .duration(this.duration/2)\n                .attr(\"fill-opacity\", 1)\n\n\n\n        }\n    }\n        \n\n        this.svg().select(\".content\")\n            .selectAll(\"circle\")\n            .transition(\"change layout\")\n            .delay(this.delay)\n            .duration(this.duration)\n            .attr(\"cx\", d => d.x())\n            .attr(\"cy\", d => d.y())\n            .attr(\"r\", d => d.radius())\n            .attr(\"fill\", d => d.color());\n            // .style(\"opacity\", d => d.opacity());\n    }\n\n\n}\n\nexport default Unitvis;","import MarkType from '../visualization/marktype';\nimport Action from './action';\nimport { BarChart, LineChart, Scatterplot, Unitvis } from '../charts';\n\nclass AddChart extends Action {\n    constructor(spec) {\n        super(spec);\n        this._mark = spec.mark;\n    }\n\n    operate(vis) {\n        \n        vis._mark = this._mark;\n        let factdata = vis.factdata();\n        let fact = vis.fact();\n        vis.chart(this._mark2chart(this._mark));\n        // let chart = this._type2chart(spec.type);\n        let chart = vis.chart();\n        chart.height(vis._height);\n        chart.width(vis._width);\n        chart.data(vis._data);\n        chart.factdata(factdata);\n        chart.processedData(vis._processedData)\n        chart.subspace(fact.subspace);\n        chart.measure(fact.measure);\n        chart.breakdown(fact.breakdown);\n        chart.focus(fact.focus);\n        chart.container(vis._container);\n        chart.visualize();\n    }\n\n    _mark2chart(type) {\n        switch (type) {\n            case MarkType.POINT:\n                return new Scatterplot();\n            case MarkType.BAR:\n                return new BarChart();\n            case MarkType.LINE:\n                return new LineChart();\n            case MarkType.UNIT:\n                return new Unitvis();\n            default:\n                return new Scatterplot();\n        }\n    }\n}\n\nexport default AddChart;","export default {\n    ARROW: 'arrow',\n    COLOREDAREA: 'coloredarea',\n    CIRCLE: 'circle',\n    CONTOUR: 'contour',\n    DESATURATE: 'desaturate',\n    DISTRIBUTION: 'distribution',\n    FADE: 'fade',\n    FILL: 'fill',\n    GLOW: 'glow',\n    HIDE: 'hide',\n    LABEL: 'label',\n    REFERENCE: 'reference',\n    REGRESSION: 'regression',\n    SEPARATE: 'separate',\n    SHOW: 'show',\n    SYMBOL: 'symbol',\n    TEXTURE: 'texture',\n    TIP: 'tip',\n    TOOLTIP : 'tooltip'\n}","class Annotator {\n\n    annotate(chart, target, style) {}\n\n}\n\nexport default Annotator","import Annotator from './annotator'\nimport Color from '../../visualization/color';\nimport * as d3 from 'd3';\n\n\nclass Arrow extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        // if the focus defined in the spec does not exist\n        if (focus_elements.empty()) {\n            return;\n        }\n\n        const arrow_points = [\n            [0, 0],\n            [20, 5],\n            [15, 10],\n            [25, 20],\n            [20, 25],\n            [10, 15],\n            [5, 20],\n            [0, 0]\n        ];\n\n        setTimeout(() => {\n\n            focus_elements.nodes().forEach((one_element) => {\n                // identify the position\n                let data_x, data_y, offset;\n                const nodeName = one_element.nodeName;\n                if (nodeName === \"circle\") { // get center \n                    data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                    data_y = parseFloat(one_element.getAttribute(\"cy\"));\n                    offset = parseFloat(one_element.getAttribute(\"r\")) / 1.414; // 2 ~ 1.414\n                } else if (nodeName === \"rect\") {\n                    offset = parseFloat(one_element.getAttribute(\"width\")) / 2;\n                    data_x = parseFloat(one_element.getAttribute(\"x\")) + offset;\n                    data_y = parseFloat(one_element.getAttribute(\"y\"));\n                } else { // currently not support\n                    return;\n                }\n\n                // move the arrow to the data point\n                const new_arrow_points = arrow_points.map((point) => [data_x + offset + point[0], data_y + offset + point[1]]);\n\n                // draw arrow\n                svg.append(\"path\")\n                    .attr(\"class\", \"arrow\")\n                    .transition()\n                    // .delay(style.delay)\n                    .duration(style.duration)\n                    .attr(\"d\", d3.line()(new_arrow_points))\n                    .attr(\"fill\", () => {\n                        if (\"color\" in style) {\n                            return style[\"color\"];\n                        } else {\n                            return Color().ANNOTATION;\n                        }\n                    });\n        })\n        }, style.delay)\n\n\n    }\n}\n\nexport default Arrow","import * as d3 from 'd3';\nimport Annotator from './annotator'\nimport Color from '../../visualization/color';\n\nclass Band extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function () {\n            return this.each(function () {\n                this.parentNode.appendChild(this);\n            });\n        };\n        const selected = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        const padding = 10;\n        setTimeout(() => {\n            selected.nodes().forEach(item => {\n                if (item.nodeName === \"circle\") {\n                    let circleR = Number(item.getAttribute(\"r\")) + padding,\n                        circleX = item.getAttribute(\"cx\"),\n                        circleY = item.getAttribute(\"cy\");\n\n                    svg.select(\".content\").select(\".circleGroup\").append(\"circle\")\n                        .attr(\"fill\", Color().ANNOTATION)\n                        .attr(\"opacity\", 0.3)\n                        .attr(\"stroke-width\", 0)\n                        .attr(\"x\", circleX)\n                        .attr(\"y\", circleY)\n                        .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                        .attr(\"r\", circleR)\n                    svg.select(\".lineGroup\").moveToFront();\n\n                } else if (item.nodeName === \"rect\") {\n                    let rectX = Number(item.getAttribute(\"x\")) - padding,\n                        rectY = Number(item.getAttribute(\"y\")) - padding,\n                        width = Number(item.getAttribute(\"width\")) + padding * 2,\n                        height = Number(item.getAttribute(\"height\")) + padding;\n\n                    svg.select(\".content\").select(\"g\").append(\"rect\")\n                        .attr(\"fill\", Color().ANNOTATION)\n                        .attr(\"opacity\", 0.3)\n                        .attr(\"stroke-width\", 0)\n                        .attr(\"x\", rectX)\n                        .attr(\"y\", rectY)\n                        .attr(\"width\", width)\n                        .attr(\"height\", height)\n                }\n            });\n        // selected.moveToFront();\n        }, style.delay)\n    }\n}\n\nexport default Band","import Annotator from './annotator'\nimport Color from '../../visualization/color';\n\nclass Circle extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let selected = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n\n        const padding = 5;\n        setTimeout(() => {\n            selected.nodes().forEach(item => {\n                if (item.nodeName === \"circle\") {\n                    let circleR = Number(item.getAttribute(\"r\")) + padding,\n                        circleX = item.getAttribute(\"cx\"),\n                        circleY = item.getAttribute(\"cy\");\n\n                    svg.append(\"circle\")\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", function(d) {\n                            if ('color' in style) {\n                                return style['color']\n                            } else {\n                                return Color().ANNOTATION\n                            }\n                        })\n                        .attr(\"stroke-width\", 2)\n                        .attr(\"x\", circleX)\n                        .attr(\"y\", circleY)\n                        .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                        .attr(\"r\", circleR)\n                } else if (item.nodeName === \"rect\") {\n                    let circleY = item.getAttribute(\"y\"),\n                        width = item.getAttribute(\"width\"),\n                        circleX = Number(item.getAttribute(\"x\")) + width / 2,\n                        circleR = width / 2 + padding;\n                    svg.append(\"circle\")\n                        .attr(\"fill\", \"none\")\n                        .attr(\"stroke\", function(d) {\n                            if ('color' in style) {\n                                return style['color']\n                            } else {\n                                return Color().ANNOTATION\n                            }\n                        })\n                        .attr(\"stroke-width\", 2)\n                        .attr(\"x\", circleX)\n                        .attr(\"y\", circleY)\n                        .attr(\"transform\", \"translate(\" + circleX + \",\" + circleY + \")\")\n                        .attr(\"r\", circleR)\n                }\n\n            });\n        }, style.delay)\n    }\n}\n\nexport default Circle","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator';\n\nclass Contour extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .attr(\"stroke-width\", function(){\n                if(style.delay===0){\n                    return 0.5\n                } else {\n                    return 2\n                }\n            })\n            .attr(\"stroke-alignment\", \"outer\")\n            .attr(\"opacity\", 1)\n            .attr(\"stroke\", function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            // .moveToFront();\n\n    }\n}\n\nexport default Contour;","import * as d3 from 'd3';\nimport Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Fill extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .attr(\"fill\", function(d) {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .attr(\"opacity\", 1)\n            // .moveToFront();\n    }\n}\n\nexport default Fill","import Annotator from './annotator'\n\nclass Desaturate extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .attr(\"fill\", \"lightgray\")\n            .attr(\"opacity\", 1)\n    }\n}\n\nexport default Desaturate","import Annotator from './annotator';\nimport * as d3 from 'd3';\nimport Color from '../../visualization/color';\n\nclass Distribution extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 0.3);\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (!isNaN(data_x) && !isNaN(data_y)) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step2: draw curve \n        let line_generator = d3.line()\n            .x(d => d[0]) \n            .y(d => d[1])\n            .curve(d3.curveCatmullRom);\n\n        svg.append(\"path\")\n            .attr(\"class\", \"regression\")\n            .attr(\"d\", line_generator(positions))\n            .attr(\"stroke\", () => {\n                if (\"color\" in style) {\n                    return style[\"color\"];\n                } else {\n                    return Color().ANNOTATION;\n                }\n            })\n            .attr(\"stroke-width\", 3)\n            .attr(\"fill\", \"none\");\n\n    }\n}\n\nexport default Distribution;","import Annotator from './annotator'\n\nclass Fade extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .attr(\"opacity\", 0.3)\n    }\n}\n\nexport default Fade","import Color from '../../visualization/color';\nimport Annotator from './annotator'\n\nclass Glow extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        var defs = svg.append(\"defs\");\n        var filter = defs.append(\"filter\")\n            .attr(\"id\", \"drop-shadow\")\n            .attr(\"height\", \"150%\");\n\n        filter.append(\"feGaussianBlur\")\n            .attr(\"in\", \"StrokePaint\")\n            // .attr(\"in\", \"SourceAlpha\")\n            .attr(\"stdDeviation\", 2)\n            .attr(\"result\", \"blur\");\n\n        filter.append(\"feOffset\")\n            .attr(\"in\", \"blur\")\n            .attr(\"dx\", 0)\n            .attr(\"dy\", 0)\n            .attr(\"result\", \"offsetBlur\");\n\n        var feMerge = filter.append(\"feMerge\");\n\n\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"offsetBlur\")\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"SourceGraphic\");\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"FillPaint\");\n\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .style(\"stroke\",  function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .style(\"stroke-width\", 2)\n            .style(\"filter\", \"url(#drop-shadow)\")\n            .attr(\"opacity\", 1)\n    }\n}\n\nexport default Glow;","import * as d3 from 'd3';\nimport Annotator from './annotator'\n\nclass Hide extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .attr(\"opacity\", 0);\n    }\n}\n\nexport default Hide","import Annotator from './annotator';\nimport { Scatterplot } from '../../charts';\nimport Color from '../../visualization/color';\n\nclass Label extends Annotator {\n    annotate(chart, target, style) {\n      \n        let svg = chart.svg();\n        let yEncoding = chart.y;\n         \n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        \n        // if the focus defined in the spec does not exist\n        if (focus_elements.length === 0) {\n            return;\n        }\n\n        for(let focus_element of focus_elements.nodes()) {\n           \n            // get node data info\n            let formatData\n            if (\"text\" in style) {\n                formatData = style[\"text\"];\n            }\n            else if (\"field\" in style) {\n                formatData = focus_element.__data__[style[\"field\"]]\n            } else if (chart instanceof Scatterplot) {\n                formatData = focus_element.__data__[yEncoding]\n            } else {\n                let data_d = parseFloat(focus_element.__data__[yEncoding]);\n                if ((data_d / 1000000) >= 1) {\n                    formatData = data_d / 1000000 + \"M\";\n                } else if ((data_d / 1000) >= 1) {\n                    formatData = data_d / 1000 + \"K\";\n                }else {\n                    formatData = data_d + \"\";\n                }\n            }\n\n            // identify the position\n            let data_x, data_y, data_r, offset_y;\n            const nodeName = focus_element.nodeName;\n\n            setTimeout(() => {\n                if (nodeName === \"circle\") { // get center\n                    data_x = parseFloat(focus_element.getAttribute(\"cx\"));\n                    data_y = parseFloat(focus_element.getAttribute(\"cy\"));\n                    data_r = parseFloat(focus_element.getAttribute(\"r\"));\n                    offset_y = - data_r - 10;\n                } else if (nodeName === \"rect\") {\n                    const bbox = focus_element.getBBox();\n                    data_x = bbox.x + bbox.width / 2;\n                    data_y = bbox.y;\n                    offset_y = -10;\n                } else { // currently not support\n                    return;\n                }\n                // draw text\n                svg.append(\"text\")\n                    .attr(\"class\", \"text\")\n                    .attr(\"x\", data_x)\n                    .attr(\"y\", data_y + offset_y)\n                    .text(formatData)\n                    .attr(\"font-size\", () => {\n                        if (\"font-size\" in style) {\n                            return style[\"font-size\"];\n                        } else {\n                            return 12;\n                        }\n                    })\n                    .attr(\"fill\", () => {\n                        if (\"color\" in style) {\n                            return style[\"color\"];\n                        } else {\n                            return Color().TEXT;\n                        }\n                    })\n                    .attr(\"text-anchor\", \"middle\")\n                    .attr(\"alignment-baseline\", \"Alphabetic\")\n                    .attr(\"fill-opacity\", 0)\n                    .transition()\n                    .duration(style.duration)\n                    .attr(\"fill-opacity\", 1);\n                \n            }, style.delay)\n        }\n            \n    }\n}\n\nexport default Label;","import Annotator from './annotator';\nimport Color from '../../visualization/color';\n\nclass Reference extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (data_x && data_y) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step 2: get content range\n        // range on X\n        let x_axis_path = svg.selectAll('.axis_x').select(\".domain\");\n        let x_axis_bbox = x_axis_path.node().getBBox();\n        let x_lower_bound = x_axis_bbox.x;\n        let x_upper_bound = x_lower_bound + x_axis_bbox.width;\n\n        // step 3: get value line parameters\n        // params for value line\n        let x1, x2, y1, y2;\n\n        // process params for value line \n        if (positions.length === 1) { // horizontal line\n            y1 = positions[0][1];\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        } else { // calculate value \n            const mean = this.getAverageValue(positions);\n\n            y1 = mean;\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        }\n\n        // step 4: draw value line\n        svg.append(\"line\")\n            .attr(\"class\", \"value\")\n            .attr(\"x1\", x1)\n            .attr(\"x2\", x2)\n            .attr(\"y1\", y1)\n            .attr(\"y2\", y2)\n            .attr(\"stroke\", function() {\n                if ('color' in style) {\n                    return style['color']\n                } else {\n                    return Color().ANNOTATION\n                }\n            })\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke-dasharray\", \"8, 4\");\n\n    }\n\n    /**\n     * average value on given data points\n     * @param {*} points positions of points to draw a value line\n     * @returns average value\n     */\n    getAverageValue(points) {\n        let sumY = 0\n        let N = points.length\n\n        for (let i = 0; i < N; ++i) {\n            sumY += points[i][1]\n        }\n\n        return sumY/N;\n    }\n}\n\nexport default Reference;","import Annotator from './annotator';\nimport Color from '../../visualization/color';\n\nclass Regression extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function (d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n\n        if (focus_elements.empty()) return;\n\n        // step 1: get all focused elements position\n        let positions = [];\n        focus_elements.nodes().forEach(one_element => {\n            let data_x, data_y;\n            const nodeName = one_element.nodeName;\n            if (nodeName === \"circle\") {\n                data_x = parseFloat(one_element.getAttribute(\"cx\"));\n                data_y = parseFloat(one_element.getAttribute(\"cy\"));\n            } else if (nodeName === \"rect\") {\n                data_x = parseFloat(one_element.getAttribute(\"x\")) + parseFloat(one_element.getAttribute(\"width\")) / 2;\n                data_y = parseFloat(one_element.getAttribute(\"y\"));\n            }\n            if (data_x && data_y) {\n                positions.push([data_x, data_y]);\n            }\n        })\n\n        // step 2: get content range\n        // range on X\n        let x_axis_path = svg.selectAll('.axis_x').select(\".domain\");\n        let x_axis_bbox = x_axis_path.node().getBBox();\n        let x_lower_bound = x_axis_bbox.x;\n        let x_upper_bound = x_lower_bound + x_axis_bbox.width;\n\n        // range on Y\n        let y_axis_path = svg.selectAll('.axis_y').select(\".domain\");\n        let y_axis_bbox = y_axis_path.node().getBBox();\n        let y_lower_bound = y_axis_bbox.y;\n        let y_upper_bound = y_lower_bound + y_axis_bbox.height;\n\n        // step 3: get regression line parameters\n        // params for regression line\n        let x1, x2, y1, y2;\n\n        // process params for regression line \n        if (positions.length === 1) { // horizontal line\n            y1 = positions[0][1];\n            y2 = y1;\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n        } else { // calculate regression \n            const ret = this.getLeastSquares(positions);\n            let x_ymin = (y_upper_bound - y_lower_bound - ret.b) / ret.m,\n                x_ymax = (0 - ret.b) / ret.m;\n\n            if (x_ymin > x_ymax) {\n                [x_ymin, x_ymax] = [x_ymax, x_ymin];\n            }\n\n            x1 = x_lower_bound;\n            x2 = x_upper_bound;\n            x1 = x1 < x_ymin ? x_ymin : x1;\n            x2 = x2 > x_ymax ? x_ymax : x2;\n            if (ret.m === 0) x1 = 0;\n            y1 = ret.m * x1 + ret.b;\n            y2 = ret.m * x2 + ret.b;\n            if (ret.m === -Infinity) {\n                x1 = x2;\n                y1 = y_lower_bound;\n                y2 = y_upper_bound;\n            }\n        }\n\n        // step 4: draw regression line\n        svg.append(\"line\")\n            .attr(\"class\", \"regression\")\n            .attr(\"x1\", x1)\n            .attr(\"x2\", x2)\n            .attr(\"y1\", y1)\n            .attr(\"y2\", y2)\n            .attr(\"stroke\", () => {\n                if (\"color\" in style) {\n                    return style[\"color\"];\n                } else {\n                    return Color().ANNOTATION;\n                }\n            })\n            .attr(\"stroke-width\", 2)\n            .attr(\"stroke-dasharray\", \"8, 4\");\n\n    }\n\n    /**\n     * least squares on given data points\n     * @param {*} points positions of points to draw a regression line\n     * @returns ret {m: gradient, b: intercept}\n     */\n    getLeastSquares(points) {\n        let ret = {}\n\n        let sumX = 0\n        let sumY = 0\n        let sumXY = 0\n        let sumXSq = 0\n        let N = points.length\n\n        for (let i = 0; i < N; ++i) {\n            sumX += points[i][0]\n            sumY += points[i][1]\n            sumXY += points[i][0] * points[i][1]\n            sumXSq += points[i][0] * points[i][0]\n        }\n\n        ret.m = ((sumXY - sumX * sumY / N)) / (sumXSq - sumX * sumX / N)\n        ret.b = sumY / N - ret.m * sumX / N\n\n        return ret;\n    }\n}\n\nexport default Regression;","import Annotator from './annotator'\n\nclass Separate extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n    }\n}\n\nexport default Separate;","import * as d3 from 'd3';\nimport Annotator from './annotator'\n\nclass Show extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .attr(\"opacity\", 1);\n    }\n}\n\nexport default Show","import Annotator from './annotator';\n\nclass Symbol extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        \n        // if the focus defined in the spec does not exist\n        if (focus_elements.length === 0) {\n            return;\n        }\n\n        for(let focus_element of focus_elements.nodes()) {\n\n            // identify the position\n            let data_x, data_y, data_r, offset_y;\n            const size_icon = 20;\n            const nodeName = focus_element.nodeName;\n            if (nodeName === \"circle\") { // get center\n                data_x = parseFloat(focus_element.getAttribute(\"cx\"));\n                data_y = parseFloat(focus_element.getAttribute(\"cy\"));\n                data_r = parseFloat(focus_element.getAttribute(\"r\"));\n                offset_y = - data_r - size_icon;\n            } else if (nodeName === \"rect\") {\n                const bbox = focus_element.getBBox();\n                data_x = bbox.x + bbox.width / 2;\n                data_y = bbox.y;\n                offset_y = 10;\n            } else { // currently not support\n                return;\n            }\n\n            // append icon\n            svg.append(\"image\")\n                .attr(\"class\", \"icon-img\")\n                .attr(\"x\", data_x - size_icon / 2)\n                .attr(\"y\", data_y + offset_y)\n                .attr(\"width\", size_icon)\n                .attr(\"height\", size_icon)\n                .attr(\"xlink:href\", () => {\n                    if(\"icon-url\" in style) {\n                        return style[\"icon-url\"];\n                    } else {\n                        return ;\n                    }\n                })\n        \n        }   \n            \n    }\n}\n\nexport default Symbol;","import * as d3 from 'd3';\nimport Annotator from './annotator'\nclass Texture extends Annotator {\n    annotate(chart, target, style) {\n        let svg = chart.svg();\n        d3.selection.prototype.moveToFront = function() {  \n            return this.each(function(){\n                this.parentNode.appendChild(this);\n            });\n        };\n        var config = {\n            \"texture_size\" : 300\n        }\n        var defs = svg.append('svg:defs');\n        defs.append(\"svg:pattern\")\n            .attr(\"id\", \"texture_background\")\n            .attr(\"width\", config.texture_size)\n            .attr(\"height\", config.texture_size)\n            .attr(\"patternUnits\", \"userSpaceOnUse\")\n            .append(\"svg:image\")\n            .attr(\"xlink:href\", style[\"background-image\"])\n            .attr(\"x\", 0)\n            .attr(\"y\", 0);\n        svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            })\n            .transition()\n            .delay(style.delay)\n            .duration(style.duration)\n            .style(\"fill\", \"url(#texture_background)\")\n            // .moveToFront();\n\n    }\n}\n\nexport default Texture;","import Annotator from './annotator'\n\nclass Tip extends Annotator {\n    annotate(chart, target, style) {\n        \n    }\n}\n\nexport default Tip","import Annotator from './annotator';\nimport { Scatterplot } from '../../charts';\nimport Color from '../../visualization/color';\nimport * as d3 from 'd3';\nimport { svg } from 'd3';\n\nclass Tooltip extends Annotator {\n\n    textMultiline (container, text, textSize, maxWidth, x, y, forCard, textAnchor = \"middle\"){\n        \n        if (forCard){\n            textSize = 4\n        }\n\n        let words = text.split(\" \").filter(d => d !== \"\");\n    \n        let virtualE = container.append(\"text\")\n            .attr(\"font-family\", 'Arial-Regular')\n            .attr(\"font-size\", textSize)\n            .text(words[0]);\n    \n        let textE = container.append(\"text\")\n            .attr(\"transform\", \"translate(\" + x + \",\" + (y) + \")\")\n            .attr(\"font-family\", 'Arial-Regular')\n            .attr(\"font-size\", textSize)\n            .attr(\"text-anchor\", textAnchor);\n    \n        maxWidth = Math.max(virtualE.node().getComputedTextLength(), maxWidth);\n        if (forCard){\n            maxWidth = 0.5*maxWidth\n        }\n        const lineHeight = virtualE.node().getBBox().height * 0.9;\n        let line = '';\n        let rowCount = 0;\n        const maxRow = 5;\n        for (let n = 0; n < words.length; n++) {\n            let testLine = line + ' ' + words[n];\n            /*  Add line in testElement */\n            if(rowCount === maxRow - 1){\n                virtualE.text(testLine+ \"\");\n            }else{\n                virtualE.text(testLine);\n            }\n            /* Messure textElement */\n            let testWidth = virtualE.node().getComputedTextLength();\n            if (testWidth > maxWidth) {\n                if(rowCount === maxRow - 1){//\n                    line += \"\";\n                    break;\n                }else{//new row\n                    textE.append(\"tspan\")\n                        .attr(\"x\", 0)\n                        .attr(\"dy\", lineHeight)\n                        .text(line);\n                    line = words[n];\n                    rowCount ++;\n                }\n            } else {\n                line = testLine;\n            }\n        }\n        \n        textE.append(\"tspan\")\n            .attr(\"x\", 0)\n            .attr(\"dy\", lineHeight)\n            .text(line);\n        virtualE.remove();\n    \n        return textE;\n    }\n    \n\n    annotate(chart, target, style) {\n      \n        let svg = chart.svg();\n        let yEncoding = chart.y;\n         \n        let focus_elements = svg.selectAll(\".mark\")\n            .filter(function(d) {\n                if (target.length === 0) {\n                    return true\n                }\n                for (const item of target) {\n                    if (d[item.field] === item.value) {\n                        return true\n                    }\n                }\n                return false\n            });\n        \n        // if the focus defined in the spec does not exist\n        if (focus_elements.length === 0) {\n            return;\n        }\n\n        for(let focus_element of focus_elements.nodes()) {\n           \n            // get node data info\n            let formatData\n            if (\"text\" in style) {\n                formatData = style[\"text\"];\n            }\n            else if (\"field\" in style) {\n                formatData = focus_element.__data__[style[\"field\"]]\n            } else if (chart instanceof Scatterplot) {\n                formatData = focus_element.__data__[yEncoding]\n            } else {\n                let data_d = parseFloat(focus_element.__data__[yEncoding]);\n                if ((data_d / 1000000) >= 1) {\n                    formatData = data_d / 1000000 + \"M\";\n                } else if ((data_d / 1000) >= 1) {\n                    formatData = data_d / 1000 + \"K\";\n                }else {\n                    formatData = data_d + \"\";\n                }\n            }\n\n            // identify the position\n            let data_x, data_y, data_r, offset_y;\n            const nodeName = focus_element.nodeName;\n            let tranglesize = 50\n            let fontsize \n\n             if (\"font-size\" in style) \n                fontsize =  style[\"font-size\"];\n            else \n                fontsize =  10;                \n\n            setTimeout(() => {\n                if (nodeName === \"circle\") { // get center\n                    data_x = parseFloat(focus_element.getAttribute(\"cx\"));\n                    data_y = parseFloat(focus_element.getAttribute(\"cy\"));\n                    data_r = parseFloat(focus_element.getAttribute(\"r\"));\n                    offset_y = - data_r - 5;\n                } else if (nodeName === \"rect\") {\n                    const bbox = focus_element.getBBox();\n                    data_x = bbox.x + bbox.width / 2;\n                    data_y = bbox.y;\n                    offset_y = -5;\n                } else { // currently not support\n                    return;\n                }\n\n                let toolTipSvg = svg.append(\"g\").attr(\"class\", \"tooltip\")\n                let tooltipRect = toolTipSvg\n                                .append('rect')\n                                .attr(\"class\", \"tooltipRect\");\n                \n                let tooltip = toolTipSvg.append(\"text\")\n                            .attr(\"font-size\", fontsize)                            \n                            .attr(\"fill\", () => {\n                                if (\"color\" in style) {\n                                    return style[\"color\"];\n                                } else {\n                                    return '#FFFFFF';\n                                }\n                            })\n                            .attr(\"text-anchor\", \"start\");\n                \n                if (\"text\" in style){\n                    tooltip.remove();\n                    let forCard\n                    if (style.duration===0){\n                        forCard = true\n                    }else{\n                        forCard = false\n                    }\n                    tooltip = this.textMultiline(toolTipSvg, formatData, fontsize, 110, data_x, data_y, forCard);\n                    tooltip\n                        .attr(\"transform\", \"translate(\" + data_x + \",\" + 0 + \")\")\n                        .attr(\"fill\", 'white');\n                    }\n                else if (\"field in style\"){\n                    tooltip.append(\"tspan\")\n                    .text(formatData)\n                    .attr(\"dy\", tooltip.selectAll(\"tspan\").node().getBBox().height * 0.9);\n                }\n                \n            \n\n                let textWidth = tooltip.node().getBBox().width;\n                let textHeight = tooltip.node().getBBox().height;\n                let widthAlpha = 0.7;\n                let rectWidth = Math.min(textWidth / widthAlpha, textWidth + 12);\n                let rectHeight =textHeight / 0.8;\n                                                    \n                tooltipRect\n                        .attr(\"rx\", 0.1 * textHeight)\n                        .attr(\"ry\", 0.1 * textHeight)\n                        .attr(\"width\", rectWidth)\n                        .attr(\"height\", rectHeight)\n                        .attr(\"fill\", Color().TOOLTIP)\n                        .attr(\"opacity\", 1.0);\n\n                // let yyy = data_y - 10\n                let tooltipTriangle = toolTipSvg.append(\"path\")\n                    .attr(\"class\", \"triangle\")\n                    .attr(\"transform\", \"translate(\" + data_x + \",\" + (data_y + offset_y) + \")rotate(180)\")\n                    .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(tranglesize))\n                    .attr(\"fill\", Color().TOOLTIP)\n\n\n                    \n                tooltipRect.attr(\"x\", data_x - rectWidth / 2)\n                            .attr(\"y\", data_y + offset_y - rectHeight );\n                \n                tooltip.attr(\"width\", textWidth)\n                        .attr(\"height\", textHeight)\n                        .attr(\"x\", data_x - rectWidth / 2 + (rectWidth- textWidth)/2 )\n                        .attr(\"y\",  data_y + offset_y - rectHeight );\n                                \n                            \n                tooltipTriangle.attr(\"opacity\", 1);\n\n                toolTipSvg.attr(\"opacity\", 0)\n                          .transition()\n                          .duration(style.duration*0.4)\n                          .attr(\"opacity\", 1)\n\n\n\n            }, style.delay)\n        }\n            \n    }\n}\n\nexport default Tooltip;","import Action from './action';\nimport AnnotationType from '../visualization/annotationtype';\nimport {Arrow, Coloredarea, Circle, Contour, Desaturate, Distribution, Fade, Fill, Glow, Hide, Label, Reference, Regression, Separate, Show, Symbol, Texture, Tip, Tooltip} from './annotations'\n\nclass AddAnnotation extends Action {\n    constructor(spec) {\n        super(spec);\n        this._method = spec.method;\n        if ('target' in spec) {\n            this._target = spec.target;\n        } else {\n            this._target = []\n        }\n        \n        \n        if ('style' in spec) {\n            this._style = spec.style\n            if (!this._style.delay)\n                this._style.delay = 0;\n\n            if (!this._style.duration)\n                this._style.duration = 0;\n        } else {\n            this._style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        let annotator = this._type2annotator(this._method)\n        let chart = vis.chart();\n        let target = this._target;\n        let style = this._style;\n        annotator.annotate(chart, target, style);\n    }\n\n    _type2annotator(type) {\n        switch (type) {\n            case AnnotationType.ARROW:\n                return new Arrow()\n            case AnnotationType.COLOREDAREA:\n                return new Coloredarea()\n            case AnnotationType.CIRCLE:\n                return new Circle()\n            case AnnotationType.CONTOUR:\n                return new Contour()\n            case AnnotationType.DESATURATE:\n                return new Desaturate()\n            case AnnotationType.DISTRIBUTION:\n                return new Distribution()\n            case AnnotationType.FADE:\n                return new Fade()\n            case AnnotationType.FILL:\n                return new Fill()\n            case AnnotationType.GLOW:\n                return new Glow()\n            case AnnotationType.HIDE:\n                return new Hide()\n            case AnnotationType.LABEL:\n                return new Label()\n            case AnnotationType.REFERENCE:\n                return new Reference()\n            case AnnotationType.REGRESSION:\n                return new Regression()\n            case AnnotationType.SEPARATE:\n                return new Separate()\n            case AnnotationType.SHOW:\n                return new Show()\n            case AnnotationType.SYMBOL:\n                return new Symbol()\n            case AnnotationType.TEXTURE:\n                return new Texture()\n            case AnnotationType.TIP:\n                return new Tip()\n            case AnnotationType.TOOLTIP:\n                return new Tooltip()\n            default:\n                return new Fill();\n        }\n    }\n}\n\nexport default AddAnnotation;","import Action from './action';\n\nclass AddEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n        this.field = spec.field\n        if ('style' in spec) { this.style = spec.style }\n        else {\n            this.style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        vis.chart().addEncoding(this.channel, this.field, this.style);\n    }\n}\n\nexport default AddEncoding;","import Action from './action';\n\nclass AddAggregation extends Action {\n    constructor(spec) {\n        super(spec);\n        this.field = spec.field;\n        this.operator = spec.operator\n        this.style = spec.style\n    }\n\n    operate(vis) {\n        vis.chart().addAggregation(this.field, this.operator,this.style);\n    }\n}\n\nexport default AddAggregation;","const TitleType = {\n    FADE: 'fade'\n}\n\nexport default TitleType","import Titler from './titler'\nimport Color from '../../visualization/color';\n\nclass Fade extends Titler {\n    maketitle(chart, style) {\n        let svg = chart.svg();\n            let words = style.text.split(\" \").filter(d => d !== \"\");\n        \n            let virtualE = svg.append(\"text\")\n                .attr(\"font-family\", 'Arial-Regular')\n                .attr(\"font-size\", 24)\n                .attr(\"fill\", () => {\n                if (\"color\" in style) {\n                        return style[\"color\"];\n                    } else {\n                        return Color().TEXT;\n                    }\n                })\n\n                .text(words[0]);\n\n            let textE = svg.append(\"text\")\n                .attr(\"x\",\"50%\")\n                .attr(\"y\", -10)\n                .attr(\"dominant-baseline\", \"central\")\n                // .attr(\"transform\", \"translate(\" + 50 + \",\" + (-10) + \")\")\n                .attr(\"transform\", \"translate(\" + 375 + \",\" + (0) + \")\")\n                .attr(\"font-family\", 'Arial-Regular')\n                .attr(\"font-weight\",\"bold\")\n                .attr(\"font-size\", 20)\n                .attr(\"fill\", () => {\n                    if (\"color\" in style) {\n                        return style[\"color\"];\n                    } else {\n                        return Color().TEXT;\n                    }\n                })\n                .attr(\"text-anchor\", \"middle\");\n            \n            let maxWidth = Math.max(virtualE.node().getComputedTextLength(), 720);\n            const lineHeight = virtualE.node().getBBox().height * 0.9;\n\n            let line = '';\n            let rowCount = 0;\n            const maxRow = 4;\n\n            //  duration\n            if(style.duration===-1){\n                for (let n = 0; n < words.length; n++) {\n                    let testLine = line + ' ' + words[n];\n                    /*  Add line in testElement */\n                    if(rowCount === maxRow - 1){\n                        virtualE.text(testLine+ \"\");\n                    }else{\n                        virtualE.text(testLine);\n                    }\n                    /* Messure textElement */\n                    let testWidth = virtualE.node().getComputedTextLength();\n                    if (testWidth > maxWidth) {\n                        if(rowCount === maxRow - 1){//\n                            line += \"\";\n                            break;\n                        }else{//new row\n                            textE.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight)\n                                .text(line)\n                                .attr(\"fill-opacity\", 0)\n                                .transition()\n                                .duration(2000)\n                                .attr(\"fill-opacity\", 1);\n                            line = words[n];\n                            rowCount ++;\n                        }\n                    } else {\n                        line = testLine;\n                    }\n                }\n                \n                textE.append(\"tspan\")\n                    .attr(\"x\", 0)\n                    .attr(\"dy\", lineHeight)\n                    .attr(\"fill-opacity\", 0)\n                    .text(line)\n                    .transition()\n                    .delay(style.delay)\n                    .duration(2000)\n                    .attr(\"fill-opacity\", 1);\n                virtualE.remove();\n            }\n            //  duration\n            else{\n                for (let n = 0; n < words.length; n++) {\n                    let testLine = line + ' ' + words[n];\n                    /*  Add line in testElement */\n                    if(rowCount === maxRow - 1){\n                        virtualE.text(testLine+ \"\");\n                    }else{\n                        virtualE.text(testLine);\n                    }\n                    /* Messure textElement */\n                    let testWidth = virtualE.node().getComputedTextLength();\n                    if (testWidth > maxWidth) {\n                        if(rowCount === maxRow - 1){//\n                            line += \"\";\n                            break;\n                        }else{//new row\n                            textE.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight)\n                                .attr(\"fill-opacity\", 0)\n                                .text(line)\n                                .transition()\n                                .delay(style.delay)\n                                .duration(style.duration*0.25)\n                                .attr(\"fill-opacity\", 1)\n                                .transition()\n                                .delay(style.duration*0.5)\n                                .duration(style.duration*0.25)\n                                .attr(\"fill-opacity\", 0)\n                                .remove();\n                            line = words[n];\n                            rowCount ++;\n                        }\n                    } else {\n                        line = testLine;\n                    }\n                }\n                \n                textE.append(\"tspan\")\n                    .attr(\"x\", 0)\n                    .attr(\"dy\", lineHeight)\n                    .attr(\"fill-opacity\", 0)\n                    .text(line)\n                    .transition()\n                    .delay(style.delay)\n                    .duration(style.duration*0.25)\n                    .attr(\"fill-opacity\", 1)\n                    .transition()\n                    .delay(style.duration*0.5)\n                    .duration(style.duration*0.25)\n                    .attr(\"fill-opacity\", 0)\n                    .remove();\n                virtualE.remove();\n                \n            }\n    }\n}\n\nexport default Fade","class Titler {\n\n    maketitle(chart, style) {}\n\n}\n\nexport default Titler","import Action from './action';\nimport TitleType from '../visualization/titletype';\nimport {Fade} from './title'\n\nclass AddTitle extends Action {\n    constructor(spec) {\n        super(spec);\n        this._animation = spec.style.animation;\n        if ('style' in spec) {\n            this._style = spec.style\n            if (!this._style.delay)\n                this._style.delay = 0;\n\n            if (!this._style.duration)\n                this._style.duration = -1;\n        } else {\n            this._style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        let titler = this._type2title(this._animation)\n        let chart = vis.chart();\n        let style = this._style;\n        titler.maketitle(chart, style);\n    }\n\n    _type2title(type) {\n        switch (type) {\n            case TitleType.FADE:\n                return new Fade()\n            default:\n                return new Fade();\n        }\n    }\n}\n\nexport default AddTitle;","import Captioner from './captioner';\n\nclass Fade extends Captioner {\n    makecaption(chart, style) {\n        let svg = chart.svg();\n\n        setTimeout(() => {\n            let words = style.text.split(\" \").filter(d => d !== \"\");\n        \n            let virtualE = svg.append(\"text\")\n                .attr(\"font-family\", 'Arial-Regular')\n                .attr(\"font-size\", 18)\n                .text(words[0]);\n\n            let textE = svg.append(\"text\")\n                .attr(\"x\",\"50%\")\n                .attr(\"y\",\"85%\")\n                .attr(\"dominant-baseline\", \"central\")\n                .attr(\"transform\", \"translate(\" + 375 + \",\" + (10) + \")\")\n                .attr(\"font-family\", 'Arial-Regular')\n                .attr(\"font-size\", 14)\n                .attr(\"text-anchor\", \"middle\");\n            \n            let maxWidth = Math.max(virtualE.node().getComputedTextLength(), 800);\n            console.log('~~~~~`',maxWidth)\n            const lineHeight = virtualE.node().getBBox().height * 0.9;\n\n            let line = '';\n            let rowCount = 0;\n            const maxRow = 4;\n\n            //  duration\n            if(style.duration===-1){\n                for (let n = 0; n < words.length; n++) {\n                    let testLine = line + ' ' + words[n];\n                    /*  Add line in testElement */\n                    if(rowCount === maxRow - 1){\n                        virtualE.text(testLine+ \"\");\n                    }else{\n                        virtualE.text(testLine);\n                    }\n                    /* Messure textElement */\n                    let testWidth = virtualE.node().getComputedTextLength();\n                    if (testWidth > maxWidth) {\n                        if(rowCount === maxRow - 1){//\n                            line += \"\";\n                            break;\n                        }else{//new row\n                            textE.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight)\n                                .text(line)\n                                .transition()\n                                .duration(2000)\n                                .attr(\"fill-opacity\", 1);\n                            line = words[n];\n                            rowCount ++;\n                        }\n                    } else {\n                        line = testLine;\n                    }\n                }\n                \n                textE.append(\"tspan\")\n                    .attr(\"x\", 0)\n                    .attr(\"dy\", lineHeight)\n                    .text(line)\n                    .transition()\n                    .duration(2000)\n                    .attr(\"fill-opacity\", 1);\n                virtualE.remove();\n            }\n            //  duration\n            else{\n                for (let n = 0; n < words.length; n++) {\n                    let testLine = line + ' ' + words[n];\n                    /*  Add line in testElement */\n                    if(rowCount === maxRow - 1){\n                        virtualE.text(testLine+ \"\");\n                    }else{\n                        virtualE.text(testLine);\n                    }\n                    /* Messure textElement */\n                    let testWidth = virtualE.node().getComputedTextLength();\n                    if (testWidth > maxWidth) {\n                        if(rowCount === maxRow - 1){//\n                            line += \"\";\n                            break;\n                        }else{//new row\n                            textE.append(\"tspan\")\n                                .attr(\"x\", 0)\n                                .attr(\"dy\", lineHeight)\n                                .text(line)\n                                .transition()\n                                .duration(style.duration*0.25)\n                                .attr(\"fill-opacity\", 1)\n                                .transition()\n                                .delay(style.duration*0.5)\n                                .duration(style.duration*0.25)\n                                .attr(\"fill-opacity\", 0)\n                                .remove();\n                            line = words[n];\n                            rowCount ++;\n                        }\n                    } else {\n                        line = testLine;\n                    }\n                }\n                \n                textE.append(\"tspan\")\n                    .attr(\"x\", 0)\n                    .attr(\"dy\", lineHeight)\n                    .text(line)\n                    .transition()\n                    .duration(style.duration*0.25)\n                    .attr(\"fill-opacity\", 1)\n                    .transition()\n                    .delay(style.duration*0.5)\n                    .duration(style.duration*0.25)\n                    .attr(\"fill-opacity\", 0)\n                    .remove();\n                virtualE.remove();\n                \n            }\n        }, style.delay)\n    }\n}\n\nexport default Fade","class Captioner {\n\n    makecaption(chart, style) {}\n\n}\n\nexport default Captioner","const CaptionType = {\n    FADE: 'fade'\n}\n\nexport default CaptionType","import Action from './action'\nimport {Fade} from './caption'\nimport CaptionType from '../visualization/captiontype'\n\nclass AddCaption extends Action {\n    constructor(spec) {\n        super(spec);\n        this._animation = spec.style.animation;\n        if ('style' in spec) {\n            this._style = spec.style\n            if (!this._style.delay)\n                this._style.delay = 0;\n\n            if (!this._style.duration)\n                this._style.duration = -1;\n        } else {\n            this._style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        let Captioner = this._type2caption(this._animation)\n        let chart = vis.chart();\n        let style = this._style;\n        Captioner.makecaption(chart, style);\n    }\n\n    _type2caption(type) {\n        switch (type) {\n            case CaptionType.FADE:\n                return new Fade()\n            default:\n                return new Fade();\n        }\n    }\n}\n\nexport default AddCaption;","import Action from './action';\n\nclass ModifyEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n        this.field = spec.field;\n        if ('style' in spec) { this.style = spec.style }\n        else {\n            this.style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        vis.chart().modifyEncoding(this.channel, this.field, this.style);\n    }\n}\n\nexport default ModifyEncoding;","import Action from './action';\n\nclass RemoveEncoding extends Action {\n    constructor(spec) {\n        super(spec);\n        this.channel = spec.channel;\n        if ('style' in spec) { this.style = spec.style }\n        else {\n            this.style = { \"delay\": 0, \"duration\": 0 }\n        }\n    }\n\n    operate(vis) {\n        vis.chart().removeEncoding(this.channel, this.style);\n    }\n}\n\nexport default RemoveEncoding;","import Pipeline from './pipeline';\nimport { AddAnnotation, AddChart, AddEncoding, ModifyEncoding, RemoveEncoding, DataProcess, AddAggregation, AddTitle, AddCaption} from './actions';\n\nclass Parser {\n    constructor() {\n        this._parsedData = []\n    }\n\n    parse(spec) {\n        let dataspec = spec.data ? spec.data : {};\n        let factspec = spec.fact ? spec.fact : {};\n        let focus_target = 'focus' in factspec ? factspec['focus'] : []\n        let actionspecs = spec.actions ? spec.actions : [];\n        let pipeline = new Pipeline()\n        if (actionspecs.length > 0) {\n            for (const actionspec of actionspecs) {\n                // TODO: deal with actionspec\n                let actions_to_add = [];\n                if ('add' in actionspec) {\n                    switch (actionspec['add']) {\n                        case 'chart':\n                            actions_to_add.push(new AddChart(actionspec));\n                            break;\n                        case 'annotation':\n                            if (!('target' in actionspec)) {\n                                actionspec['target'] = focus_target // default is focus\n                            }\n                            if (('method' in actionspec) && Array.isArray(actionspec['method'])) {\n                                for (const submethod of actionspec['method']) {\n                                    let subactionspec = { ...actionspec }; // copy a dict\n                                    subactionspec['method'] = submethod\n                                    let action = new AddAnnotation(subactionspec);\n                                    actions_to_add.push(action);\n                                }\n                            } else {\n                                let action = new AddAnnotation(actionspec);\n                                actions_to_add.push(action);\n                            }\n                            break;\n                        case 'encoding':\n                            actions_to_add.push(new AddEncoding(actionspec));\n                            break;\n                        case 'aggregation':\n                            actions_to_add.push(new AddAggregation(actionspec));\n                            break;     \n                        case 'title':\n                            actions_to_add.push(new AddTitle(actionspec)); \n                            break;   \n                        case 'caption':\n                            actions_to_add.push(new AddCaption(actionspec)); \n                            break;              \n                        default:\n                            break;\n                    }\n                } else if ('modify' in actionspec) {\n                    actions_to_add.push(new ModifyEncoding(actionspec));\n                } else if ('remove' in actionspec) {\n                    actions_to_add.push(new RemoveEncoding(actionspec));\n                }\n                else if ('select' in actionspec || 'groupby' in actionspec || 'filter' in actionspec) {\n                    // data processing\n                    actions_to_add.push(new DataProcess(actionspec));\n                }\n                for (const action of actions_to_add) {\n                    pipeline.add(action)\n                \n                }\n            }\n        }\n        return { dataspec, factspec, pipeline };\n    }\n}\n\nexport default Parser;","const templates = [\n    {\n        'id': 0,\n        'template': 'The Pearson correlation between the {{measure1}} and the {{measure2}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the Pearson correlation coefficient between the {{measure1}} and the {{measure2}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the {{measure1}} is correlated with the {{measure2}} and the Person correlation is {{parameter}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, there are {{parameter}} {{groupby}}s: {{no.1}}, {{no.2}}, {{no.3}}, and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}, among which {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The data contain {{parameter}} {{groupby}}s when {{subspace}}, which are {{no.1}}, {{no.2}}, {{no.3}}. {{focus}} needs to pay attention.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The difference between {{focus1}} and {{focus2}} regarding to their {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{focus1}} and {{focus2}}\\'s difference on the {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'A comparison between {{focus1}} and {{focus2}} on their {{agg}} {{measure}} shows the difference is {{parameter}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'Given {{subspace}}, the {{focus}} value of the {{agg}} {{measure}} is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{focus}} {{agg}} {{measure}} value over {{groupby}}s is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}} given {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'Among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}, when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{focus}}\\'s {{agg}} {{measure}} is anomalously different from other {{groupby}}s\\' {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'Among various {{groupby}}s, the {{agg}} {{measure}} of {{focus}} is an anomaly when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{focus}} makes up {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{focus}}\\'s {{agg}} {{measure}} takes {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'In the {{agg}} {{measure}} ranking of different {{groupby}}s,  the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}, when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}, in which the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When sorting the {{groupby}}s in order based on their {{agg}} {{measure}}, the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}} when {{subspace}}.',\n    },\n    {\n        'id': 3,\n        'template': 'The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The trend of the {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{agg}} {{measure}} over {{groupby}}s shows a/an {{parameter}} trend when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 3,\n        'template': 'The trend of the {{agg}} {{measure}} over {{groupby}}s.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{agg}} {{measure}} value is {{parameter}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","import FactType from '../../visualization/facttype';\nimport association from './association';\nimport categorization from './categorization';\nimport difference from './difference';\nimport distribution from './distribution';\nimport extreme from './extreme';\nimport outlier from './outlier';\nimport proportion from './proportion';\nimport rank from './rank';\nimport trend from './trend';\nimport value from './value';\n\nconst templateCount = 3;\n\nconst pickFactTemplate = function (fact, id = -1) {\n    // pick randomly when id == -1\n    let templates = []\n    switch (fact.type) {\n        case FactType.Association:\n            templates = association;\n            break;\n\n        case FactType.Categorization:\n            templates = categorization;\n            break;\n\n        case FactType.Difference:\n            templates = difference;\n            break;\n\n        case FactType.Distribution:\n            templates = distribution;\n            break;\n\n        case FactType.Extreme:\n            templates = extreme;\n            break;\n\n        case FactType.Outlier:\n            templates = outlier;\n            break;\n\n        case FactType.Proportion:\n            templates = proportion;\n            break;\n\n        case FactType.Rank:\n            templates = rank;\n            break;\n\n        case FactType.Trend:\n            templates = trend;\n            break;\n\n        case FactType.Value:\n            templates = value;\n            break;\n\n        default:\n            break;\n    }\n    if (id === -1) {\n        id = Math.floor(Math.random() * 10) % templateCount\n    }\n    if (fact.breakdown.length >= 2 && (fact.type === FactType.Trend || fact.type === FactType.Rank))\n        id = 3\n    let sentence = '';\n    try {\n        sentence = templates[id].template;\n    }\n    catch (error) {\n        console.error(error);\n        console.log('wrong id:' + id)\n    }\n    return sentence;\n}\n\nexport default pickFactTemplate;","import pickFactTemplate from './fact-templates';\nimport FactType from '../visualization/facttype';\nimport AggregationType from '../visualization/aggtype';\n\nconst irregularPluralsJSON = require('./irregular-plurals.json');\nconst irregularPlurals = new Map(Object.entries(irregularPluralsJSON));\n\nconst plur = function (word, plural, count) {\n    if (typeof plural === 'number') {\n        count = plural;\n    }\n    if (irregularPlurals.has(word.toLowerCase())) {\n        plural = irregularPlurals.get(word.toLowerCase());\n\n        const firstLetter = word.charAt(0);\n        const isFirstLetterUpperCase = firstLetter === firstLetter.toUpperCase();\n        if (isFirstLetterUpperCase) {\n            plural = firstLetter.toUpperCase() + plural.slice(1);\n        }\n\n        const isWholeWordUpperCase = word === word.toUpperCase();\n        if (isWholeWordUpperCase) {\n            plural = plural.toUpperCase();\n        }\n    } else if (typeof plural !== 'string') {\n        plural = (word.replace(/(?:s|x|z|ch|sh)$/i, '$&e').replace(/([^aeiou])y$/i, '$1ie') + 's')\n            .replace(/i?e?s$/i, match => {\n                const isTailLowerCase = word.slice(-1) === word.slice(-1).toLowerCase();\n                return isTailLowerCase ? match.toLowerCase() : match.toUpperCase();\n            });\n    }\n\n    return Math.abs(count) === 1 ? word : plural;\n};\n\nconst convertAggregation = function (aggType) {\n    switch (aggType) {\n        case AggregationType.SUM:\n            return 'total'\n\n        case AggregationType.MAX:\n            return 'maximum'\n\n        case AggregationType.MIN:\n            return 'minimum'\n\n        case AggregationType.AVG:\n            return 'average'\n\n        case AggregationType.COUNT:\n            return 'count'\n\n        case AggregationType.NONE:\n            return ''\n\n        default:\n            return 'total'\n        // break;\n    }\n}\n\nconst convertMeasure = function (measure) {\n    if (measure === \"COUNT\" || !measure) return \"\"\n    else return measure.toLowerCase()\n}\n\nconst convertGroupby = function (groupby, param = 'single') {\n    let gb = groupby[0].field;\n    if (param === 'single')\n        return gb.toLowerCase();\n    else if (param === 'plural') {\n        if (gb.indexOf(' of ') !== -1) {\n            let gbWords = gb.split(\" \")\n            let gbWordIndex = gbWords.indexOf(\"of\") - 1\n            if (gbWordIndex > -1) {\n                let plurWord = plur(gbWords[gbWordIndex], 2)\n                return gb.replace(gbWords[gbWordIndex], plurWord)\n            }\n        } else\n            return plur(gb, 2).toLowerCase()\n    }\n}\n\n// for value/difference/categorization\nconst formatNum = function (num) {\n    num = (num || 0).toString();\n    let number = 0,\n        floatNum = '',\n        intNum = '';\n    if (num.indexOf('.') > 0) {\n        number = num.indexOf('.');\n        floatNum = num.substr(number);\n        intNum = num.substring(0, number);\n    } else {\n        intNum = num;\n    }\n    let result = [],\n        counter = 0;\n    intNum = intNum.split('');\n\n    for (let i = intNum.length - 1; i >= 0; i--) {\n        counter++;\n        result.unshift(intNum[i]);\n        if (!(counter % 3) && i !== 0) { result.unshift(','); }\n    }\n    return result.join('') + floatNum || '';\n}\n\nconst genFactSubspace = function (fact, template) {\n    let subspace = '';\n    if (fact.subspace.length) {\n        fact.subspace.map((key, i) => { return subspace += `${i === 0 ? '' : ' and '}the ${key.field} is ${key.value}` })\n        template = template.replace(\"{{subspace}}\", subspace);\n    } else {\n        template = template.replace(\", when {{subspace}}\", '');\n        template = template.replace(\" when {{subspace}}\", '');\n        template = template.replace(\" in case of {{subspace}}\", '');\n        template = template.replace(\" given {{subspace}}\", '');\n        template = template.replace(\"When {{subspace}}, \", '');\n        template = template.replace(\"Given {{subspace}}, \", '');\n        template = template.replace(\"In case of {{subspace}}, \", '');\n    }\n    return template\n}\n\nexport default function (fact) {\n    let template = pickFactTemplate(fact);\n    let aggregate = AggregationType.NONE;\n    if (fact.measure.length > 0) {\n        aggregate = fact.measure[0].aggregate;\n    }\n    switch (fact.type) {\n        case FactType.Association:\n            template = template.replace(\"{{measure1}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{measure2}}\", convertMeasure(fact.measure[1].field));\n            template = template.replace(\"{{agg1}}\", convertAggregation(fact.measure[0].aggregate));\n            template = template.replace(\"{{agg2}}\", convertAggregation(fact.measure[1].aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter !== '') {\n                template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.toFixed(3)));\n            }\n            break;\n\n        case FactType.Categorization:\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter.length) {\n                template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                let parameterList = ''\n                fact.parameter.forEach((d, i) => {\n                    parameterList += `${i === 0 ? '' : ','} ${d}`\n                });\n                template = template.replace(\" {{no.1}}, {{no.2}}, {{no.3}}\", parameterList);\n            }\n            if (fact.focus.length) {\n                if (template.indexOf(\". {{focus}}\") > -1) {\n                    let focusValue = fact.focus[0].value.slice(0, 1).toUpperCase() + fact.focus[0].value.slice(1)\n                    template = template.replace(\"{{focus}}\", focusValue);\n                } else {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                }\n            } else {\n                template = template.replace(\", and {{focus}} needs to pay attention\", \"\");\n                template = template.replace(\", among which {{focus}} needs to pay attention\", \"\");\n                template = template.replace(\". {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.Difference:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            if (fact.focus.length >= 2) {\n                template = template.replace(\"{{focus1}}\", fact.focus[0].value);\n                template = template.replace(\"{{focus2}}\", fact.focus[1].value);\n            }\n            template = genFactSubspace(fact, template)\n            if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n            break;\n\n        case FactType.Distribution:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.breakdown));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) {\n                template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            } else {\n                template = template.replace(\" and {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.Extreme:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.breakdown));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.breakdown));\n            template = genFactSubspace(fact, template)\n\n            if (fact.parameter.length) {\n                template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                template = template.replace(\"{{parameter[1]}}\", formatNum(fact.parameter[1]));\n                template = template.replace(\"{{focus}}\", fact.parameter[2]);\n            }\n            break;\n\n        case FactType.Outlier:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            break;\n\n        case FactType.Proportion:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            if (fact.parameter) template = template.replace(\"{{parameter}}\", fact.parameter);\n            break;\n\n        case FactType.Rank:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby([fact.breakdown[fact.breakdown.length - 1]], 'plural'));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.breakdown, 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter.length >= 3) {\n                template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                template = template.replace(\"{{no.1}}\", fact.parameter[0]);\n                template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                if (fact.parameter.length === 3) {\n                    template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                } else if (fact.parameter.length > 3) {\n                    template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                } else if (fact.parameter.length === 2) {\n                    template = template.replace(\", {{no.3}}\", '');\n                }\n            } else {\n                template = ''\n            }\n            break;\n\n        case FactType.Trend:\n            let temporalBreakdown = fact.breakdown.find(d => d.type === 'temporal')\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby([temporalBreakdown], 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter) {\n                template = template.replace(\"{{parameter}}\", fact.parameter);\n                if (fact.parameter === 'increasing') {\n                    template = template.replace(\"a/an\", 'an');\n                } else {\n                    template = template.replace(\"a/an\", 'a');\n                }\n            }\n            if (fact.focus.length) {\n                template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            } else {\n                template = template.replace(\" and the value of {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.Value:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0].field));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n            break;\n\n        default:\n            break;\n    }\n    template = template.slice(0, 1).toUpperCase() + template.slice(1)\n    return template;\n}","import DataLoader from './dataloader';\nimport Fact from './fact';\nimport Visualization from './visualization';\nimport Parser from './parser';\nimport Sentencer from './sentencer';\n\nclass NarrativeChart {\n    constructor() {\n        this._container = document.createElement(\"div\");\n        this._paragraph = document.createElement(\"p\");\n        this._loader = new DataLoader();\n        this._fact = new Fact();\n        this._vis = new Visualization();\n        this._spec = {};\n        this._shouldShowCaption = false;\n        this.parser = new Parser();\n    }\n\n    container(value) {\n        if (!value) {\n            return this._container;\n        }\n        this._container = value;\n    }\n\n    paragraph(value) {\n        if (!value) {\n            return this._paragraph;\n        }\n        this._paragraph = value;\n    }\n\n    load(spec) {\n        this._spec = spec;\n    }\n\n    shouldShowCaption(value) {\n        if (!value) {\n            return this._shouldShowCaption;\n        }\n        this._shouldShowCaption = value;\n    }\n\n    generate() {\n        // STEP 0: parse specification\n        let spec = this._spec;\n        let { dataspec, factspec, pipeline } = this.parser.parse(spec);\n\n        // STEP 1: data\n        this._loader.load(dataspec)\n            .then((loaded) => {\n                // STEP 2: fact\n                this._fact.data(loaded.data());\n                this._fact.schema(loaded.schema());\n                return this._fact.process(factspec);\n            })\n            .then((fact) => {\n                // STEP 3: generate caption and setup visualization\n                this._vis.container(this.container());\n                this._vis.data(fact.data());\n                this._vis.fact(fact.fact());\n                this._vis.factdata(fact.factdata());\n                // TODO: deal with actions\n                try {\n                    let caption = Sentencer(fact.fact());\n                    this._vis.caption(caption);\n                    // console.log(\"Caption: \"+caption);\n                } catch (error) {\n                    console.log(error);\n                }\n                this._vis.run(pipeline)\n                // this._vis.visualize(chartspec);\n            })\n            .catch((reason) => {\n                console.log(reason);\n            })\n    }\n}\n\nexport default NarrativeChart;"],"sourceRoot":""}