(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[62],{127:function(t,n,e){"use strict";e.r(n),e.d(n,"getChoice",(function(){return v})),e.d(n,"getFactChartType",(function(){return b}));var r=e(4),a=e(5),c=e(9),i=e(8),o=e(20),u=e(2),s=e.n(u),d=e(90),f=(e(89),e(51)),p=e.n(f),l=e(3),h=e(32),g=e(12),y=e.n(g),_=e(27),m=e(545),T=(e(688),e(435)),E=e(436),v=(e(0),e(589),function(t){return Math.round(Math.random()*(t-1))}),b=function(t,n){var e=Object(h.a)(n,t);return 0===e.length?null:e[v(e.length)].chart},A={canDrag:function(t){return t.isReady},isDragging:function(t,n){return n.getItem().id===t.id},beginDrag:function(t,n,e){return document.body.querySelectorAll(".dragCard")[e.props.index].classList.add("dragging"),{id:t.id}},endDrag:function(t,n,e){if(t.isPlayVideo);else{if(document.body.querySelectorAll(".dragCard")[e.props.index].classList.remove("dragging"),!n.didDrop())return;var r=n.getDropResult(),a=e.props,c=a.addCard,i=a.index;if("undefined"!==typeof r.insert){var u,s=y.a.cloneDeep(t.schemaFilterLocal),d=t.schema;u=s?{schema:s}:{schema:d};var f=t.fact;if(f.chart&&""!==f.chart||(f.chart=b(u.schema,f)),f.chart===l.a.ISOTYPE_BAR_CHART&&(f.chart=l.a.VERTICAL_BAR_CHART),!(f=Object(_.a)(f)).chart||!Object(_.b)(f))return console.log("no valid",f),null;var p,h=Object(o.a)(Object(o.a)({},f),{},{breakdown:f.groupby.map((function(t){return{field:t}}))}),g={width:135,height:86};p=g?{width:g.width,height:g.height,type:"unitvis",style:"business",duration:0,showSuggestion:!0}:{size:null,type:"unitvis",style:"business",duration:0,showSuggestion:!0};var m=y.a.cloneDeep(t.dataresLocal),v={data:u=Object(o.a)(Object(o.a)({},u),{},{values:m}),fact:h,chart:p},A=t.fact,D=v;Object(E.a)(T.a.dragNewFact,1,t.fact),t.insertFact(i,r.insert),c(A,D,6e3,!1,r.insert),t.deleteUnusedFact(i);t.addBarToTimeLineBar({leftbar:140,rightbar:18,isDrag:!1},r.insert)}}}};var D=function(t){Object(c.a)(e,t);var n=Object(i.a)(e);function e(){var t;Object(r.a)(this,e);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=n.call.apply(n,[this].concat(c))).deleteFact=function(){t.props.deleteUnusedFact(t.props.index)},t}return Object(a.a)(e,[{key:"shouldComponentUpdate",value:function(t){var n=this.props.fact,e=t.fact;return!y.a.isEqual(n,e)}},{key:"render",value:function(){var t,n=this,e=this.props,r=(e.data,e.schema),a=e.fact,c=e.isReady,i=(e.filters,e.width),o=e.height,u=y.a.cloneDeep(this.props.dataresLocal),f=y.a.cloneDeep(this.props.schemaFilterLocal);t=f?{schema:f}:{schema:r};var l=p()(),h=Object(d.b)(t,l,a,u,null,{width:i,height:o},!0);return(0,this.props.connectDragSource)(s.a.createElement("li",null,s.a.createElement("div",{className:c?"factCard dragCard":"factCard"},s.a.createElement("div",{className:"delete",onClick:function(){return n.deleteFact()}}),s.a.createElement("div",{className:"vis"},h))))}}]),e}(s.a.Component);n.default=Object(m.DragSource)("card",A,(function(t,n){return{connectDragSource:t.dragSource(),isDragging:n.isDragging()}}))(D)},397:function(t,n,e){"use strict";var r="http://calliope-dev.idvxlab.com",a="https://".concat("calliope-service.idvxlab.com",":8002/api/v1"),c="https://".concat("urania-api.idvxlab.com:8006"),i="https://".concat("calliope-service.idvxlab.com",":8002/log/v1"),o="https://".concat("urania-api.idvxlab.com:8006"),u="https://".concat("urania-api.idvxlab.com:8006"),s="https://account.datacalliope.com",d={url:{share:"".concat(o,"/share"),applicationUrl:r,publicPrefix:"http://calliope-dev.idvxlab.com",loginadmintest:"".concat(a,"/loginadmintest"),loginRedirectUrl:"".concat(s,"/#/login?response_type=code&client_id=").concat("6dcd0f8b-6990-4d69-9018-29b3351aa6ff","&grant_type=authorization_code&redirect_uri=").concat(r),logoutRedirectUrl:"".concat(r,"/#/logout"),authenUrl:s,accessToken:"".concat(a,"/accesstoken"),userImage:"".concat("https://service.datacalliope.com:8001","/img"),checkToken:"".concat(a,"/checktoken"),logout:"".concat(a,"/logout"),logoutAuthSystem:"".concat("https://service.datacalliope.com:8001","/logout"),users:"".concat(a,"/users"),activitiesApi:"".concat(i,"/users"),uploadDataPrefix:o,uploadData:"".concat(o,"/upload"),uploadGraphData:"".concat(o,"/uploadGraph"),fetch:"".concat(o,"/data/share"),factScoring:"".concat(c,"/fact"),generateRandomly:"".concat(c,"/generate"),generateGraphRandomly:"".concat(c,"/generateGraphRandomly"),filteredGenerate:"".concat(c,"/filteredgenerate"),question2gif:"".concat(u,"/edit_decompose")}};n.a=d},405:function(t,n,e){"use strict";e.d(n,"g",(function(){return p})),e.d(n,"d",(function(){return h})),e.d(n,"e",(function(){return g})),e.d(n,"b",(function(){return y})),e.d(n,"f",(function(){return _})),e.d(n,"c",(function(){return T})),e.d(n,"a",(function(){return v}));var r=e(113),a=e.n(r),c=e(419),i=e(432),o=e.n(i),u=e(543),s=function(t,n){var e="";return e+=t,"object"===typeof n&&0!==Object.keys(n).length&&(e+="?".concat(Object(u.stringify)(n))),e},d=function(t){var n=t.url,e=t.method,r=t.param,a=t.data;return new Promise((function(t,c){o()({method:e,url:s(n,r),data:a}).then((function(n){n.status>=400?c():200===n.status||201===n.status||204===n.status?t(n.data):c()})).catch((function(t){c()}))}))},f=e(397);function p(t){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){o()({method:"post",url:"".concat(f.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:n}).then((function(n){n.status>=400?e():200===n.status||201===n.status||204===n.status?t(n.data):e()})).catch((function(t){e()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,n){return o()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:n})}function g(t,n){return o()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:n})}function y(t,n,e,r){return o()({method:"POST",url:f.a.url.factScoring,headers:{"Content-Type":"application/json; charset=utf-8"},data:{file_name:t,fact:n,filters:e,method:r}})}function _(t){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){o()({method:"post",url:"".concat(f.a.url.share),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:{share_json:n}}).then((function(n){n.status>=400?e():200===n.status||201===n.status||204===n.status?t(n.data):e()})).catch((function(t){e()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o()({method:"get",url:"".concat(f.a.url.fetch,"/").concat(n,".json"),config:{headers:{"Content-Type":"application/json; charset=utf-8"}}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,n){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function t(n,e){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({url:"".concat(f.a.url.activitiesApi,"/lite/activities"),method:"post",param:{},data:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},429:function(t,n){var e,r,a=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===c||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:c}catch(t){e=c}try{r="function"===typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var u,s=[],d=!1,f=-1;function p(){d&&u&&(d=!1,u.length?s=u.concat(s):f=-1,s.length&&l())}function l(){if(!d){var t=o(p);d=!0;for(var n=s.length;n;){for(u=s,s=[];++f<n;)u&&u[f].run();f=-1,n=s.length}u=null,d=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function h(t,n){this.fun=t,this.array=n}function g(){}a.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new h(t,n)),1!==s.length||d||o(l)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},435:function(t,n,e){"use strict";n.a={uploadFile:1,generateFactSheet:2,downloadFile:3,editTopic:4,generateMoreFacts:5,editLayout:6,dragNewFact:7,deleteFact:8,editFactCaption:9,editDiagram:10,editSheetCaption:11}},436:function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var r=e(405);function a(t,n,e){var a={action:t,objectid:n,meta:JSON.stringify(e)};r.a("users",a).then((function(t){console.log(t)})).catch((function(t){console.log(e)}))}},589:function(t,n,e){"use strict";e.d(n,"r",(function(){return a})),e.d(n,"y",(function(){return c})),e.d(n,"v",(function(){return i})),e.d(n,"u",(function(){return o})),e.d(n,"M",(function(){return u})),e.d(n,"f",(function(){return s})),e.d(n,"k",(function(){return d})),e.d(n,"h",(function(){return f})),e.d(n,"x",(function(){return p})),e.d(n,"i",(function(){return l})),e.d(n,"p",(function(){return h})),e.d(n,"c",(function(){return g})),e.d(n,"d",(function(){return y})),e.d(n,"e",(function(){return _})),e.d(n,"G",(function(){return m})),e.d(n,"q",(function(){return T})),e.d(n,"a",(function(){return E})),e.d(n,"b",(function(){return v})),e.d(n,"o",(function(){return b})),e.d(n,"n",(function(){return A})),e.d(n,"E",(function(){return D})),e.d(n,"J",(function(){return O})),e.d(n,"C",(function(){return I})),e.d(n,"H",(function(){return C})),e.d(n,"D",(function(){return R})),e.d(n,"A",(function(){return S})),e.d(n,"F",(function(){return w})),e.d(n,"K",(function(){return N})),e.d(n,"z",(function(){return x})),e.d(n,"I",(function(){return L})),e.d(n,"L",(function(){return j})),e.d(n,"B",(function(){return F})),e.d(n,"w",(function(){return G})),e.d(n,"s",(function(){return k})),e.d(n,"m",(function(){return H})),e.d(n,"t",(function(){return P})),e.d(n,"g",(function(){return M})),e.d(n,"j",(function(){return B})),e.d(n,"l",(function(){return U}));var r=e(7),a=function(t,n,e,a,c){return{type:r.a.INIT_VIDOE_CARD,facts:t,schemaFilter:n,filename:e,datares:a,schema:c}},c=function(){return{type:r.a.REPLAY_VIDEO_SLICE}},i=function(t){return{type:r.a.PLAY_VIDEO_SLICE,index:t}},o=function(){return{type:r.a.PLAY_VIDEO_CONTINUE}},u=function(){return{type:r.a.STOP_PLAY_VIDEO_CONTINUE}},s=function(){return{type:r.a.ADD_NOW_VIDEO_TIME}},d=function(t){return{type:r.a.CHANGE_NOW_VIDEO_TIME,time:t}},f=function(t){return{type:r.a.CHANGE_ALL_VIDEO_TIME,time:t}},p=function(t){return{type:r.a.REMOVE_CARD,index:t}},l=function(t,n){return{type:r.a.CHANGE_CARD,origin:t,target:n}},h=function(t,n){return{type:r.a.EXCHANGE_CARD,index:t,card:n}},g=function(t,n,e,a,c){return{type:r.a.ADD_CARD,fact:t,specs:n,time:e,isGeneratedByAlg:a,insert:c}},y=function(t,n){return{type:r.a.ADD_CARDS,cards:t,insert:n}},_=function(){return{type:r.a.ADD_EMPTY_CARD}},m=function(t){return{type:r.a.SET_LEFTSIDER_CONTENT,content:t}},T=function(t){return{type:r.a.INIT_TIME_LINE_BAR_WDITH,length:t}},E=function(t,n){return{type:r.a.ADD_BAR_TO_TIME_LINE_BAR,bar:t,index:n}},v=function(t,n){return{type:r.a.ADD_BARS_TO_TIME_LINE_BAR,bars:t,index:n}},b=function(t){return{type:r.a.DELETE_BAR_FROM_TIME_LINE_BAR,index:t}},A=function(t,n){return{type:r.a.CHANGE_TIME_LINE_BAR,origin:t,target:n}},D=function(t,n){return{type:r.a.SET_LEFT_BAR_WIDTH,index:t,width:n}},O=function(t,n){return{type:r.a.SET_RIGHT_BAR_WIDTH,index:t,width:n}},I=function(t){return{type:r.a.SET_DRAG_DIRECTION,direction:t}},C=function(t){return{type:r.a.SET_MOUSE_DOWN_STATE,mouseDown:t}},R=function(t,n){return{type:r.a.SET_DRAG_STATE,index:t,drag:n}},S=function(t){return{type:r.a.SET_CURRENT_X,clientx:t}},w=function(t){return{type:r.a.SET_LEFT_OFFSET_WIDTH,offset:t}},N=function(t){return{type:r.a.SET_RIGHT_OFFSET_WIDTH,offset:t}},x=function(t){return{type:r.a.SET_CURRENT_BAR_INDEX,index:t}},L=function(t){return{type:r.a.SET_POSITION,position:t}},j=function(t){return{type:r.a.SET_SCENE_SCALE,scale:t}},F=function(t){return{type:r.a.SET_DRAG_CURSOR,cursor:t}},G=function(t,n){return{type:r.a.QUESTION_2_GIF,question:t,narrative_spec:n}},k=function(t){return{type:r.a.ISGENERATINGGIF,isGenerating:t}},H=function(t){return{type:r.a.CHANGE_TEMP_SPEC,temp_spec:t}},P=function(t){return{type:r.a.OPERATOR_CHANGE,operatorType:t}},M=function(t){return{type:r.a.ANIMATION_CHANGE,animationType:t}},B=function(t){return{type:r.a.CHANGE_KEYS,keys:t}},U=function(t,n){return{type:r.a.CHANGE_OPERATOR,origin:t,target:n}}},688:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r={trend:"#8dd3c7",extreme:"#f0e68c",value:"#bebada",categorization:"#fb8072",difference:"#80b1d3",proportion:"#fdb462",distribution:"#b3de69",rank:"#fccde5",association:"#d9d9d9",outlier:" #bc80bd",null:"white"}}}]);
//# sourceMappingURL=62.0176e0bc.chunk.js.map