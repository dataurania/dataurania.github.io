{"version":3,"sources":["pages/EditPage/EditDataVideos/TimeLine/TimelineRuler.js","pages/EditPage/EditDataVideos/TimeLine/Needle.js","../node_modules/classnames/index.js"],"names":["TimelineRuler","props","definedTime","d","minute","parseInt","second","calMarkLength","marginLeft","state","screenWidth","screenX","setSceneScale","setPosition","clickNeedle","bind","clickRuler","e","x","changedPosition","this","keepOneDecimalPoint","changeIndex","cardItems","length","i","formerTotalLength","j","time","sceneScale","playVideoSlice","changeNowVideoTime","Math","floor","n","timeMarks","style","height","width","float","backgroundColor","marginTop","key","fontSize","index","push","className","scenePositionWithScale","scenePosition","display","justifyContent","id","position","left","borderRadius","zIndex","opacity","onClick","isPlayVideo","Component","Needle","hasOwn","hasOwnProperty","classNames","classes","arguments","arg","argType","Array","isArray","inner","apply","toString","Object","prototype","call","join","module","exports","default"],"mappings":"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","file":"static/js/64.a727e045.chunk.js","sourcesContent":["import { templateSettings } from 'lodash';\nimport React, { Component } from 'react';\nimport { Rnd } from \"react-rnd\";\nimport Needle from './Needle';\nimport './TimelineRuler.css';\n\nconst performingHeight = 228;\nconst realHeight = 24;\nconst width = 12;\nconst offset = 21;\n\n\n\nexport default class TimelineRuler extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state ={\n            screenWidth: 1000,\n            screenX: 0,\n        }\n        this.props.setSceneScale(1);\n        this.props.setPosition(0);\n        \n        this.clickNeedle = this.clickNeedle.bind(this);\n        this.clickRuler = this.clickRuler.bind(this);\n    }\n\n    /* shouldComponentUpdate(nextProps, nextState){\n        console.log(this.props)\n        console.log('test')\n    } */\n\n    /* componentDidUpdate(){\n        this.props.setSceneScale(1);\n        this.props.setPosition(0);\n    } */\n\n\n    clickNeedle() {\n        \n    }\n\n    clickRuler(e) {\n        /* const clickPosition = e.nativeEvent.offsetX;\n        var newX = clickPosition - offset;\n        if (newX < 0) {\n            newX = 0\n        } else if (newX > this.props.sceneWidth) {\n            newX = this.props.sceneWidth;\n        }\n        const changedPosition = this.keepOneDecimalPoint(newX / 3);\n        this.props.setPosition(changedPosition);\n        //点击尺子切换到对应的图表\n        let changeIndex = this.props.cardItems.length-1;\n        for(let i= 0;i<this.props.cardItems.length;i++){\n            let formerTotalLength = 0;\n            for(let j =0;j<=i;j++){\n                formerTotalLength += 47.3 * this.props.cardItems[j].time/ 6000 /this.props.sceneScale+ 7.3\n            }\n            if(changedPosition-formerTotalLength<=0)\n            {\n                changeIndex = i;\n                break;\n            }\n        }\n        this.props.playVideoSlice(changeIndex);\n        this.props.changeNowVideoTime((changedPosition-7.3*changeIndex)/47.3*6000*this.props.sceneScale) */\n        //this.props.unselectElement();\n    }\n\n    changeNeedlePlace(x) {\n        let changedPosition = this.keepOneDecimalPoint(x / 3);\n        this.props.setPosition(changedPosition);\n        //点击尺子切换到对应的图表\n        let changeIndex = this.props.cardItems.length-1;\n        for(let i= 0;i<this.props.cardItems.length;i++){\n            let formerTotalLength = 0;\n            for(let j =0;j<=i;j++){\n                formerTotalLength += 47.3 * this.props.cardItems[j].time/ 6000 /this.props.sceneScale+ 7.3\n            }\n            if(changedPosition-formerTotalLength<=0)\n            {\n                changeIndex = i;\n                break;\n            }\n        }\n        this.props.playVideoSlice(changeIndex);\n        this.props.changeNowVideoTime((changedPosition-7.3*changeIndex)/47.3*6000*this.props.sceneScale)\n        //this.props.unselectElement();\n    }\n\n    keepOneDecimalPoint(x) {\n        return Math.floor(x * 10) / 10;\n    }\n\n    definedTime = (d) => {\n        let minute = parseInt(d/60);\n        let second = d % 60;\n        let time = null;\n        \n        if(minute && second) {\n            time = `${minute}m${second}s`\n        } else if(!second) {\n            time = `${minute}m`\n        } else {\n            time = `${second}s`\n        }\n        return time;\n    }\n\n    calMarkLength = (d) => {\n        let marginLeft = 0;\n        if(d >= 4) marginLeft = 20 / 2;\n        if(d === 3) marginLeft = 22 / 2;\n        if(d === 2) marginLeft = 18 / 2;\n        return -marginLeft\n    }\n\n    // 时间标记 0s 3s 6s 12s\n    timeMarks() {\n        if(this.props.sceneScale==1)\n        {\n            const n = 61 * this.props.sceneScale;\n            //第一个时间标记：0s\n            let timeMarks = [\n            <div>\n                <div style={{ height: 4, width: 89, float: 'left', backgroundColor: 'white',marginLeft:-11,marginTop:-6 }}>\n                    <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                </div>\n                <div key={0} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent',marginTop:3 }}>\n                    <p style={{ marginTop: -8, marginLeft: -6, float: 'left', fontSize: '12px' }}>0s</p>\n                </div>\n            </div>\n            ];\n\n            //剩下的时间标记 3s 6s 9s 等等\n            for (let index = 1; index < n; index++) {\n                \n                let definedTime=this.definedTime(index);\n                if (index % (3 * this.props.sceneScale) !== 0) {\n\n                } else {\n                    timeMarks.push(\n                        <div>\n                            <div style={{ height: 4, width: 89, float: 'left', backgroundColor: 'white',marginLeft:-13,marginTop:-6 }}>\n                                <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                            </div>\n                            <div key={index} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent' ,marginTop:3}}>\n                                <p className='pTime' style={{ marginTop: -8, marginLeft: this.calMarkLength(definedTime.length), float: 'left', fontSize: '12px' }}>{definedTime}</p>\n                            </div>\n                        </div>\n                    )\n                }\n            }\n            return timeMarks;\n        }\n        else\n        {\n            const n = 61 * this.props.sceneScale;\n            //第一个时间标记：0s\n            let timeMarks = [\n            <div>\n                <div style={{ height: 4, width: 72, float: 'left', backgroundColor: 'white',marginLeft:-11,marginTop:-6 }}>\n                    <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                </div>\n                <div key={0} style={{ height: 2, width: 72, float: 'left', backgroundColor: 'transparent',marginTop:3 }}>\n                    <p style={{ marginTop: -8, marginLeft: -6, float: 'left', fontSize: '12px' }}>0s</p>\n                </div>\n            </div>\n            ];\n    \n            //剩下的时间标记 3s 6s 9s 等等\n            for (let index = 1; index < n; index++) {\n                \n                let definedTime=this.definedTime(index);\n                if (index % (3 * this.props.sceneScale) !== 0) {\n    \n                } else {\n                    timeMarks.push(\n                        <div>\n                            <div style={{ height: 4, width: 106, float: 'left', backgroundColor: 'white',marginLeft:-13,marginTop:-6 }}>\n                                <div style={{ marginTop: 0, height: 14, width: 1, float: 'left', backgroundColor: 'gray' }} />\n                            </div>\n                            <div key={index} style={{ height: 2, width: 80, float: 'left', backgroundColor: 'transparent' ,marginTop:3}}>\n                                <p className='pTime' style={{ marginTop: -8, marginLeft: this.calMarkLength(definedTime.length), float: 'left', fontSize: '12px' }}>{definedTime}</p>\n                            </div>\n                        </div>\n                    )\n                }\n            }\n            return timeMarks;\n        }\n    }\n\n    render() {\n        const{scenePosition} = this.props;\n        const scenePositionWithScale = scenePosition;\n        let height = realHeight;\n        \n        let needle = <Rnd\n            style={{ zIndex: 2 }}\n            size={{ width: width, height: height }}\n            position={{ x: scenePositionWithScale, y: 0 }}\n            bounds='parent'\n            disableDragging={false}\n            enableResizing={{}}\n            enableUserSelectHack={false}\n            /* onDrag={(e, d) => {\n                this.props.isPlayVideo ?\n                null :\n                this.changeNeedlePlace(d.x);\n            }}\n            onDragStop={(e, d) => {\n                this.props.isPlayVideo ?\n                null :\n                this.changeNeedlePlace(d.x);\n            }} */\n        >\n            <Needle/>\n        </Rnd>;\n\n        return (\n            <div className='timeline-ruler' style={{display: 'flex', justifyContent:'center'}}>\n                <div\n                    id={\"timeline-ruler\"}\n                    style={{\n                        height: height, width: '95%' , backgroundColor: 'transparent', position: 'relative', left: '-7', display: 'flex', justifyContent:'center'\n                    }}>\n                    {/* <div className=\"timeMarks\" style={{ width: '100%', marginLeft: offset + 3, marginTop: 4, marginRight: -offset, backgroundColor: 'transparent', position: 'absolute', zIndex: 0 }}>\n                        <div style={{ width: '100%', display: 'flex'}}>\n                            {this.timeMarks()}\n                        </div>\n                    </div> */}\n                    <div className=\"timeMarks\" id={\"timeMarks\"} style={{height: 3, width: '100%',borderRadius:15 ,marginTop:10, backgroundColor: '#F6F6F7', position: 'absolute', zIndex: 0}}>\n\n                    </div>\n                    <div\n                        id={'timeline-ruler-clickable-area'}\n                        style={{ height: height, width: '100%', position: 'absolute', zIndex: 1, opacity: 0 }}\n                        onClick={this.props.isPlayVideo ? null : e => this.clickRuler(e)}\n                    />\n                    {/* {needle} */}\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\n\nexport default class Needle extends Component {\n    render() {\n        return (\n            <div style ={{marginLeft:-10}}>\n                <div style={{width: 12, height: 8}}/>\n                {/* <div id='triangle-down'/> */}\n                <div style={{width: 15, height: 15, backgroundColor: '#ff9c2b', marginLeft: 5, borderRadius:9, marginTop:-2}}/>\n            </div>\n        )\n    }\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}