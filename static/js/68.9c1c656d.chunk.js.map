{"version":3,"sources":["pages/EditPage/EditDataVideos/TimeLine/PerSeekBar.js","pages/EditPage/EditDataVideos/TimeLine/TimeSeekBar.js","tool/formateTime.js"],"names":["PerSeekBar","recordLocation","e","props","setMouseDownState","setCurrentX","clientX","setLeftOffsetWidth","videotime","offsetWidth","onMouseDownLeft","console","log","index","stopPropagation","setDragDirection","setCurrentBarIndex","onMouseDownRight","setDragCursor","changeToDrag","drag","bar","isDrag","setDragState","this","time","num","barScale","barWidthList","length","className","style","width","minWidth","ref","current","leftbar","onMouseDown","onClick","formateTime","cardItems","isGeneratedByAlg","background","React","Component","TimeSeekBar","onMouseMove","isMouseDown","currentBarIndex","dragDirection","currentX","leftOffsetWidth","rightOffsetWidth","setLeftBarWidth","offsetX","setRightBarWidth","distance","nextProps","nextState","setSceneScale","dragCursor","cursor","map","item","key","msec","t","Number","parseInt","appendZero","sec","min","n","toLocaleString","minimumIntegerDigits"],"mappings":"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","file":"static/js/68.9c1c656d.chunk.js","sourcesContent":["import React from 'react';\r\nimport formateTime from '@/tool/formateTime.js'\r\nexport default class PerSeekBar extends React.Component {\r\n\r\n    recordLocation = (e) => {\r\n        this.props.setMouseDownState(true)\r\n        this.props.setCurrentX(e.clientX)\r\n        this.props.setLeftOffsetWidth(this.videotime.offsetWidth)\r\n        // this.props.setRightOffsetWidth(this.drag.offsetWidth)\r\n    }\r\n    onMouseDownLeft = (e) => {\r\n        console.log(this.props.index, 'mouseLeftDown')\r\n        e.stopPropagation();\r\n        this.props.setDragDirection('left')\r\n        //记录当前的index\r\n        this.props.setCurrentBarIndex(this.props.index)\r\n        this.recordLocation(e)\r\n    }\r\n\r\n    //鼠标按下\r\n    onMouseDownRight = (e) => {\r\n        e.stopPropagation();\r\n        this.props.setDragDirection('right')\r\n        //记录当前的index\r\n        this.props.setCurrentBarIndex(this.props.index)\r\n        //TODO:可以记录当前的id号\r\n        this.recordLocation(e)\r\n        this.props.setDragCursor('ew-resize')\r\n    }\r\n\r\n    changeToDrag = (e) => {\r\n        e.stopPropagation();\r\n        let drag = this.props.bar.isDrag\r\n        this.props.setDragState(this.props.index, !drag)\r\n    }\r\n\r\n    render() {\r\n        const { bar, index, time } = this.props\r\n        let num = index + 1 < 10 ? (\"0\" + (index + 1)) : (\"\" + (index + 1))\r\n        var barScale = this.props.barWidthList.length>=9?2.03:1\r\n        //先采用第一个作为测试\r\n        return (\r\n            <div className='per-seek-bar' >\r\n                {\r\n                    index !== 0 ? (\r\n                        <div className='right-btn' style={{ width: '24px', minWidth: '24px' }}>\r\n                            <div className='drag-icon'></div>\r\n                        </div>) : null\r\n                }\r\n\r\n                {\r\n                    bar.isDrag ?\r\n                        (\r\n                            <div\r\n                                className='left-bar-drag'\r\n                                ref={current => this.videotime = current}\r\n                                style={\r\n                                    {\r\n                                        width: bar.leftbar/barScale,\r\n                                        minWidth: 140/barScale,\r\n                                        // position: dragDirection === 'left' && isMouseDown && currentBarIndex === index ? 'absolute' : 'relative',\r\n                                        // left: dragDirection === 'left' && isMouseDown && currentBarIndex === index ? leftDist : '0px'\r\n                                    }\r\n                                }>\r\n                                <div className='drag-line' onMouseDown={this.onMouseDownLeft}></div>\r\n                                <div\r\n                                    className='drag-time-text'                 \r\n                                    style={{ width: (bar.leftbar - 13)/barScale, minWidth: 127/barScale }}\r\n                                    onClick={this.changeToDrag}>\r\n                                    {formateTime(time)}\r\n                                </div>\r\n                                <div className='drag-line-box' onMouseDown={this.onMouseDownRight}>\r\n                                    <div className='drag-line' ></div>\r\n                                </div>\r\n\r\n                            </div>) :\r\n                        (\r\n                            <div\r\n                                className='left-bar-undrag'\r\n                                onClick={this.changeToDrag}\r\n                                style={ this.props.cardItems[index].isGeneratedByAlg?{background:\"#E4F2FB\",width: bar.leftbar/barScale,minWidth: 140/barScale}:{background:\"#FFE1A4\",width: bar.leftbar/barScale,minWidth: 140/barScale}\r\n\r\n                                 }>\r\n                                {num}\r\n                            </div>\r\n                        )\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { convertSizeToCssValue } from 'react-split-pane/lib/SplitPane';\r\nimport PerSeekBar from './PerSeekBar';\r\n\r\nexport default class TimeSeekBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if(this.props.barWidthList!=nextProps.barWidthList)\r\n        {\r\n            if(nextProps.barWidthList.length>=9)\r\n            {\r\n                nextProps.setSceneScale(2)\r\n                return true;\r\n            }\r\n            else\r\n            {\r\n                nextProps.setSceneScale(1)\r\n                return true;\r\n            }\r\n        }\r\n        else\r\n            return false;\r\n    }\r\n\r\n    //鼠标移动\r\n    onMouseMove = (e) => {\r\n        if (!this.props.isMouseDown || this.props.currentBarIndex < 0) return      \r\n        const { dragDirection, currentX, leftOffsetWidth, rightOffsetWidth, currentBarIndex, setLeftBarWidth, setRightBarWidth } = this.props\r\n        const offsetX = e.clientX - currentX;\r\n        let distance=leftOffsetWidth+ offsetX\r\n        console.log(leftOffsetWidth,leftOffsetWidth+ offsetX)\r\n\r\n        var barScale = this.props.barWidthList.length>=9?2.03:1\r\n        \r\n        if(leftOffsetWidth+ offsetX<140/barScale){\r\n            if(leftOffsetWidth===140/barScale)return\r\n            setLeftBarWidth(currentBarIndex, 140)\r\n            return\r\n        }\r\n        if (dragDirection === 'right') {\r\n            setLeftBarWidth(currentBarIndex, distance*barScale)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { barWidthList, cardItems ,dragCursor} = this.props\r\n        return (\r\n            <div className='time-seek-bar'>\r\n                <div\r\n                    className='all-seek-bar-slide'\r\n                    onMouseMove={this.onMouseMove}\r\n                    style={{cursor:dragCursor}}>\r\n                    {\r\n                        barWidthList.map((item, index) => {\r\n                            return (\r\n                                <PerSeekBar {...this.props} bar={item} index={index} key={index} time={cardItems.length === 0 ? 6000 : cardItems[index].time} />\r\n                            )\r\n                        })}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","export default function (t = 0) {\r\n    let msec\r\n    Number.parseInt(t % 1000)<100? msec = appendZero(Number.parseInt(t % 1000)): msec = appendZero(Number.parseInt(t % 1000/10))\r\n    \r\n    // const msec = appendZero(Number.parseInt(t % 1000))\r\n    const sec = appendZero(Number.parseInt(t/1000%60))\r\n    const min = appendZero(Number.parseInt(t/60000%60));\r\n\r\n    return `${min}:${sec}.${msec}`;\r\n\r\n}\r\n\r\nconst appendZero = n=>n.toLocaleString({},{minimumIntegerDigits:2});"],"sourceRoot":""}