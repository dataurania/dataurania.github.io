{"version":3,"sources":["pages/EditPage/EditDataVideos/VideoSliceCardList/UnitVisDraw.js"],"names":["UnitVisDraw","editClickSlice","index","props","setLeftsiderContent","ActionType","SET_EDIT_SLICE","nextProps","nextState","console","log","this","pre","narrative_spec","next","is","Immutable","fromJS","vis","className","onClick","React","Component"],"mappings":"wNAKqBA,E,4MAEjBC,eAAiB,SAACC,GAqCd,EAAKC,MAAMC,oBAAoBC,IAAWC,iB,2DAI9C,SAAsBC,EAAWC,GAC7BC,QAAQC,IAAI,aAAaC,KAAKR,OAC9B,IAAMS,EAAMD,KAAKR,MAAMU,eACjBC,EAAOP,EAAUM,eAEvB,OAAKE,YAAGC,IAAUC,OAAOL,GAAMI,IAAUC,OAAOH,M,oBAgBpD,WAAU,IAAD,OACL,EAAuBH,KAAKR,MAApBe,EAAR,EAAQA,IAAKhB,EAAb,EAAaA,MACb,OACI,yBAAKiB,UAAU,aAAaC,QAAS,kBAAM,EAAKnB,eAAeC,KAC1DgB,O,GApEwBG,IAAMC","file":"static/js/74.2eb7aba8.chunk.js","sourcesContent":["import React from 'react';\r\nimport ActionType from '@/action/type';\r\nimport { is } from 'immutable'\r\nimport Immutable from 'immutable'\r\n\r\nexport default class UnitVisDraw extends React.Component {\r\n\r\n    editClickSlice = (index) => {\r\n        /* if(this.props.isPlayVideo)\r\n        {\r\n            null\r\n        }\r\n        else\r\n        {\r\n            null\r\n        } */\r\n        // 这里todo\r\n        //改变videoIndex+视频中显示的内容\r\n        // if(this.props.cardItems[index].spec == 'empty')\r\n        // {\r\n        //     var videoChart = document.querySelector('[id=\"video-chart\"]');\r\n        //     videoChart.style.display = 'none';\r\n        //     var caption = document.querySelector('[id=\"caption\"]');\r\n        //     caption.style.display = 'none';\r\n        // }\r\n        // else\r\n        // {\r\n        //     var videoChart = document.querySelector('[id=\"video-chart\"]');\r\n        //     videoChart.style.display = 'block';\r\n        //     var caption = document.querySelector('[id=\"caption\"]');\r\n        //     caption.style.display = 'block';\r\n        // }\r\n        // this.props.playVideoSlice(index)\r\n        // //改变指针的位置\r\n        // let needleNow = 0;\r\n        // for (let x = 0; x<index ;x++){\r\n        //     needleNow += 47.3 * this.props.cardItems[x].time / 6000 /this.props.sceneScale+ 7.3\r\n        // }\r\n        // this.props.setPosition(needleNow);\r\n        // //点击卡片让卡片成为正在编辑的卡片\r\n        // this.props.changeCurrentEditing(true,this.props.facts[index])\r\n        // this.props.changeNowVideoTime((needleNow-7.3*index)/47.3*6000*this.props.sceneScale)\r\n        \r\n        //改变左侧栏中显示的内容\r\n        this.props.setLeftsiderContent(ActionType.SET_EDIT_SLICE)\r\n        \r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        console.log(\"~~~~~~~~~~\",this.props)\r\n        const pre = this.props.narrative_spec\r\n        const next = nextProps.narrative_spec\r\n        //进行深层对比，实现更精确的渲染\r\n        if (!is(Immutable.fromJS(pre), Immutable.fromJS(next))\r\n            ){\r\n            // console.log(this.props.index,'渲染！');\r\n            //如果当前的videoIndex对应的vis重新渲染改变了，那么currentSpec应该再重新取一下\r\n            /* if(index===videoIndex){\r\n                playVideoSlice(index)\r\n            }\r\n            console.log(\"fresh : \"+index) */\r\n            return true;\r\n        }\r\n        else \r\n        {\r\n            return false;\r\n        }\r\n    } \r\n\r\n    render() {\r\n        const { vis, index } = this.props\r\n        return (\r\n            <div className='below-card' onClick={() => this.editClickSlice(index)}>\r\n                {vis}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n"],"sourceRoot":""}