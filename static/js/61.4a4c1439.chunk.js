(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[61,73,74,75],{117:function(t,e,n){"use strict";n.r(e),n.d(e,"getChoice",(function(){return A})),n.d(e,"getFactChartType",(function(){return L})),n.d(e,"default",(function(){return D}));var a=n(113),r=n.n(a),c=n(20),o=n(10),i=n(419),s=n(4),u=n(5),p=n(9),l=n(8),d=n(2),f=n.n(d),h=n(428),m=n(590),g=(n(90),n(51)),v=n.n(g),b=(n(7),n(121)),y=n(3),j=(n(122),n(123)),O=n(405),T=n(83),w=n(397),x=n(523),k=n(52),E=n(27),S=n(32),C=n(12),_=n.n(C),A=function(t){return Math.round(Math.random()*(t-1))},L=function(t,e){var n=Object(S.a)(e,t);return 0===n.length?null:n[A(n.length)].chart},D=function(t){Object(p.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return(t=e.call.apply(e,[this].concat(u))).deleteVideoSlice=function(e){t.props.isPlayVideo||(t.props.removeCard(e),t.props.deleteBarFromTimeLineBar(e),t.props.deleteFact(e))},t.generateTransitionFacts=function(e){new Promise(function(){var n=Object(i.a)(r.a.mark((function n(a,i){var s,u,p,l,d,f,h,m,g,v,b,j,S,C,A,D,I,N,R,F,P,B,G,U,V,J,M,H,z,q;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("generateTransitionFacts"+e),s=t.props.cardItems[e],u=t.props.cardItems[e+1],p=t.props.fileName,l={type:s.fact.type,measure:s.fact.measure,subspace:s.fact.subspace,groupby:s.fact.groupby,focus:s.fact.focus},d={type:u.fact.type,measure:u.fact.measure,subspace:u.fact.subspace,groupby:u.fact.groupby,focus:u.fact.focus},t.setState({operateState:T.a.GENERATING}),t.props.isUpdateEditing(!0),f={file_name:p,max_story_length:4,method:"guided",start:l,end:d},n.next=11,O.d(w.a.url.generateRandomly,f);case 11:(h=n.sent).data.fail&&(console.log("fail"),t.setState({operateState:T.a.ADD_FAILED,errorMessage:h.data.fail}),i()),h.data.error&&(console.log("error"),t.setState({operateState:T.a.ADD_FAILED,errorMessage:h.data.error}),i()),m=h.data.story.facts,g=[],v=Object(o.a)(m);try{for(v.s();!(b=v.n()).done;)j=b.value,(S=new x.a(j.type,j.measure,j.subspace,j.groupby,j.focus,j.parameter,"",j.score,j.information,j.significance)).generatedScript=Object(k.a)(S,t.state.lang),g.push(S)}catch(r){v.e(r)}finally{v.f()}console.log(g.length),C=0,A=[],D=[],I=0,N=g;case 23:if(!(I<N.length)){n.next=60;break}if(R=N[I],1!=g.length&&2!=g.length){n.next=27;break}return n.abrupt("break",60);case 27:if(0!=C&&C!=g.length-1){n.next=30;break}return C++,n.abrupt("continue",57);case 30:if(F=_.a.cloneDeep(t.props.schemaFilterLocal),P=t.props.schema,B=void 0,B=F?{schema:F}:{schema:P},R.chart&&""!==R.chart||(R.chart=L(B.schema,R)),R.chart===y.a.ISOTYPE_BAR_CHART&&(R.chart=y.a.VERTICAL_BAR_CHART),R.chart&&Object(E.b)(R)){n.next=40;break}return console.log("no valid",R),n.abrupt("return",null);case 40:G=_.a.cloneDeep(t.props.dataresLocal),B=Object(c.a)(Object(c.a)({},B),{},{values:G}),null,V=void 0,V=(U={width:135,height:86})?{width:U.width,height:U.height,type:"unitvis",style:"business",duration:0,showSuggestion:!0}:{size:null,type:"unitvis",style:"business",duration:0,showSuggestion:!0},J=Object(c.a)(Object(c.a)({},R),{},{breakdown:R.groupby.map((function(t){return{field:t}})),index:C}),M={data:B,fact:J,chart:V},6e3,H=e+C,t.props.insertFactByFact(R,H),z={fact:R,spec:M,time:6e3,isGeneratedByAlg:!0},A.push(z),q={leftbar:140,rightbar:18,isDrag:!1},D.push(q),C++;case 57:I++,n.next=23;break;case 60:t.props.addCards(A,e+1),t.props.addBarsToTimeLineBar(D,e+1),t.setState({operateState:T.a.GENERATED}),t.props.isUpdateEditing(!1),a(h);case 65:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.videoIndex,a=e.index,r=(_.a.cloneDeep(this.props.dataresLocal),_.a.cloneDeep(this.props.schemaFilterLocal)),c=this.props.schema;var o,i=v()();return o="empty"!==this.props.spec?Object(m.b)(this.props.spec,i):null,console.log("herererre"),f.a.createElement("div",Object.assign({className:"video-slice-card",ref:this.props.provided.innerRef},this.props.provided.draggableProps,this.props.provided.dragHandleProps),f.a.createElement("div",{className:"complete-card",style:{background:"#f4f4f4"}},f.a.createElement("div",{className:"above-card"},f.a.createElement("div",{className:"fact-description"}),f.a.createElement("div",{className:"delete-card-btn",onClick:function(){return t.deleteVideoSlice(a)}},f.a.createElement(h.a,null))),f.a.createElement(b.default,Object.assign({index:a,videoIndex:n,vis:o,playVideoSlice:this.props.playVideoSlice,setLeftsiderContent:this.props.setLeftsiderContent},this.props)),f.a.createElement(j.default,Object.assign({spec:this.props.spec,videoIndex:n,index:a},this.props))))}}]),n}(f.a.Component)},121:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var a=n(4),r=n(5),c=n(9),o=n(8),i=n(2),s=n.n(i),u=n(7),p=n(549),l=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).editClickSlice=function(e){t.props.setLeftsiderContent(u.a.SET_EDIT_SLICE)},t}return Object(r.a)(n,[{key:"shouldComponentUpdate",value:function(t,e){console.log("~~~~~~~~~~",this.props);var n=this.props.narrative_spec,a=t.narrative_spec;return!Object(p.b)(p.a.fromJS(n),p.a.fromJS(a))}},{key:"render",value:function(){var t=this,e=this.props,n=e.vis,a=e.index;return s.a.createElement("div",{className:"below-card",onClick:function(){return t.editClickSlice(a)}},n)}}]),n}(s.a.Component)},122:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var a=n(4),r=n(5),c=n(9),o=n(8),i=n(2),s=n.n(i),u=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var t=this.props,e=t.index,n=(t.videoIndex,e+1<10?"0"+(e+1):""+(e+1));return s.a.createElement("div",{className:"footer-card"},s.a.createElement("div",{className:"footer-num",style:{backgroundColor:"#E4F2FB"}},n))}}]),n}(s.a.Component)},123:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var a=n(4),r=n(5),c=n(9),o=n(8),i=n(2),s=n.n(i),u=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var t=this.props,e=(t.index,t.videoIndex,t.spec,this.props.spec.actions),n=e[e.length-1].style.text;return s.a.createElement("div",{className:"footer-caption"},s.a.createElement("div",{className:"footer-text",style:{}},n))}}]),n}(s.a.Component)},397:function(t,e,n){"use strict";var a="http://calliope-dev.idvxlab.com",r="https://".concat("calliope-service.idvxlab.com",":8002/api/v1"),c="https://".concat("urania-api.idvxlab.com:8006"),o="https://".concat("calliope-service.idvxlab.com",":8002/log/v1"),i="https://".concat("urania-api.idvxlab.com:8006"),s="https://".concat("urania-api.idvxlab.com:8006"),u="https://account.datacalliope.com",p={url:{share:"".concat(i,"/share"),applicationUrl:a,publicPrefix:"http://calliope-dev.idvxlab.com",loginadmintest:"".concat(r,"/loginadmintest"),loginRedirectUrl:"".concat(u,"/#/login?response_type=code&client_id=").concat("6dcd0f8b-6990-4d69-9018-29b3351aa6ff","&grant_type=authorization_code&redirect_uri=").concat(a),logoutRedirectUrl:"".concat(a,"/#/logout"),authenUrl:u,accessToken:"".concat(r,"/accesstoken"),userImage:"".concat("https://service.datacalliope.com:8001","/img"),checkToken:"".concat(r,"/checktoken"),logout:"".concat(r,"/logout"),logoutAuthSystem:"".concat("https://service.datacalliope.com:8001","/logout"),users:"".concat(r,"/users"),activitiesApi:"".concat(o,"/users"),uploadDataPrefix:i,uploadData:"".concat(i,"/upload"),uploadGraphData:"".concat(i,"/uploadGraph"),fetch:"".concat(i,"/data/share"),factScoring:"".concat(c,"/fact"),generateRandomly:"".concat(c,"/generate"),generateGraphRandomly:"".concat(c,"/generateGraphRandomly"),filteredGenerate:"".concat(c,"/filteredgenerate"),question2gif:"".concat(s,"/edit_decompose")}};e.a=p},405:function(t,e,n){"use strict";n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return O}));var a=n(113),r=n.n(a),c=n(419),o=n(432),i=n.n(o),s=n(543),u=function(t,e){var n="";return n+=t,"object"===typeof e&&0!==Object.keys(e).length&&(n+="?".concat(Object(s.stringify)(e))),n},p=function(t){var e=t.url,n=t.method,a=t.param,r=t.data;return new Promise((function(t,c){i()({method:n,url:u(e,a),data:r}).then((function(e){e.status>=400?c():200===e.status||201===e.status||204===e.status?t(e.data):c()})).catch((function(t){c()}))}))},l=n(397);function d(t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){i()({method:"post",url:"".concat(l.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:e}).then((function(e){e.status>=400?n():200===e.status||201===e.status||204===e.status?t(e.data):n()})).catch((function(t){n()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e){return i()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function m(t,e){return i()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function g(t,e,n,a){return i()({method:"POST",url:l.a.url.factScoring,headers:{"Content-Type":"application/json; charset=utf-8"},data:{file_name:t,fact:e,filters:n,method:a}})}function v(t){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){i()({method:"post",url:"".concat(l.a.url.share),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:{share_json:e}}).then((function(e){e.status>=400?n():200===e.status||201===e.status||204===e.status?t(e.data):n()})).catch((function(t){n()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i()({method:"get",url:"".concat(l.a.url.fetch,"/").concat(e,".json"),config:{headers:{"Content-Type":"application/json; charset=utf-8"}}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(r.a.mark((function t(e,n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({url:"".concat(l.a.url.activitiesApi,"/lite/activities"),method:"post",param:{},data:n});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},428:function(t,e,n){"use strict";var a=n(49),r=n(2),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},o=n(348),i=function(t,e){return r.createElement(o.a,Object(a.a)(Object(a.a)({},t),{},{ref:e,icon:c}))};i.displayName="CloseOutlined";e.a=r.forwardRef(i)},429:function(t,e){var n,a,r=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(n===setTimeout)return setTimeout(t,0);if((n===c||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:c}catch(t){n=c}try{a="function"===typeof clearTimeout?clearTimeout:o}catch(t){a=o}}();var s,u=[],p=!1,l=-1;function d(){p&&s&&(p=!1,s.length?u=s.concat(u):l=-1,u.length&&f())}function f(){if(!p){var t=i(d);p=!0;for(var e=u.length;e;){for(s=u,u=[];++l<e;)s&&s[l].run();l=-1,e=u.length}s=null,p=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||p||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},523:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(5),r=n(4),c=n(52),o=n(3),i=Object(a.a)((function t(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;Object(r.a)(this,t),this.script=function(){return n.generatedScript},this.type=e,this.measure=a,this.subspace=i,this.groupby=s,this.focus=u,this.parameter=p,this.score=d,this.information=f,this.significance=h,this.chart=l,this.generatedScript=Object(c.a)(this),this.generatedSubtitle=Object(c.b)(this),this.duration=3e3,this.aggregated=!1,this.aggregatedFact=null,this.compoundType="",this.compoundChart=o.a.JUXTAPOSITION}))},590:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var a=n(44),r=n(2),c=n.n(r),o=function(t){var e={chart:t.chart,data:t.data,actions:[]},n=[],a=[],r=[];return t.actions&&((n=_.cloneDeep(t.actions)).map((function(t,e){"title"===t.add&&-1!==t.style.duration&&a.push(e)})),a.map((function(t){var a=n.slice(0,t+1);a.map((function(t){t.style&&(t.style.delay=0,t.style.duration=0)})),a.map((function(t,e){"title"===t.add&&e!==a.length-1&&a.splice(e,1)}));var c=_.cloneDeep(e);c.actions=a,r.push(c)}))),r},i=function(t,e){return c.a.createElement(a.a,{spec:t,uuid:e})}}}]);
//# sourceMappingURL=61.4a4c1439.chunk.js.map