(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[61],{116:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));n(553);var r=n(554),a=(n(448),n(431)),i=n(33),l=n(10),o=n(14),s=n(4),c=n(5),u=n(9),f=n(8),d=n(2),p=n.n(d),h=n(0),v=function(t){Object(u.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).draw=function(t){if(!document.getElementById(t.id+"-svg")){console.log("\u4e0d\u5b58\u5728");var e=t.info,n=t.info.values.map((function(t){return t.replace(",","")})),r=[],a=new Map;a.clear();var s=e.values.sort((function(t,e){return parseFloat(t)-parseFloat(e)}));s=s.map((function(t){return parseFloat(t)}));for(var c=parseFloat((Math.max.apply(Math,Object(o.a)(s))-Math.min.apply(Math,Object(o.a)(s)))/20),u=0;u<20;u++)a.set(u,0);for(u=0;u<s.length-1;u++){var f=parseInt((s[u]-Math.min.apply(Math,Object(o.a)(s)))/c);a.set(f,a.get(f)+1)}a.set(19,a.get(19)+1);var d,p=Object(l.a)(a);try{for(p.s();!(d=p.n()).done;){var v=Object(i.a)(d.value,2),m=v[0],y=v[1],x={};x.index=m,x.value=y,r.push(x)}}catch(C){p.e(C)}finally{p.f()}var b=0,g=0,O=0,j=0,w=196-j-g,M=36-b-O,I=h.scaleBand().range([0,w]),F=h.scaleLinear().range([M,0]);I.domain(r.map((function(t){return t.index}))),F.domain([0,Math.max.apply(Math,Object(o.a)(a.values()))]);var A=h.brushX().extent([[0,0],[w,M]]).on("brush",(function(){if(h.select("#"+t.id+"-xBrushInit").remove(),!h.event.selection)return;null===h.event.selection&&(h.event.selection=[0,w]);var e,a,i,l,u,f=null;0===(f=I.domain().filter((function(t){return h.event.selection[0]<=I(t)&&I(t)<=h.event.selection[1]}))).length&&(f=I.domain().filter((function(t){return h.event.selection[0]<=I(t)})));h.event.selection[0]!=h.event.selection[1]?(1===f.length?(e=f[0],a=f[0]+1):(e=f[0],a=f[f.length-1]),i=(a+1)*c+Math.min.apply(Math,Object(o.a)(s)),l=(0===e?0:e-1)*c+Math.min.apply(Math,Object(o.a)(s)),u=n.filter((function(t){return t>=l&&t<=i})),(isNaN(l)||isNaN(i))&&(i="",l="",u=[])):(e=0,a=0,i="",l="",u=[]);r.slice(e,a);h.selectAll("#"+t.id+"-textpostion").remove();var d=h.select("#"+t.id).append("div").attr("id",t.id+"-textpostion");d.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","left").text(""===l?l:l.toFixed(2)).attr("id",t.id+"minValue"),d.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","right").text(""===i?i:i.toFixed(2)).attr("id",t.id+"maxValue");var p=t.filters;t.filters[t.filterIndex].value=u,t.filters[t.filterIndex].type="equal",t.filters[t.filterIndex].value1=[l,i],t.filters[t.filterIndex].brushLocation=[h.event.selection[0],h.event.selection[1]],console.log("filters-brush-1",t.filters),t.updateFilters(p),t.updateFiltersChangeFlag(!0)})),E=h.select("#"+t.id).append("svg").attr("width",w+j+g).attr("height",M+b+O).attr("id",t.id+"-svg");E.append("rect").attr("width",w).attr("height",M).attr("x","0").attr("y","0").attr("fill","#f0f0f0");var N=E.append("g").attr("class","context");!function(t,e){var n=h.scalePow().range([t.length/10,0]).domain([t.length,0]).exponent(.5),r=e[1]-e[0];0===r&&(r=w);var a=Math.ceil(Math.abs(n(r)));t.filter((function(t,e){return e%a===0})).map((function(t){return t.index}))}(r,[0,w]),N.selectAll(".subBar").data(r).enter().append("rect").classed("subBar",!0).attr("height",(function(t){return M-F(t.value)})).attr("width",(function(t){return I.bandwidth()})).attr("x",(function(t){return I(t.index)})).attr("y",(function(t){return F(t.value)})).attr("fill","#777"),N.append("g").attr("class","x brush"+Math.random()).call(A).selectAll("rect").attr("y",0).attr("width",w).attr("height",M);var S=void 0==t.filters[t.filterIndex].brushLocation?0:t.filters[t.filterIndex].brushLocation[0],B=void 0==t.filters[t.filterIndex].brushLocation?196:t.filters[t.filterIndex].brushLocation[1];0===S&&196===B||N.append("rect").attr("class","xBrushInit").attr("id",t.id+"-xBrushInit").call(A).attr("x",S).attr("y",0).attr("width",B-S).attr("height",M),h.selectAll("#"+t.id+"-textpostion").remove();var L=h.select("#"+t.id).append("div").attr("id",t.id+"-textpostion"),k=void 0==t.filters[t.filterIndex].value1?Math.max.apply(Math,Object(o.a)(n)):t.filters[t.filterIndex].value1[1],z=void 0==t.filters[t.filterIndex].value1?Math.min.apply(Math,Object(o.a)(n)):t.filters[t.filterIndex].value1[0];L.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","left").text(z.toFixed(2)).attr("id",t.id+"minValue"),L.append("span").style("position","relative").style("bottom","60px").style("font-size","9px").style("float","right").text(k.toFixed(2)).attr("id",t.id+"maxValue")}},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.draw(this.props)}},{key:"componentDidUpdate",value:function(){this.draw(this.props)}},{key:"render",value:function(){this.props.info.values;var t=this.props.info.field;return p.a.createElement("div",{className:"NumericalFilter"},p.a.createElement("div",{className:"topicContent"},p.a.createElement(a.a,{title:t},p.a.createElement("p",{className:"fieldText"},t))),p.a.createElement("div",{className:"topicDetails topicDetailsSales",id:this.props.id,style:{height:"60px",overflow:"hidden"}}),p.a.createElement(r.a,null))}}]),n}(p.a.Component)},343:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(594);var a=n(433),i=n(595);function l(t,e){return Object(r.a)(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i=[],l=!0,o=!1;try{for(n=n.call(t);!(l=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);l=!0);}catch(s){o=!0,a=s}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}}(t,e)||Object(a.a)(t,e)||Object(i.a)()}},344:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(22);function a(t,e){if(null==t)return{};var n,a,i=Object(r.a)(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},381:function(t,e,n){"use strict";function r(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(e,"a",(function(){return r}))},433:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(562);function a(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},562:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},594:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},595:function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))}}]);
//# sourceMappingURL=61.9dcdc717.chunk.js.map