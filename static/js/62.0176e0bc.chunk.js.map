{"version":3,"sources":["pages/EditPage/EditDataVideos/VideoSliceCardList/FactCard.js","axios/config.js","axios/base.js","axios/api.js","../node_modules/process/browser.js","axios/activitiesCode.js","axios/recordactivities.js","action/videoAction.js","view/StoryView/Color.js"],"names":["getChoice","length","Math","round","random","getFactChartType","shema","fact","supportedChartTypes","getSupportedChartTypes","chart","cardSource","canDrag","props","isReady","isDragging","monitor","getItem","id","beginDrag","component","document","body","querySelectorAll","index","classList","add","endDrag","isPlayVideo","remove","didDrop","dropResult","getDropResult","addCard","insert","specData","schemaFilter","_","cloneDeep","schemaFilterLocal","schema","ChartType","ISOTYPE_BAR_CHART","VERTICAL_BAR_CHART","customizeFact","isValid","console","log","specChart","specFact","breakdown","groupby","map","d","width_height","width","height","type","style","duration","showSuggestion","size","datares","dataresLocal","specNew","data","values","insertFact","specs","record_activity","activitiesCode","dragNewFact","deleteUnusedFact","addBarToTimeLineBar","leftbar","rightbar","isDrag","FactCard","deleteFact","nextProps","this","nextFact","isEqual","filters","uuid","uuidv4","vis","fact2unitVis","connectDragSource","className","onClick","React","Component","DragSource","connect","dragSource","applicationUrl","urlPrefix","generationUrlPrefix","activitiesPrefix","uploadDataPrefix","question2gifPrefix","accountIp","config","url","share","publicPrefix","loginadmintest","loginRedirectUrl","logoutRedirectUrl","authenUrl","accessToken","userImage","checkToken","logout","logoutAuthSystem","users","activitiesApi","uploadData","uploadGraphData","fetch","factScoring","generateRandomly","generateGraphRandomly","filteredGenerate","question2gif","composeUrl","qs","result","Object","keys","stringify","requestWithoutCredentials","method","param","Promise","reslove","reject","axios","then","response","status","catch","error","formData","a","generate","filename","shareStory","jsonstring","fetchStory","uid","req","cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","i","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","uploadFile","generateFactSheet","downloadFile","editTopic","generateMoreFacts","editLayout","editFactCaption","editDiagram","editSheetCaption","actionid","objectid","action","meta","JSON","api","initialVideoSlice","facts","ActionType","INIT_VIDOE_CARD","replayVideoSlice","REPLAY_VIDEO_SLICE","playVideoSlice","PLAY_VIDEO_SLICE","playVideoContinue","PLAY_VIDEO_CONTINUE","stopPlayVideoContinue","STOP_PLAY_VIDEO_CONTINUE","addNowVideoTime","ADD_NOW_VIDEO_TIME","changeNowVideoTime","time","CHANGE_NOW_VIDEO_TIME","changeAllVideoTime","CHANGE_ALL_VIDEO_TIME","removeCard","REMOVE_CARD","changeCard","origin","target","CHANGE_CARD","exchangeCard","card","EXCHANGE_CARD","isGeneratedByAlg","ADD_CARD","addCards","cards","ADD_CARDS","addEmptyCard","ADD_EMPTY_CARD","setLeftsiderContent","content","SET_LEFTSIDER_CONTENT","initTimeLineBarWidth","INIT_TIME_LINE_BAR_WDITH","bar","ADD_BAR_TO_TIME_LINE_BAR","addBarsToTimeLineBar","bars","ADD_BARS_TO_TIME_LINE_BAR","deleteBarFromTimeLineBar","DELETE_BAR_FROM_TIME_LINE_BAR","changeTimeLineBar","CHANGE_TIME_LINE_BAR","setLeftBarWidth","SET_LEFT_BAR_WIDTH","setRightBarWidth","SET_RIGHT_BAR_WIDTH","setDragDirection","direction","SET_DRAG_DIRECTION","setMouseDownState","mouseDown","SET_MOUSE_DOWN_STATE","setDragState","drag","SET_DRAG_STATE","setCurrentX","clientx","SET_CURRENT_X","setLeftOffsetWidth","offset","SET_LEFT_OFFSET_WIDTH","setRightOffsetWidth","SET_RIGHT_OFFSET_WIDTH","setCurrentBarIndex","SET_CURRENT_BAR_INDEX","setPosition","position","SET_POSITION","setSceneScale","scale","SET_SCENE_SCALE","setDragCursor","cursor","SET_DRAG_CURSOR","question2Gif","question","narrative_spec","QUESTION_2_GIF","isGeneratingGIF","isGenerating","ISGENERATINGGIF","changeTempSpec","temp_spec","CHANGE_TEMP_SPEC","operatorChange","operatorType","OPERATOR_CHANGE","animationChange","animationType","ANIMATION_CHANGE","changeKeys","CHANGE_KEYS","changeOperator","CHANGE_OPERATOR","factColors"],"mappings":"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","file":"static/js/62.0176e0bc.chunk.js","sourcesContent":["import React from 'react';\nimport { fact2unitVis } from '../../../../tool/fact2unitVis';\nimport { fact2chart } from '../../../../tool/fact2vis.js';\nimport uuidv4 from 'uuid/v4';\nimport ChartType from '../../../../constant/ChartType';\nimport getSupportedChartTypes from '@/tool/getSupportedChartTypes';\nimport _ from 'lodash';\nimport { isValid, customizeFact } from '@/view/FactEditor/helper';\nimport { DragSource } from 'react-dnd';\nimport { factColors } from '../../../../view/StoryView/Color.js'\nimport { Tooltip } from 'antd';\nimport activitiesCode from '@/axios/activitiesCode';\nimport record_activity from '@/axios/recordactivities'\nimport * as d3 from 'd3';\nimport { addEmptyCard } from '../../../../action/videoAction';\nconst Types = {\n    CARD: 'card'\n}\nexport const getChoice = (length) => {\n    let choice = Math.round(Math.random() * (length - 1));\n    return choice;\n}\n\nexport const getFactChartType = (shema, fact, choice = 0) => {\n    let supportedChartTypes = getSupportedChartTypes(fact, shema);\n    if (supportedChartTypes.length === 0) return null;\n    return supportedChartTypes[getChoice(supportedChartTypes.length)].chart;\n}\n/**\n * Specifies the drag source contract.\n * Only `beginDrag` function is required.\n */\nconst cardSource = {\n    canDrag(props) {\n        // You can disallow drag based on props\n        return props.isReady\n    },\n\n    isDragging(props, monitor) {\n        // If your component gets unmounted while dragged\n        // (like a card in Kanban board dragged between lists)\n        // you can implement something like this to keep its\n        // appearance dragged:\n        return monitor.getItem().id === props.id\n    },\n\n    beginDrag(props, monitor, component) {\n        // Return the data describing the dragged item\n        let controls = document.body.querySelectorAll(\".dragCard\");\n        controls[component.props.index].classList.add(\"dragging\");\n        const item = { id: props.id }\n        return item\n    },\n\n    endDrag(props, monitor, component) {\n        if(props.isPlayVideo)\n        {\n            null\n        }\n        else\n        {\n            let controls = document.body.querySelectorAll(\".dragCard\");\n            controls[component.props.index].classList.remove(\"dragging\");\n\n            if (!monitor.didDrop()) {\n                // You can check whether the drop was successful\n                // or if the drag ended but nobody handled the drop\n                return\n            }\n\n            const dropResult = monitor.getDropResult();\n            let { addCard, index } = component.props;\n            if (typeof (dropResult.insert) !== \"undefined\") {\n                //record_activity(activitiesCode.dragNewFact, 1, props.fact)\n                let schemaFilter = _.cloneDeep(props.schemaFilterLocal);\n                let schema=props.schema\n                let specData\n                schemaFilter ? specData = { \"schema\": schemaFilter, } : specData = { \"schema\": schema };\n\n                let fact = props.fact\n\n                if (!fact.chart || fact.chart === \"\") {\n                    fact.chart = getFactChartType(specData.schema, fact); //针对生成页面的chart\n                }\n            \n                let chart = fact.chart;\n            \n                if (chart === ChartType.ISOTYPE_BAR_CHART) {\n                    fact.chart = ChartType.VERTICAL_BAR_CHART;\n                }\n                fact = customizeFact(fact);\n                if (!fact.chart || !isValid(fact)) {\n                    console.log(\"no valid\", fact)\n                    return null;\n                }\n\n                let specFact = {\n                    ...fact,\n                    breakdown: fact.groupby.map(d => {\n                        return {\n                            \"field\": d\n                        }\n                    })\n                }\n\n                let width_height = { \"width\": 135, \"height\": 86 };\n                let size = null;\n                let specChart;\n                if (width_height) {\n                    specChart = {\n                        width: width_height.width,\n                        height: width_height.height,\n                        type: \"unitvis\",\n                        style: \"business\",\n                        duration: 0,\n                        showSuggestion: true, //显示图表Unsupported\n                    }\n                } else {\n                    specChart = {\n                        size: size,\n                        type: \"unitvis\",\n                        style: \"business\",\n                        duration: 0,\n                        showSuggestion: true, //显示图表Unsupported\n                    }\n                }\n\n                let datares = _.cloneDeep(props.dataresLocal);\n\n                specData = {\n                    ...specData,\n                    values: datares,\n                }\n\n                let specNew = {\n                    data: specData,\n                    fact: specFact,\n                    chart: specChart,\n                }\n\n                let insertFact = props.fact\n                let specs = specNew\n                let time = 6000;\n                // 加入facts中\n                record_activity(activitiesCode.dragNewFact, 1 , props.fact)\n                props.insertFact(index, dropResult.insert);\n                // 添加卡片到下方keyframes中\n                addCard(insertFact,specs,time,false, dropResult.insert);\n                // 删除侧边栏中当前卡片\n                props.deleteUnusedFact(index);\n                // 添加对应的time控制的bar\n                let bar = { leftbar: 140, rightbar: 18,isDrag:false }\n                props.addBarToTimeLineBar(bar,dropResult.insert)\n            }\n        }\n    }\n}\n\n/**\n * Specifies which props to inject into your component.\n */\nfunction collect(connect, monitor) {\n    return {\n        connectDragSource: connect.dragSource(),\n        // You can ask the monitor about the current drag state:\n        isDragging: monitor.isDragging()\n    }\n}\n\n\nclass FactCard extends React.Component {\n\n    deleteFact = () => {\n        this.props.deleteUnusedFact(this.props.index);\n    }\n\n    shouldComponentUpdate(nextProps) {\n        let { fact } = this.props;\n        let nextFact = nextProps.fact;\n        return !_.isEqual(fact, nextFact);\n    }\n\n    render() {\n        let { data, schema, fact, isReady, filters,width,height } = this.props;\n\n        let datares = _.cloneDeep(this.props.dataresLocal);\n        // console.log(datares)\n\n\n        let schemaFilter = _.cloneDeep(this.props.schemaFilterLocal);\n\n        let specData\n        if (schemaFilter) {\n            specData = {\n                \"schema\": schemaFilter,\n            };\n        }\n        else {\n            specData = {\n                \"schema\": schema\n            };\n        }\n        let uuid = uuidv4();\n        // 接入 unit vis 图表\n        let vis = fact2unitVis(specData, uuid, fact, datares,null,{\"width\":width,\"height\": height} ,true);\n        // These props are injected by React DnD,\n        // as defined by your `collect` function above:\n        const { connectDragSource } = this.props;\n        return connectDragSource(\n            <li>\n                <div className={isReady ? \"factCard dragCard\" : \"factCard\"} >\n                    <div className='delete' onClick={() => this.deleteFact()}></div>\n                    <div className='vis'>\n                        {vis}\n                    </div>\n                </div>\n            </li>\n        )\n    }\n}\n\nexport default DragSource(Types.CARD, cardSource, collect)(FactCard);\n","//let calliopeService = 'service.datacalliope.com';\nlet calliopeService = 'calliope-service.idvxlab.com';\n//let calliopeLiteService = 'calliope-service.idvxlab.com:8004';\n// let calliopeLiteService = 'service.datacalliope.com:8002';\n\n// let calliopeLiteService = 'calliope-service.idvxlab.com:8002';\nlet calliopeLiteService = 'urania-api.idvxlab.com:8006';\n// let applicationUrl='https://datacalliope.com';\nlet applicationUrl = 'http://calliope-dev.idvxlab.com';\n\nlet urlPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}:8002/api/v1` : 'http://localhost:7001/api/v1';\n// let uploadDataPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6028';//todo  7001\nlet generationUrlPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6010';//todo  7001\n\n// let question2gifPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6030';//todo  7001\n\n\nlet activitiesPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}:8002/log/v1` : 'http://localhost:7002/log/v1';//\nlet publicPrefix = process.env.NODE_ENV === 'production' ? applicationUrl : 'http://localhost:3000';\n//let client_id = '033338f2-02a8-44d4-8d54-5173b4a864f9';\n\nlet uploadDataPrefix = `https://${calliopeLiteService}`;\nlet question2gifPrefix =`https://${calliopeLiteService}` ;\n// let urlPrefix = `https://${calliopeService}:8002/api/v1` ;\n// let uploadDataPrefix  = `https://${calliopeLiteService}`;//todo  7001\n// let generationUrlPrefix = `https://${calliopeLiteService}`;//todo  7001\n// let activitiesPrefix = `https://${calliopeService}:8002/log/v1`;//\n// let publicPrefix = applicationUrl ;\nlet client_id = '6dcd0f8b-6990-4d69-9018-29b3351aa6ff';\nlet accountIp = `https://account.datacalliope.com`\nlet logoutRedirectUrlIp = `https://service.datacalliope.com:8001`\n\nconst config = {\n    url: {\n        share: `${uploadDataPrefix}/share`,\n        applicationUrl: applicationUrl,\n        //share\n        publicPrefix: publicPrefix,\n        //login\n        loginadmintest: `${urlPrefix}/loginadmintest`,\n        loginRedirectUrl: `${accountIp}/#/login?response_type=code&client_id=${client_id}&grant_type=authorization_code&redirect_uri=${applicationUrl}`,\n        logoutRedirectUrl: `${applicationUrl}/#/logout`,\n        authenUrl: accountIp,\n        accessToken: `${urlPrefix}/accesstoken`,\n        userImage: `${logoutRedirectUrlIp}/img`,\n        checkToken: `${urlPrefix}/checktoken`,\n        //logout\n        logout: `${urlPrefix}/logout`,\n        logoutAuthSystem: `${logoutRedirectUrlIp}/logout`,\n        //activities\n        users: `${urlPrefix}/users`,\n        activitiesApi: `${activitiesPrefix}/users`,\n        //upload\n        uploadDataPrefix: uploadDataPrefix,\n        uploadData: `${uploadDataPrefix}/upload`,\n        uploadGraphData: `${uploadDataPrefix}/uploadGraph`,\n        \n        fetch: `${uploadDataPrefix}/data/share`,\n        //story generation\n        factScoring: `${generationUrlPrefix}/fact`,\n        generateRandomly: `${generationUrlPrefix}/generate`,\n        generateGraphRandomly: `${generationUrlPrefix}/generateGraphRandomly`,\n\n        //data filter\n        filteredGenerate:`${generationUrlPrefix}/filteredgenerate`,\n\n        // data gif\n        question2gif:`${question2gifPrefix}/edit_decompose`\n    }\n}\nexport default config","import axios from 'axios';\nimport { stringify } from 'query-string';\n// import config from '@/axios/config';\n\nconst composeUrl = function (url, qs) {\n    let result = '';\n    // if (url[0] !== '/') {\n    //   result += '/';\n    // }\n    result += url;\n    if (typeof qs === 'object' && Object.keys(qs).length !== 0) {\n        result += `?${stringify(qs)}`;\n    }\n    return result;\n};\n\nexport const request = ({ url, method, param, data }) => {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: method,\n            url: composeUrl(url, param),\n            data: data,\n            withCredentials: true,\n            // headers: { 'token': Cookies.get('userInfo') ? JSON.parse(Cookies.get('userInfo')).token : null },\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            if (error.response) {\n                if (error.response.status === 401) {\n                    //reject('401');\n                    reject()\n                    //退出登陆\n                    // axios({\n                    //     method: \"post\",\n                    //     url: `${config.url.logout}`,\n                    //     data: {},\n                    //     withCredentials: true\n                    // }).then((response) => {\n                    //     if (response.status === 200) {\n                    //         window.location.href = config.url.loginRedirectUrl //login first\n                    //     }\n                    // }).catch(\n                    // )\n                }\n            }\n            reject();\n        })\n    })\n};\n\nexport const requestWithoutCredentials = ({ url, method, param, data }) => {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: method,\n            url: composeUrl(url, param),\n            data: data\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n};\n\n","import * as req from './base';\nimport config from '@/axios/config';\nimport axios from 'axios';\n\n/**\n * 用户认证 相关接口\n * @param \n */\nexport async function checkToken() {\n    const data = await req.request({\n        url: `${config.url.checkToken}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\nexport async function loginadmintest() {\n    const data = await req.request({\n        url: `${config.url.loginadmintest}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\nexport async function accessToken(body) {\n    const data = await req.request({\n        url: `${config.url.accessToken}`,\n        method: 'post',\n        param: {},\n        data: body\n    });\n    return data;\n}\nexport async function logout() {\n    const data = await req.request({\n        url: `${config.url.logout}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\n\nexport async function uploadData(formData) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.uploadData}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'multipart/form-data' //application/json; charset=utf-8\n                },\n            },\n            data: formData\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\n\nexport function filteredgenerate(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\nexport function generate(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\nexport function question2gif(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\n\nexport function factScoring(filename, fact,filters, method) {\n    return axios({\n        \"method\": \"POST\",\n        \"url\": config.url.factScoring,\n        \"headers\": {\n            \"Content-Type\": \"application/json; charset=utf-8\"\n        },\n        \"data\": {\n            \"file_name\": filename,\n            \"fact\": fact,\n            \"filters\":filters,\n            \"method\": method,\n        }\n    })\n}\n\nexport async function shareStory(jsonstring) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.share}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'application/json; charset=utf-8'\n                },\n            },\n            data: {\n                \"share_json\": jsonstring\n            }\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\nexport async function fetchStory(id) {\n    return axios({\n        method: \"get\",\n        \"url\": `${config.url.fetch}/${id}.json`,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        }\n    })\n}\n/*****\n *技术栈：\n ssr(后端渲染)，koa(koa-views)：模板渲染，渲染出要生成pdf的页面)\n node.js 生成pdf插件 puppeteer：将渲染的页面生成PDF\n koa-send：将生成的PDF返回给前端页面下载 \n * \n data是后端用于渲染页面的数据\n */\nexport function generatePDF(data) {\n    return axios({\n        method: 'post',\n        url: `/generatePDF`,\n        param: {},\n        data: data\n    })\n}\n\n/**\n * 数据|故事|评论 操作行为记录 API\n * @param \n */\n\nexport async function activitiesApi(uid, body) {\n    const data = await req.requestWithoutCredentials({\n        url: `${config.url.activitiesApi}/lite/activities`,\n        method: 'post',\n        param: {},\n        data: body\n    });\n    return data;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","const activitiesCode = {\n    uploadFile: 1,\n    generateFactSheet: 2,\n    downloadFile:3,\n    editTopic:4,\n    generateMoreFacts:5,\n    editLayout:6,\n    dragNewFact:7,\n    deleteFact:8,\n    editFactCaption:9,\n    editDiagram:10,\n    editSheetCaption:11\n}\nexport default activitiesCode;","import * as api from '@/axios/api';\n\n\nexport default function record_activity (actionid, objectid,response) {\n    let uid = 'users'\n    let body = {\n        action: actionid,\n        objectid: objectid,\n        meta: JSON.stringify(response),\n    }\n    api.activitiesApi(uid, body).then(response => {console.log(response)\n    }).catch(error =>{console.log(response)})\n};\n","import ActionType from './type';\r\n\r\n\r\nexport const initialVideoSlice = (facts, schemaFilter, filename, datares, schema) => ({\r\n    type: ActionType.INIT_VIDOE_CARD,\r\n    facts,\r\n    schemaFilter,\r\n    filename,\r\n    datares,\r\n    schema\r\n})\r\n\r\nexport const replayVideoSlice = () => ({\r\n    type: ActionType.REPLAY_VIDEO_SLICE\r\n})\r\n\r\nexport const playVideoSlice = (index) => ({\r\n    type: ActionType.PLAY_VIDEO_SLICE,\r\n    index\r\n})\r\n\r\n//play video continuity\r\nexport const playVideoContinue = () => ({\r\n    type: ActionType.PLAY_VIDEO_CONTINUE\r\n    \r\n})\r\n\r\n//stop play video continuity\r\nexport const stopPlayVideoContinue = () => ({\r\n    type: ActionType.STOP_PLAY_VIDEO_CONTINUE\r\n})\r\n\r\n//add nowVideoTime\r\nexport const addNowVideoTime = () => ({\r\n    type: ActionType.ADD_NOW_VIDEO_TIME\r\n})\r\n\r\nexport const changeNowVideoTime = (time) => ({\r\n    type: ActionType.CHANGE_NOW_VIDEO_TIME,\r\n    time,\r\n})\r\n\r\nexport const changeAllVideoTime = (time) => ({\r\n    type: ActionType.CHANGE_ALL_VIDEO_TIME,\r\n    time,\r\n})\r\n\r\nexport const removeCard = (index) => ({\r\n    type: ActionType.REMOVE_CARD,\r\n    index\r\n})\r\n\r\n//drag card to another index\r\nexport const changeCard = (origin ,target) => ({\r\n    type: ActionType.CHANGE_CARD,\r\n    origin,\r\n    target    \r\n})\r\n\r\nexport const exchangeCard = (index,card) => ({\r\n    type: ActionType.EXCHANGE_CARD,\r\n    index,\r\n    card\r\n})\r\n\r\n//drag data fact to card list\r\nexport const addCard = (fact,specs,time,isGeneratedByAlg,insert) => ({\r\n    type:ActionType.ADD_CARD,\r\n    fact,specs,time,isGeneratedByAlg,\r\n    insert\r\n})\r\n\r\nexport const addCards = (cards,insert) => ({\r\n    type:ActionType.ADD_CARDS,\r\n    cards,\r\n    insert\r\n})\r\n\r\nexport const changeCardFlag = (index,flag) => ({\r\n    type:ActionType.CHANGE_CARD_FLAG,\r\n    index,\r\n    flag,\r\n})\r\n\r\n\r\n\r\n//add empty slice\r\nexport const addEmptyCard = () => ({\r\n    type: ActionType.ADD_EMPTY_CARD\r\n})\r\n\r\n//set leftsider content\r\nexport const setLeftsiderContent = (content) => ({\r\n    type: ActionType.SET_LEFTSIDER_CONTENT,\r\n    content\r\n})\r\n\r\n\r\n//--------------------time-line-bar-----------------\r\n//init time-line-bar width\r\n//barwidth=[{leftbar:140,rightbar:18},{leftbar:140,rightbar:18},{leftbar:140,rightbar:18}]\r\nexport const initTimeLineBarWidth = (length) => ({\r\n    type: ActionType.INIT_TIME_LINE_BAR_WDITH,\r\n    length\r\n})\r\n\r\nexport const addBarToTimeLineBar = (bar,index) => ({\r\n    type: ActionType.ADD_BAR_TO_TIME_LINE_BAR,\r\n    bar,\r\n    index\r\n})\r\nexport const addBarsToTimeLineBar = (bars,index) => ({\r\n    type: ActionType.ADD_BARS_TO_TIME_LINE_BAR,\r\n    bars,\r\n    index\r\n})\r\n\r\nexport const deleteBarFromTimeLineBar = (index) => ({\r\n    type: ActionType.DELETE_BAR_FROM_TIME_LINE_BAR,\r\n    index\r\n})\r\n\r\nexport const changeTimeLineBar= (origin,target) => ({\r\n    type: ActionType.CHANGE_TIME_LINE_BAR,\r\n    origin,\r\n    target\r\n})\r\n\r\n//set-left-bar-width in the 'barwidth' with \r\nexport const setLeftBarWidth = (index,width) => ({\r\n    type: ActionType.SET_LEFT_BAR_WIDTH,\r\n    index,\r\n    width\r\n})\r\n\r\nexport const setRightBarWidth = (index,width) => ({\r\n    type: ActionType.SET_RIGHT_BAR_WIDTH,\r\n    index,\r\n    width\r\n})\r\n\r\nexport const setDragDirection = (direction) => ({\r\n    type: ActionType.SET_DRAG_DIRECTION,\r\n    direction\r\n})\r\n\r\nexport const setMouseDownState=(mouseDown)=>({\r\n    type:ActionType.SET_MOUSE_DOWN_STATE,\r\n    mouseDown\r\n})\r\n\r\nexport const setDragState=(index,drag)=>({\r\n    type:ActionType.SET_DRAG_STATE,\r\n    index,\r\n    drag\r\n})\r\n\r\n\r\nexport const setCurrentX=(clientx)=>({\r\n    type:ActionType.SET_CURRENT_X,\r\n    clientx\r\n})\r\nexport const setLeftOffsetWidth=(offset)=>({\r\n    type:ActionType.SET_LEFT_OFFSET_WIDTH,\r\n    offset\r\n})\r\nexport const setRightOffsetWidth=(offset)=>({\r\n    type:ActionType.SET_RIGHT_OFFSET_WIDTH,\r\n    offset\r\n})\r\nexport const setCurrentBarIndex=(index)=>({\r\n    type:ActionType.SET_CURRENT_BAR_INDEX,\r\n    index\r\n})\r\n\r\nexport const setPosition = (position) => ({\r\n    type: ActionType.SET_POSITION,\r\n    position,\r\n})\r\n\r\nexport const setSceneScale = (scale) => ({\r\n    type: ActionType.SET_SCENE_SCALE,\r\n    scale,\r\n})\r\n\r\nexport const setDragCursor=(cursor)=>({\r\n    type:ActionType.SET_DRAG_CURSOR,\r\n    cursor\r\n})\r\n\r\n//--------------------question-----------------\r\nexport const question2Gif=(question, narrative_spec)=>({\r\n    type:ActionType.QUESTION_2_GIF,\r\n    question,\r\n    narrative_spec\r\n})\r\n\r\nexport const isGeneratingGIF=(isGenerating)=>({\r\n    type:ActionType.ISGENERATINGGIF,\r\n    isGenerating\r\n})\r\n\r\nexport const changeTempSpec=(temp_spec)=>({\r\n    type:ActionType.CHANGE_TEMP_SPEC,\r\n    temp_spec\r\n})\r\n\r\nexport const operatorChange=(operatorType)=>({\r\n    type:ActionType.OPERATOR_CHANGE,\r\n    operatorType\r\n})\r\n\r\nexport const animationChange=(animationType)=>({\r\n    type:ActionType.ANIMATION_CHANGE,\r\n    animationType\r\n})\r\n\r\nexport const changeKeys=(keys)=>({\r\n    type:ActionType.CHANGE_KEYS,\r\n    keys\r\n})\r\nexport const changeOperator=(origin ,target)=>({\r\n    type:ActionType.CHANGE_OPERATOR,\r\n    origin,\r\n    target\r\n})","export const factColors = {\"trend\": \"#8dd3c7\",\n                            \"extreme\": \"#f0e68c\",\n                            \"value\":\"#bebada\",\n                            \"categorization\":\"#fb8072\",\n                            \"difference\":\"#80b1d3\",\n                            \"proportion\":\"#fdb462\",\n                            \"distribution\":\"#b3de69\",\n                            \"rank\":\"#fccde5\",\n                            \"association\":\"#d9d9d9\",\n                            \"outlier\":\" #bc80bd\",\n                            \"null\": \"white\"}"],"sourceRoot":""}