{"version":3,"sources":["pages/EditPage/EditDataVideos/VideoSliceCardList/SliceCard.js","pages/EditPage/EditDataVideos/VideoSliceCardList/UnitVisDraw.js","pages/EditPage/EditDataVideos/VideoSliceCardList/SliceCardFooter.js","pages/EditPage/EditDataVideos/VideoSliceCardList/SliceCardCaption.js","pages/EditPage/EditDataVideos/VideoSliceCardList/DropView.js","axios/config.js","axios/base.js","axios/api.js","../node_modules/process/browser.js","model/fact.js","tool/narrative2cards.js"],"names":["getChoice","length","Math","round","random","getFactChartType","shema","fact","supportedChartTypes","getSupportedChartTypes","chart","SliceCard","deleteVideoSlice","index","props","isPlayVideo","removeCard","deleteBarFromTimeLineBar","deleteFact","generateTransitionFacts","Promise","resolve","reject","a","console","log","formerFact","cardItems","latterFact","filename","fileName","startFact","type","measure","subspace","groupby","focus","endFact","setState","operateState","OperationType","GENERATING","isUpdateEditing","data","file_name","max_story_length","method","start","end","api","config","url","generateRandomly","response","fail","ADD_FAILED","errorMessage","error","facts","story","tempFacts","factDict","Fact","generatedScript","genFactSentence","state","lang","push","i","myCards","myBars","schemaFilter","_","cloneDeep","schemaFilterLocal","schema","specData","ChartType","ISOTYPE_BAR_CHART","VERTICAL_BAR_CHART","isValid","datares","dataresLocal","values","specChart","width_height","width","height","style","duration","showSuggestion","size","specFact","breakdown","map","d","specs","insertIndex","insertFactByFact","myCard","spec","time","isGeneratedByAlg","bar","leftbar","rightbar","isDrag","addCards","addBarsToTimeLineBar","GENERATED","this","videoIndex","vis","uuid","uuidv4","narrativespec2Vis","className","ref","provided","innerRef","draggableProps","dragHandleProps","background","onClick","playVideoSlice","setLeftsiderContent","React","Component","UnitVisDraw","editClickSlice","ActionType","SET_EDIT_SLICE","nextProps","nextState","pre","narrative_spec","next","is","Immutable","fromJS","SliceCardFooter","num","backgroundColor","SliceCardCaption","myActions","actions","caption","text","DropView","addVideoSlice","addEmptyCard","onDragStart","onDragEnd","result","destination","origin","source","target","operators","changeOperator","specOperators","splice","correction","item","argsString","args","args5","substring","replace","correctionJSON","csvname","question","isGeneratingGIF","question2gif","question2Gif","changeTempSpec","step_actions","narrative_spec2cards","droppableId","direction","snapshot","droppableProps","key","draggableId","placeholder","applicationUrl","urlPrefix","generationUrlPrefix","activitiesPrefix","uploadDataPrefix","question2gifPrefix","accountIp","share","publicPrefix","loginadmintest","loginRedirectUrl","logoutRedirectUrl","authenUrl","accessToken","userImage","checkToken","logout","logoutAuthSystem","users","activitiesApi","uploadData","uploadGraphData","fetch","factScoring","generateGraphRandomly","filteredGenerate","composeUrl","qs","Object","keys","stringify","requestWithoutCredentials","param","reslove","axios","then","status","catch","formData","generate","filters","shareStory","jsonstring","fetchStory","id","uid","body","req","cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","Array","arguments","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","parameter","score","information","significance","script","generatedSubtitle","genSubtitle","aggregated","aggregatedFact","compoundType","compoundChart","JUXTAPOSITION","idx_titleaction","add","eachaction","slice","delay","step_spec"],"mappings":"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","file":"static/js/60.92171637.chunk.js","sourcesContent":["import React from 'react';\r\nimport { CloseOutlined } from '@ant-design/icons';\r\nimport { narrativespec2Vis } from '@/tool/narrative2cards';\r\nimport { fact2unitVis } from '@/tool/fact2unitVis';\r\n\r\nimport uuidv4 from 'uuid/v4';\r\nimport ActionType from '@/action/type';\r\nimport UnitVisDraw from './UnitVisDraw';\r\nimport ChartType from '../../../../constant/ChartType';\r\nimport SliceCardFooter from './SliceCardFooter';\r\nimport SliceCardCaption from './SliceCardCaption'\r\nimport * as api from '@/axios/api';\r\nimport OperationType from '@/constant/OperationType';\r\nimport config from '@/axios/config';\r\nimport Fact from '@/model/fact';\r\nimport { genFactSentence } from '@/sentencer/index';\r\nimport { isValid, customizeFact } from '@/view/FactEditor/helper';\r\nimport getSupportedChartTypes from '@/tool/getSupportedChartTypes';\r\nimport _ from 'lodash';\r\n\r\n\r\nexport const getChoice = (length) => {\r\n    let choice = Math.round(Math.random() * (length - 1));\r\n    return choice;\r\n}\r\n\r\nexport const getFactChartType = (shema, fact, choice = 0) => {\r\n    let supportedChartTypes = getSupportedChartTypes(fact, shema);\r\n    if (supportedChartTypes.length === 0) return null;\r\n    return supportedChartTypes[getChoice(supportedChartTypes.length)].chart;\r\n}\r\n\r\nexport default class SliceCard extends React.Component {\r\n\r\n\r\n    deleteVideoSlice = (index) => {\r\n        if(this.props.isPlayVideo)\r\n        {\r\n            null\r\n        }\r\n        else\r\n        {\r\n        this.props.removeCard(index)\r\n        this.props.deleteBarFromTimeLineBar(index)\r\n        this.props.deleteFact(index)\r\n        }\r\n    }\r\n\r\n    generateTransitionFacts = (index) => {\r\n        new Promise(async (resolve, reject) => {\r\n            console.log(\"generateTransitionFacts\"+index)\r\n            let formerFact = this.props.cardItems[index]\r\n            let latterFact = this.props.cardItems[index+1]\r\n\r\n            let filename = this.props.fileName\r\n            // 问题5，这里有start 和 end 的fact\r\n            let startFact = {\r\n                type:formerFact.fact.type,\r\n                measure:formerFact.fact.measure,\r\n                subspace:formerFact.fact.subspace,\r\n                groupby:formerFact.fact.groupby,\r\n                focus:formerFact.fact.focus,\r\n            }\r\n            let endFact = {\r\n                type:latterFact.fact.type,\r\n                measure:latterFact.fact.measure,\r\n                subspace:latterFact.fact.subspace,\r\n                groupby:latterFact.fact.groupby,\r\n                focus:latterFact.fact.focus,\r\n            }\r\n            \r\n            this.setState({\r\n                operateState: OperationType.GENERATING\r\n            });\r\n            this.props.isUpdateEditing(true);\r\n\r\n            let data = {\r\n                file_name:filename,\r\n                max_story_length:4,\r\n                method:\"guided\",\r\n                start:startFact,\r\n                end:endFact,\r\n            }\r\n            // 这里请求了api\r\n            const response = await api.generate(config.url.generateRandomly,data)\r\n\r\n            if (response.data.fail) {\r\n                console.log('fail')\r\n                this.setState({\r\n                    operateState: OperationType.ADD_FAILED,\r\n                    errorMessage: response.data.fail\r\n                })\r\n                reject()\r\n                //record_activity(activitiesCode.editTopic, 0, { filename: fileName, filters: filters });\r\n            }\r\n            if (response.data.error) {\r\n                console.log('error')\r\n                this.setState({\r\n                    operateState: OperationType.ADD_FAILED,\r\n                    errorMessage: response.data.error\r\n                })\r\n                reject()\r\n                //record_activity(activitiesCode.editTopic, 0, { filename: fileName, filters: filters });\r\n            }\r\n            const facts = response.data.story.facts;\r\n            let tempFacts = [];\r\n            for (let factDict of facts){    \r\n                let fact = new Fact(\r\n                    factDict['type'],\r\n                    factDict['measure'],\r\n                    factDict['subspace'],\r\n                    factDict['groupby'],\r\n                    factDict['focus'],\r\n                    factDict['parameter'],\r\n                    \"\", // chart\r\n                    factDict['score'],\r\n                    factDict['information'],\r\n                    factDict['significance']\r\n                )\r\n                fact.generatedScript = genFactSentence(fact, this.state.lang)\r\n                tempFacts.push(fact);\r\n            }\r\n            console.log(tempFacts.length)\r\n\r\n            var i = 0\r\n            var myCards = []\r\n            var myBars =[]\r\n\r\n            for(let fact of tempFacts){\r\n                if(tempFacts.length==1||tempFacts.length==2)\r\n                {\r\n                    break\r\n                }\r\n                if(i==0||i==tempFacts.length-1)\r\n                {\r\n                    i++\r\n                    continue\r\n                }\r\n                \r\n                let schemaFilter = _.cloneDeep(this.props.schemaFilterLocal);\r\n                let schema=this.props.schema\r\n                let specData\r\n                schemaFilter ? specData = { \"schema\": schemaFilter, } : specData = { \"schema\": schema };\r\n\r\n                if (!fact.chart || fact.chart === \"\") {\r\n                    fact.chart = getFactChartType(specData.schema, fact); //针对生成页面的chart\r\n                }\r\n            \r\n                let chart = fact.chart;\r\n            \r\n                if (chart === ChartType.ISOTYPE_BAR_CHART) {\r\n                    fact.chart = ChartType.VERTICAL_BAR_CHART;\r\n                }\r\n                // 不会返回一个Fact对象 而是返回一个{}\r\n                // fact = customizeFact(fact);\r\n                if (!fact.chart || !isValid(fact)) {\r\n                    console.log(\"no valid\", fact)\r\n                    return null;\r\n                }\r\n\r\n                let datares = _.cloneDeep(this.props.dataresLocal);\r\n\r\n                specData = {\r\n                    ...specData,\r\n                    values: datares,\r\n                }\r\n\r\n                let width_height = { \"width\": 135, \"height\": 86 };\r\n                let size = null;\r\n                let specChart;\r\n                if (width_height) {\r\n                    specChart = {\r\n                        width: width_height.width,\r\n                        height: width_height.height,\r\n                        type: \"unitvis\",\r\n                        style: \"business\",\r\n                        duration: 0,\r\n                        showSuggestion: true, //显示图表Unsupported\r\n                    }\r\n                } else {\r\n                    specChart = {\r\n                        size: size,\r\n                        type: \"unitvis\",\r\n                        style: \"business\",\r\n                        duration: 0,\r\n                        showSuggestion: true, //显示图表Unsupported\r\n                    }\r\n                }\r\n                let specFact = {\r\n                    ...fact,\r\n                    breakdown: fact.groupby.map(d => {\r\n                        return {\r\n                            \"field\": d\r\n                        }\r\n                    }),\r\n                    index:i\r\n                }\r\n\r\n                let specNew = {\r\n                    data: specData,\r\n                    fact: specFact,\r\n                    chart: specChart,\r\n                }\r\n                let specs = specNew\r\n                let time = 6000;\r\n                let insertIndex = index + i\r\n                //添加到facts中\r\n                this.props.insertFactByFact(fact,insertIndex)\r\n                // 添加卡片到下方keyframes中\r\n                //this.props.addCard(fact,specs,time,true, insertIndex);\r\n                let myCard = {\r\n                    fact:fact,\r\n                    spec:specs,\r\n                    time:time,\r\n                    isGeneratedByAlg:true}\r\n                myCards.push(myCard)\r\n                // 添加对应的time控制的bar\r\n                let bar = { leftbar: 140, rightbar: 18,isDrag:false }\r\n                myBars.push(bar)\r\n                //this.props.addBarToTimeLineBar(bar,insertIndex)\r\n                i++;\r\n            }\r\n            \r\n            //需要一次性加入 否则会有卡片units重叠现象\r\n            this.props.addCards(myCards,index+1)\r\n            this.props.addBarsToTimeLineBar(myBars,index+1)\r\n            \r\n            this.setState({\r\n                operateState: OperationType.GENERATED\r\n            })\r\n            this.props.isUpdateEditing(false)\r\n            resolve(response)\r\n\r\n\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n    \r\n        const { videoIndex, index } = this.props\r\n        let datares = _.cloneDeep(this.props.dataresLocal);\r\n        let schemaFilter = _.cloneDeep(this.props.schemaFilterLocal);\r\n        let schema = this.props.schema\r\n        let specData\r\n        schemaFilter ? specData = { \"schema\": schemaFilter, } : specData = { \"schema\": schema };\r\n        let uuid = uuidv4();\r\n        let vis;\r\n\r\n        if (this.props.spec !== 'empty') {\r\n            vis = narrativespec2Vis(this.props.spec, uuid);\r\n        } else {\r\n            vis = null;\r\n        }\r\n        console.log('herererre')\r\n        return (\r\n            <div\r\n                className='video-slice-card'\r\n                ref={this.props.provided.innerRef}\r\n                {...this.props.provided.draggableProps}\r\n                {...this.props.provided.dragHandleProps}>\r\n                <div\r\n                    className='complete-card'\r\n                    // style={videoIndex === index ? this.props.cardItems[index].isGeneratedByAlg?{border:\"3px solid #E4F2FB\",boxShadow: \"0 0 0 3px #ffb861, 0 0 0 2px #FFE1A4\"}:{border:\"3px solid #FFE1A4\",boxShadow: \"0 0 0 3px #ffb861, 0 0 0 2px #FFE1A4\"}: this.props.cardItems[index].isGeneratedByAlg?{border:\"3px solid #E4F2FB\"}:{border:\"3px solid #FFE1A4\"}}>\r\n                    // style={{border:\"3px solid #E4F2FB\"}}>         \r\n                    style={{background: '#f4f4f4'}}>           \r\n                    <div className='above-card'>\r\n                        <div className='fact-description'></div>\r\n                        <div className='delete-card-btn' onClick={() => this.deleteVideoSlice(index)}>\r\n                            <CloseOutlined />\r\n                        </div>\r\n                    </div> \r\n                    \r\n\r\n                    <UnitVisDraw\r\n                        index={index}\r\n                        videoIndex={videoIndex}\r\n                        vis={vis}\r\n                        playVideoSlice={this.props.playVideoSlice}\r\n                        setLeftsiderContent={this.props.setLeftsiderContent}\r\n                        {...this.props}\r\n                    />\r\n\r\n                    <SliceCardCaption\r\n                        spec = {this.props.spec}\r\n                        videoIndex={videoIndex} \r\n                        index={index}\r\n                        {...this.props}/>\r\n\r\n                    {/* <SliceCardFooter\r\n                        videoIndex={videoIndex} \r\n                        index={index}\r\n                        {...this.props}/> */}\r\n                </div>\r\n                {/* {\r\n                this.props.cardItems.length-1 == index ?\r\n                <div className=\"transition-button\" style={{opacity:'0'}}>\r\n                <div className=\"transition-icon\"></div>\r\n                </div>\r\n                :\r\n                ((this.props.cardItems[index].isGeneratedByAlg||this.props.cardItems[index+1].isGeneratedByAlg)?\r\n                <div className=\"transition-button\">\r\n                    <div className=\"cannot-transition-icon\"></div>\r\n                </div>\r\n                :\r\n                <div className=\"transition-button\" onClick={() => this.generateTransitionFacts(index)}>\r\n                    <div className=\"transition-icon\"></div>\r\n                </div>\r\n                )} */}\r\n\r\n                {/* <div className=\"transition-button\" style={{opacity:'0'}}>\r\n                <div className=\"transition-icon\"></div>\r\n                </div> */}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport ActionType from '@/action/type';\r\nimport { is } from 'immutable'\r\nimport Immutable from 'immutable'\r\n\r\nexport default class UnitVisDraw extends React.Component {\r\n\r\n    editClickSlice = (index) => {\r\n        /* if(this.props.isPlayVideo)\r\n        {\r\n            null\r\n        }\r\n        else\r\n        {\r\n            null\r\n        } */\r\n        // 这里todo\r\n        //改变videoIndex+视频中显示的内容\r\n        // if(this.props.cardItems[index].spec == 'empty')\r\n        // {\r\n        //     var videoChart = document.querySelector('[id=\"video-chart\"]');\r\n        //     videoChart.style.display = 'none';\r\n        //     var caption = document.querySelector('[id=\"caption\"]');\r\n        //     caption.style.display = 'none';\r\n        // }\r\n        // else\r\n        // {\r\n        //     var videoChart = document.querySelector('[id=\"video-chart\"]');\r\n        //     videoChart.style.display = 'block';\r\n        //     var caption = document.querySelector('[id=\"caption\"]');\r\n        //     caption.style.display = 'block';\r\n        // }\r\n        // this.props.playVideoSlice(index)\r\n        // //改变指针的位置\r\n        // let needleNow = 0;\r\n        // for (let x = 0; x<index ;x++){\r\n        //     needleNow += 47.3 * this.props.cardItems[x].time / 6000 /this.props.sceneScale+ 7.3\r\n        // }\r\n        // this.props.setPosition(needleNow);\r\n        // //点击卡片让卡片成为正在编辑的卡片\r\n        // this.props.changeCurrentEditing(true,this.props.facts[index])\r\n        // this.props.changeNowVideoTime((needleNow-7.3*index)/47.3*6000*this.props.sceneScale)\r\n        \r\n        //改变左侧栏中显示的内容\r\n        this.props.setLeftsiderContent(ActionType.SET_EDIT_SLICE)\r\n        \r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        console.log(\"~~~~~~~~~~\",this.props)\r\n        const pre = this.props.narrative_spec\r\n        const next = nextProps.narrative_spec\r\n        //进行深层对比，实现更精确的渲染\r\n        if (!is(Immutable.fromJS(pre), Immutable.fromJS(next))\r\n            ){\r\n            // console.log(this.props.index,'渲染！');\r\n            //如果当前的videoIndex对应的vis重新渲染改变了，那么currentSpec应该再重新取一下\r\n            /* if(index===videoIndex){\r\n                playVideoSlice(index)\r\n            }\r\n            console.log(\"fresh : \"+index) */\r\n            return true;\r\n        }\r\n        else \r\n        {\r\n            return false;\r\n        }\r\n    } \r\n\r\n    render() {\r\n        const { vis, index } = this.props\r\n        return (\r\n            <div className='below-card' onClick={() => this.editClickSlice(index)}>\r\n                {vis}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport { is } from 'immutable'\r\nimport Immutable from 'immutable'\r\n\r\nexport default class SliceCardFooter extends React.Component {\r\n    \r\n    render() {\r\n        const {index,videoIndex}=this.props\r\n        let num=index + 1 < 10 ? (\"0\" + (index + 1)) : (\"\" + (index + 1))\r\n        return (\r\n            <div className='footer-card'>\r\n                <div className='footer-num' style={{backgroundColor:\"#E4F2FB\"}}>\r\n                    {num}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React from 'react';\nimport { is } from 'immutable'\nimport Immutable from 'immutable'\n\nexport default class SliceCardCaption extends React.Component {\n    \n    render() {\n        const {index,videoIndex,spec}=this.props\n        let myActions = this.props.spec.actions\n        let caption =myActions[myActions.length-1].style.text\n        return (\n            <div className='footer-caption'>\n                <div className='footer-text' style={{}}>\n                    {caption}\n                </div>\n            </div>\n        )\n    }\n\n}","import React from 'react'\nimport { DropTarget } from 'react-dnd'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport SliceCard from './SliceCard.js';\nimport { PlusOutlined } from '@ant-design/icons'\nimport { narrative_spec2cards } from '@/tool/narrative2cards';\nimport * as api from '@/axios/api';\nimport config from '@/axios/config';\nimport ActionType from '@/action/type';\n\n// Drag sources and drop targets only interact\n// if they have the same string type.\n// You want to keep types in a separate file with\n// the rest of your app's constants.\nconst Types = {\n    CARD: 'card'\n}\n\nexport default class DropView extends React.Component{\n    constructor(props) {\n        super(props);\n    }\n\n\n    addVideoSlice = () => {\n        //增加一个空白的视频slice\n        this.props.addEmptyCard()\n    }\n\n    onDragStart = () => {\n        console.log('drag start!')\n    }\n\n    onDragEnd = (result) => {\n        console.log('drag end!')\n\n        // dropped outside the list\n        if (!result.destination) {\n            return;\n        }\n        let origin = result.source.index;\n        let target = result.destination.index;\n        if(origin == target)\n            return;\n\n        if(this.props.narrative_spec.operators[origin].type=='comparative' && this.props.narrative_spec.operators[target].type=='comparative')\n        {\n        // this.props.changeCard(origin,target);\n        console.log('origin'+origin)\n        console.log('target'+target)\n        this.props.changeOperator(origin,target);\n\n        new Promise(async (resolve, reject) => {\n        \n            let specOperators = this.props.narrative_spec.operators\n            specOperators.splice(specOperators.length-1,1)\n\n            let correction = ''\n            specOperators.map((item,index)=>{\n                let argsString = item.args\n                let args1 = argsString.substring(1,argsString.length-1)\n                let args2 = args1.replace(/\\[/g,'')\n                let argsA = args2.replace(/\\]/g,'')\n                let argsB = argsA.replace(/\\'/g,'')\n                let args3 = argsB.replace(/,/g,'').replace(/tbl\\|/g,'tbl:').replace(/col\\|/g,'col:').replace(/col\\|/g,'col:')\n                let args4 = args3.replace(/comparative\\|>\\|/g,'great/').replace(/comparative\\|<\\|/g,'less/').replace(/comparative\\|>=\\|/g,'greatequal/').replace(/comparative\\|<=\\|/g,'lessequal/').replace(/comparative\\|=\\|/g,'equal/').replace(/comparative\\|!=\\|/g,'notequal/')\n                let args5 = args4.replace(/(?<=\\/\\d+)\\D*?(?=col)/g,' ').replace(/\\|/g,'/')\n                correction = correction+item.type+' '+args5+', '\n            })\n            correction = correction.substring(0,correction.length-2) \n\n            let correctionJSON = {\n                \"correction\":correction,\n                \"operators\":this.props.narrative_spec.operators\n            }\n            let data = {\n                csvname:this.props.fileName,\n                question:this.props.question,\n                correction:correctionJSON\n            }\n            // 这里请求了api\n            \n            this.props.isGeneratingGIF(true)                                                                                                                                                                                                                                                            \n\n            var response = await api.question2gif(config.url.question2gif,data)\n\n            if (response.data.fail) {\n                console.log('fail')\n                this.setState({\n                    operateState: OperationType.ADD_FAILED,\n                    errorMessage: response.data.fail\n                })\n                reject()\n            }\n            if (response.data.error) {\n                console.log('error')\n                this.setState({\n                    operateState: OperationType.ADD_FAILED,\n                    errorMessage: response.data.error\n                })\n                reject()\n            }\n\n            // reponse就是narrative chart\n            this.props.isGeneratingGIF(false)\n            console.log(response.data)\n            this.props.question2Gif(this.props.question, response.data)\n            this.props.changeTempSpec(response.data)\n            this.props.setLeftsiderContent(ActionType.SET_EDIT_SLICE)\n\n            resolve(response)\n            \n        })\n    }\n    else\n        return;\n\n    }\n\n    render() {\n        const { dataresLocal, schemaFilterLocal, narrative_spec, cardItems, videoIndex } = this.props\n        const step_actions = narrative_spec2cards(narrative_spec)\n        //下方编辑视频slice时，添加空白页的按钮组件\n        const AddEmptySlice = () => {\n            return (\n                <div className='add-empty-slice' onClick={this.addVideoSlice}>\n                    <div className='add-empty-slice-btn'>\n                        <PlusOutlined className='add-logo-icon' />\n                    </div>\n                </div>\n            )\n        }\n        return(\n            <div className='video-fact-control'>\n                <DragDropContext onDragStart={this.onDragStart} onDragEnd={this.onDragEnd}>\n                    <Droppable droppableId=\"storyline\" direction=\"horizontal\">\n                        {(provided, snapshot) => (\n                            <div className='video-slice'\n                                ref={provided.innerRef}\n                                {...provided.droppableProps}>\n\n                                    {step_actions.map((item, index) => {\n                                    return(\n                                        <Draggable key={index} draggableId={index + ''} index={index}>\n                                            {(provided, snapshot) => (\n                                                <SliceCard\n                                                    videoIndex={videoIndex}\n                                                    index={index}\n                                                    provided={provided}\n                                                    spec={item}\n                                                    dataresLocal={dataresLocal}\n                                                    schemaFilterLocal={schemaFilterLocal}\n                                                    {...this.props}\n                                                />\n                                            )}\n                                        </Draggable>\n                                    )\n                                })}\n                                \n                                {provided.placeholder}\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n                {/* <AddEmptySlice /> */}\n            </div>\n        )\n    }\n}\n","//let calliopeService = 'service.datacalliope.com';\nlet calliopeService = 'calliope-service.idvxlab.com';\n//let calliopeLiteService = 'calliope-service.idvxlab.com:8004';\n// let calliopeLiteService = 'service.datacalliope.com:8002';\n\n// let calliopeLiteService = 'calliope-service.idvxlab.com:8002';\nlet calliopeLiteService = 'urania-api.idvxlab.com:8006';\n// let applicationUrl='https://datacalliope.com';\nlet applicationUrl = 'http://calliope-dev.idvxlab.com';\n\nlet urlPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}:8002/api/v1` : 'http://localhost:7001/api/v1';\n// let uploadDataPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6028';//todo  7001\nlet generationUrlPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6010';//todo  7001\n\n// let question2gifPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeLiteService}` : 'http://localhost:6030';//todo  7001\n\n\nlet activitiesPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}:8002/log/v1` : 'http://localhost:7002/log/v1';//\nlet publicPrefix = process.env.NODE_ENV === 'production' ? applicationUrl : 'http://localhost:3000';\n//let client_id = '033338f2-02a8-44d4-8d54-5173b4a864f9';\n\nlet uploadDataPrefix = `https://${calliopeLiteService}`;\nlet question2gifPrefix =`https://${calliopeLiteService}` ;\n// let urlPrefix = `https://${calliopeService}:8002/api/v1` ;\n// let uploadDataPrefix  = `https://${calliopeLiteService}`;//todo  7001\n// let generationUrlPrefix = `https://${calliopeLiteService}`;//todo  7001\n// let activitiesPrefix = `https://${calliopeService}:8002/log/v1`;//\n// let publicPrefix = applicationUrl ;\nlet client_id = '6dcd0f8b-6990-4d69-9018-29b3351aa6ff';\nlet accountIp = `https://account.datacalliope.com`\nlet logoutRedirectUrlIp = `https://service.datacalliope.com:8001`\n\nconst config = {\n    url: {\n        share: `${uploadDataPrefix}/share`,\n        applicationUrl: applicationUrl,\n        //share\n        publicPrefix: publicPrefix,\n        //login\n        loginadmintest: `${urlPrefix}/loginadmintest`,\n        loginRedirectUrl: `${accountIp}/#/login?response_type=code&client_id=${client_id}&grant_type=authorization_code&redirect_uri=${applicationUrl}`,\n        logoutRedirectUrl: `${applicationUrl}/#/logout`,\n        authenUrl: accountIp,\n        accessToken: `${urlPrefix}/accesstoken`,\n        userImage: `${logoutRedirectUrlIp}/img`,\n        checkToken: `${urlPrefix}/checktoken`,\n        //logout\n        logout: `${urlPrefix}/logout`,\n        logoutAuthSystem: `${logoutRedirectUrlIp}/logout`,\n        //activities\n        users: `${urlPrefix}/users`,\n        activitiesApi: `${activitiesPrefix}/users`,\n        //upload\n        uploadDataPrefix: uploadDataPrefix,\n        uploadData: `${uploadDataPrefix}/upload`,\n        uploadGraphData: `${uploadDataPrefix}/uploadGraph`,\n        \n        fetch: `${uploadDataPrefix}/data/share`,\n        //story generation\n        factScoring: `${generationUrlPrefix}/fact`,\n        generateRandomly: `${generationUrlPrefix}/generate`,\n        generateGraphRandomly: `${generationUrlPrefix}/generateGraphRandomly`,\n\n        //data filter\n        filteredGenerate:`${generationUrlPrefix}/filteredgenerate`,\n\n        // data gif\n        question2gif:`${question2gifPrefix}/edit_decompose`\n    }\n}\nexport default config","import axios from 'axios';\nimport { stringify } from 'query-string';\n// import config from '@/axios/config';\n\nconst composeUrl = function (url, qs) {\n    let result = '';\n    // if (url[0] !== '/') {\n    //   result += '/';\n    // }\n    result += url;\n    if (typeof qs === 'object' && Object.keys(qs).length !== 0) {\n        result += `?${stringify(qs)}`;\n    }\n    return result;\n};\n\nexport const request = ({ url, method, param, data }) => {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: method,\n            url: composeUrl(url, param),\n            data: data,\n            withCredentials: true,\n            // headers: { 'token': Cookies.get('userInfo') ? JSON.parse(Cookies.get('userInfo')).token : null },\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            if (error.response) {\n                if (error.response.status === 401) {\n                    //reject('401');\n                    reject()\n                    //退出登陆\n                    // axios({\n                    //     method: \"post\",\n                    //     url: `${config.url.logout}`,\n                    //     data: {},\n                    //     withCredentials: true\n                    // }).then((response) => {\n                    //     if (response.status === 200) {\n                    //         window.location.href = config.url.loginRedirectUrl //login first\n                    //     }\n                    // }).catch(\n                    // )\n                }\n            }\n            reject();\n        })\n    })\n};\n\nexport const requestWithoutCredentials = ({ url, method, param, data }) => {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: method,\n            url: composeUrl(url, param),\n            data: data\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n};\n\n","import * as req from './base';\nimport config from '@/axios/config';\nimport axios from 'axios';\n\n/**\n * 用户认证 相关接口\n * @param \n */\nexport async function checkToken() {\n    const data = await req.request({\n        url: `${config.url.checkToken}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\nexport async function loginadmintest() {\n    const data = await req.request({\n        url: `${config.url.loginadmintest}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\nexport async function accessToken(body) {\n    const data = await req.request({\n        url: `${config.url.accessToken}`,\n        method: 'post',\n        param: {},\n        data: body\n    });\n    return data;\n}\nexport async function logout() {\n    const data = await req.request({\n        url: `${config.url.logout}`,\n        method: 'post',\n        param: {},\n        data: {}\n    });\n    return data;\n}\n\n\nexport async function uploadData(formData) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.uploadData}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'multipart/form-data' //application/json; charset=utf-8\n                },\n            },\n            data: formData\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\n\nexport function filteredgenerate(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\nexport function generate(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\nexport function question2gif(url, data) {\n    return axios({\n        method: \"post\",\n        url: url,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\n\nexport function factScoring(filename, fact,filters, method) {\n    return axios({\n        \"method\": \"POST\",\n        \"url\": config.url.factScoring,\n        \"headers\": {\n            \"Content-Type\": \"application/json; charset=utf-8\"\n        },\n        \"data\": {\n            \"file_name\": filename,\n            \"fact\": fact,\n            \"filters\":filters,\n            \"method\": method,\n        }\n    })\n}\n\nexport async function shareStory(jsonstring) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.share}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'application/json; charset=utf-8'\n                },\n            },\n            data: {\n                \"share_json\": jsonstring\n            }\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\nexport async function fetchStory(id) {\n    return axios({\n        method: \"get\",\n        \"url\": `${config.url.fetch}/${id}.json`,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        }\n    })\n}\n/*****\n *技术栈：\n ssr(后端渲染)，koa(koa-views)：模板渲染，渲染出要生成pdf的页面)\n node.js 生成pdf插件 puppeteer：将渲染的页面生成PDF\n koa-send：将生成的PDF返回给前端页面下载 \n * \n data是后端用于渲染页面的数据\n */\nexport function generatePDF(data) {\n    return axios({\n        method: 'post',\n        url: `/generatePDF`,\n        param: {},\n        data: data\n    })\n}\n\n/**\n * 数据|故事|评论 操作行为记录 API\n * @param \n */\n\nexport async function activitiesApi(uid, body) {\n    const data = await req.requestWithoutCredentials({\n        url: `${config.url.activitiesApi}/lite/activities`,\n        method: 'post',\n        param: {},\n        data: body\n    });\n    return data;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import {genFactSentence,genSubtitle} from '../sentencer/index';\nimport ChartType from '../constant/ChartType';\nexport default class Fact {\n    constructor(type, measure = [], subspace = [], groupby = [], focus = [], parameter = [], chart = \"\",  score = 0, information = 0, significance = 0) {\n        this.type = type;\n        this.measure = measure;\n        this.subspace = subspace;\n        this.groupby = groupby;\n        this.focus = focus;\n        this.parameter = parameter;\n        this.score = score;\n        this.information = information;\n        this.significance = significance;\n        this.chart = chart;\n        this.generatedScript = genFactSentence(this);\n        this.generatedSubtitle = genSubtitle(this)\n        //animation duration\n        this.duration = 3000;\n        // Compound Fact\n        this.aggregated = false;\n        this.aggregatedFact = null;\n        this.compoundType = '';\n        this.compoundChart = ChartType.JUXTAPOSITION;\n    }\n    script = () => this.generatedScript;\n}","import Chart from '@/Chart';\nimport React from 'react';\n\n\n\nexport const narrative_spec2cards = function(narrative_spec){\n    let spec = {\n        \"chart\" : narrative_spec.chart,\n        \"data\": narrative_spec.data,\n        \"actions\": []\n    }\n    \n    let actions = []\n    let idx_titleaction = []\n    let step_actions = []\n    if(narrative_spec.actions){\n        actions = _.cloneDeep(narrative_spec.actions)\n        actions.map((item, index) => {\n            if(item.add === \"title\" && item.style.duration !== -1)\n            idx_titleaction.push(index)\n        })\n        // duration delay = 0\n        idx_titleaction.map((d) => {\n            let eachaction = actions.slice(0,d+1)\n            eachaction.map((item) => {\n                if(item.style){\n                    item.style.delay = 0\n                    item.style.duration = 0\n                }\n\n            })\n            // remove extra title\n            eachaction.map((item, index) => {\n                if (item.add === \"title\" && index !== eachaction.length-1){\n                    eachaction.splice(index,1)\n                }\n            })\n            let step_spec = _.cloneDeep(spec)\n            step_spec.actions = eachaction\n            step_actions.push(step_spec)\n        })\n\n    }\n    return step_actions\n}\n\nexport const narrativespec2Vis = function(spec, uuid) {\n\n    return <Chart spec = {spec} uuid = { uuid }/>\n}"],"sourceRoot":""}