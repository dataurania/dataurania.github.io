/*! For license information please see 61.78936bcd.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[61,72,73,74,78],{117:function(t,e,a){"use strict";a.r(e),a.d(e,"getChoice",(function(){return A})),a.d(e,"getFactChartType",(function(){return D})),a.d(e,"default",(function(){return I}));var n=a(113),r=a.n(n),c=a(20),o=a(10),i=a(422),s=a(4),u=a(5),p=a(9),l=a(8),d=a(2),f=a.n(d),h=a(423),m=a(600),g=(a(90),a(51)),v=a.n(g),b=(a(7),a(121)),y=a(3),j=(a(122),a(123)),O=a(419),x=a(83),S=a(401),k=a(526),C=a(52),E=a(27),w=a(32),T=a(12),_=a.n(T),A=function(t){return Math.round(Math.random()*(t-1))},D=function(t,e){var a=Object(w.a)(e,t);return 0===a.length?null:a[A(a.length)].chart},I=function(t){Object(p.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,u=new Array(n),p=0;p<n;p++)u[p]=arguments[p];return(t=e.call.apply(e,[this].concat(u))).deleteVideoSlice=function(e){t.props.isPlayVideo||(t.props.removeCard(e),t.props.deleteBarFromTimeLineBar(e),t.props.deleteFact(e))},t.clickSliceCard=function(e){console.log("click slice card",e);var a=_.a.cloneDeep(t.props.keys),n=e.toString();if(-1==a.indexOf(n))a.push(n);else{var r=a.indexOf(n);a.splice(r,1)}t.props.changeKeys(a)},t.generateTransitionFacts=function(e){new Promise(function(){var a=Object(i.a)(r.a.mark((function a(n,i){var s,u,p,l,d,f,h,m,g,v,b,j,w,T,A,I,L,N,R,F,P,B,G,U,J,M,V,H,z,q;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("generateTransitionFacts"+e),s=t.props.cardItems[e],u=t.props.cardItems[e+1],p=t.props.fileName,l={type:s.fact.type,measure:s.fact.measure,subspace:s.fact.subspace,groupby:s.fact.groupby,focus:s.fact.focus},d={type:u.fact.type,measure:u.fact.measure,subspace:u.fact.subspace,groupby:u.fact.groupby,focus:u.fact.focus},t.setState({operateState:x.a.GENERATING}),t.props.isUpdateEditing(!0),f={file_name:p,max_story_length:4,method:"guided",start:l,end:d},a.next=11,O.d(S.a.url.generateRandomly,f);case 11:(h=a.sent).data.fail&&(console.log("fail"),t.setState({operateState:x.a.ADD_FAILED,errorMessage:h.data.fail}),i()),h.data.error&&(console.log("error"),t.setState({operateState:x.a.ADD_FAILED,errorMessage:h.data.error}),i()),m=h.data.story.facts,g=[],v=Object(o.a)(m);try{for(v.s();!(b=v.n()).done;)j=b.value,(w=new k.a(j.type,j.measure,j.subspace,j.groupby,j.focus,j.parameter,"",j.score,j.information,j.significance)).generatedScript=Object(C.a)(w,t.state.lang),g.push(w)}catch(r){v.e(r)}finally{v.f()}console.log(g.length),T=0,A=[],I=[],L=0,N=g;case 23:if(!(L<N.length)){a.next=60;break}if(R=N[L],1!=g.length&&2!=g.length){a.next=27;break}return a.abrupt("break",60);case 27:if(0!=T&&T!=g.length-1){a.next=30;break}return T++,a.abrupt("continue",57);case 30:if(F=_.a.cloneDeep(t.props.schemaFilterLocal),P=t.props.schema,B=void 0,B=F?{schema:F}:{schema:P},R.chart&&""!==R.chart||(R.chart=D(B.schema,R)),R.chart===y.a.ISOTYPE_BAR_CHART&&(R.chart=y.a.VERTICAL_BAR_CHART),R.chart&&Object(E.b)(R)){a.next=40;break}return console.log("no valid",R),a.abrupt("return",null);case 40:G=_.a.cloneDeep(t.props.dataresLocal),B=Object(c.a)(Object(c.a)({},B),{},{values:G}),null,J=void 0,J=(U={width:135,height:86})?{width:U.width,height:U.height,type:"unitvis",style:"business",duration:0,showSuggestion:!0}:{size:null,type:"unitvis",style:"business",duration:0,showSuggestion:!0},M=Object(c.a)(Object(c.a)({},R),{},{breakdown:R.groupby.map((function(t){return{field:t}})),index:T}),V={data:B,fact:M,chart:J},6e3,H=e+T,t.props.insertFactByFact(R,H),z={fact:R,spec:V,time:6e3,isGeneratedByAlg:!0},A.push(z),q={leftbar:140,rightbar:18,isDrag:!1},I.push(q),T++;case 57:L++,a.next=23;break;case 60:t.props.addCards(A,e+1),t.props.addBarsToTimeLineBar(I,e+1),t.setState({operateState:x.a.GENERATED}),t.props.isUpdateEditing(!1),n(h);case 65:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.videoIndex,n=e.index,r=(_.a.cloneDeep(this.props.dataresLocal),_.a.cloneDeep(this.props.schemaFilterLocal)),c=this.props.schema;var o,i=v()();return o="empty"!==this.props.spec?Object(m.b)(this.props.spec,i):null,console.log("herererre"),f.a.createElement("div",Object.assign({className:"video-slice-card",ref:this.props.provided.innerRef},this.props.provided.draggableProps,this.props.provided.dragHandleProps),f.a.createElement("div",{className:"complete-card",style:{background:"#f4f4f4"},onClick:function(){return t.clickSliceCard(n)}},f.a.createElement("div",{className:"above-card"},f.a.createElement("div",{className:"fact-description"}),f.a.createElement("div",{className:"delete-card-btn"},f.a.createElement(h.a,null))),f.a.createElement(b.default,Object.assign({index:n,videoIndex:a,vis:o,playVideoSlice:this.props.playVideoSlice,setLeftsiderContent:this.props.setLeftsiderContent},this.props)),f.a.createElement(j.default,Object.assign({spec:this.props.spec,videoIndex:a,index:n},this.props))))}}]),a}(f.a.Component)},121:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return l}));var n=a(4),r=a(5),c=a(9),o=a(8),i=a(2),s=a.n(i),u=a(7),p=a(555),l=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).editClickSlice=function(e){t.props.setLeftsiderContent(u.a.SET_EDIT_SLICE)},t}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(t,e){console.log("~~~~~~~~~~",this.props);var a=this.props.narrative_spec,n=t.narrative_spec;return!Object(p.b)(p.a.fromJS(a),p.a.fromJS(n))}},{key:"render",value:function(){var t=this,e=this.props,a=e.vis,n=e.index;return s.a.createElement("div",{className:"below-card",onClick:function(){return t.editClickSlice(n)}},a)}}]),a}(s.a.Component)},122:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return u}));var n=a(4),r=a(5),c=a(9),o=a(8),i=a(2),s=a.n(i),u=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var t=this.props,e=t.index,a=(t.videoIndex,e+1<10?"0"+(e+1):""+(e+1));return s.a.createElement("div",{className:"footer-card"},s.a.createElement("div",{className:"footer-num",style:{backgroundColor:"#E4F2FB"}},a))}}]),a}(s.a.Component)},123:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return u}));var n=a(4),r=a(5),c=a(9),o=a(8),i=a(2),s=a.n(i),u=function(t){Object(c.a)(a,t);var e=Object(o.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var t=this.props,e=(t.index,t.videoIndex,t.spec,this.props.spec.actions),a=e[e.length-1].style.text;return s.a.createElement("div",{className:"footer-caption"},s.a.createElement("div",{className:"footer-text",style:{}},a))}}]),a}(s.a.Component)},342:function(t,e,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var c=typeof n;if("string"===c||"number"===c)t.push(n);else if(Array.isArray(n)){if(n.length){var o=r.apply(null,n);o&&t.push(o)}}else if("object"===c)if(n.toString===Object.prototype.toString)for(var i in n)a.call(n,i)&&n[i]&&t.push(i);else t.push(n.toString())}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},347:function(t,e,a){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a.d(e,"a",(function(){return n}))},401:function(t,e,a){"use strict";var n="http://calliope-dev.idvxlab.com",r="https://".concat("calliope-service.idvxlab.com",":8002/api/v1"),c="https://".concat("urania-api.idvxlab.com:8006"),o="https://".concat("calliope-service.idvxlab.com",":8002/log/v1"),i="https://".concat("urania-api.idvxlab.com:8006"),s="https://".concat("urania-api.idvxlab.com:8006"),u="https://account.datacalliope.com",p={url:{share:"".concat(i,"/share"),applicationUrl:n,publicPrefix:"http://calliope-dev.idvxlab.com",loginadmintest:"".concat(r,"/loginadmintest"),loginRedirectUrl:"".concat(u,"/#/login?response_type=code&client_id=").concat("6dcd0f8b-6990-4d69-9018-29b3351aa6ff","&grant_type=authorization_code&redirect_uri=").concat(n),logoutRedirectUrl:"".concat(n,"/#/logout"),authenUrl:u,accessToken:"".concat(r,"/accesstoken"),userImage:"".concat("https://service.datacalliope.com:8001","/img"),checkToken:"".concat(r,"/checktoken"),logout:"".concat(r,"/logout"),logoutAuthSystem:"".concat("https://service.datacalliope.com:8001","/logout"),users:"".concat(r,"/users"),activitiesApi:"".concat(o,"/users"),uploadDataPrefix:i,uploadData:"".concat(i,"/upload"),uploadGraphData:"".concat(i,"/uploadGraph"),fetch:"".concat(i,"/data/share"),factScoring:"".concat(c,"/fact"),generateRandomly:"".concat(c,"/generate"),generateGraphRandomly:"".concat(c,"/generateGraphRandomly"),filteredGenerate:"".concat(c,"/filteredgenerate"),question2gif:"".concat(s,"/edit_decompose")}};e.a=p},419:function(t,e,a){"use strict";a.d(e,"g",(function(){return d})),a.d(e,"d",(function(){return h})),a.d(e,"e",(function(){return m})),a.d(e,"b",(function(){return g})),a.d(e,"f",(function(){return v})),a.d(e,"c",(function(){return y})),a.d(e,"a",(function(){return O}));var n=a(113),r=a.n(n),c=a(422),o=a(437),i=a.n(o),s=a(551),u=function(t,e){var a="";return a+=t,"object"===typeof e&&0!==Object.keys(e).length&&(a+="?".concat(Object(s.stringify)(e))),a},p=function(t){var e=t.url,a=t.method,n=t.param,r=t.data;return new Promise((function(t,c){i()({method:a,url:u(e,n),data:r}).then((function(e){e.status>=400?c():200===e.status||201===e.status||204===e.status?t(e.data):c()})).catch((function(t){c()}))}))},l=a(401);function d(t){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){i()({method:"post",url:"".concat(l.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:e}).then((function(e){e.status>=400?a():200===e.status||201===e.status||204===e.status?t(e.data):a()})).catch((function(t){a()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e){return i()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function m(t,e){return i()({method:"post",url:t,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function g(t,e,a,n){return i()({method:"POST",url:l.a.url.factScoring,headers:{"Content-Type":"application/json; charset=utf-8"},data:{file_name:t,fact:e,filters:a,method:n}})}function v(t){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){i()({method:"post",url:"".concat(l.a.url.share),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:{share_json:e}}).then((function(e){e.status>=400?a():200===e.status||201===e.status||204===e.status?t(e.data):a()})).catch((function(t){a()}))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i()({method:"get",url:"".concat(l.a.url.fetch,"/").concat(e,".json"),config:{headers:{"Content-Type":"application/json; charset=utf-8"}}}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(r.a.mark((function t(e,a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({url:"".concat(l.a.url.activitiesApi,"/lite/activities"),method:"post",param:{},data:a});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},423:function(t,e,a){"use strict";var n=a(49),r=a(2),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},o=a(348),i=function(t,e){return r.createElement(o.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:c}))};i.displayName="CloseOutlined";e.a=r.forwardRef(i)},526:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a(5),r=a(4),c=a(52),o=a(3),i=Object(n.a)((function t(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;Object(r.a)(this,t),this.script=function(){return a.generatedScript},this.type=e,this.measure=n,this.subspace=i,this.groupby=s,this.focus=u,this.parameter=p,this.score=d,this.information=f,this.significance=h,this.chart=l,this.generatedScript=Object(c.a)(this),this.generatedSubtitle=Object(c.b)(this),this.duration=3e3,this.aggregated=!1,this.aggregatedFact=null,this.compoundType="",this.compoundChart=o.a.JUXTAPOSITION}))},600:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var n=a(44),r=a(2),c=a.n(r),o=function(t){var e={chart:t.chart,data:t.data,actions:[]},a=[],n=[],r=[];return t.actions&&((a=_.cloneDeep(t.actions)).map((function(t,e){"title"===t.add&&-1!==t.style.duration&&n.push(e)})),n.map((function(t){var n=a.slice(0,t+1);n.map((function(t){t.style&&(t.style.delay=0,t.style.duration=0)})),n.map((function(t,e){"title"===t.add&&e!==n.length-1&&n.splice(e,1)}));var c=_.cloneDeep(e);c.actions=n,r.push(c)}))),r},i=function(t,e){return c.a.createElement(n.a,{spec:t,uuid:e})}}}]);
//# sourceMappingURL=61.78936bcd.chunk.js.map