/*! For license information please see 55.fb8e1eb5.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[55,62,79],{127:function(e,t,n){"use strict";n.r(t),n.d(t,"getChoice",(function(){return T})),n.d(t,"getFactChartType",(function(){return D}));var r=n(4),a=n(5),i=n(9),o=n(8),c=n(20),u=n(2),s=n.n(u),d=n(90),l=(n(89),n(51)),f=n.n(l),p=n(3),h=n(32),g=n(12),v=n.n(g),m=n(27),y=n(545),b=(n(688),n(435)),E=n(436),T=(n(0),n(589),function(e){return Math.round(Math.random()*(e-1))}),D=function(e,t){var n=Object(h.a)(t,e);return 0===n.length?null:n[T(n.length)].chart},O={canDrag:function(e){return e.isReady},isDragging:function(e,t){return t.getItem().id===e.id},beginDrag:function(e,t,n){return document.body.querySelectorAll(".dragCard")[n.props.index].classList.add("dragging"),{id:e.id}},endDrag:function(e,t,n){if(e.isPlayVideo);else{if(document.body.querySelectorAll(".dragCard")[n.props.index].classList.remove("dragging"),!t.didDrop())return;var r=t.getDropResult(),a=n.props,i=a.addCard,o=a.index;if("undefined"!==typeof r.insert){var u,s=v.a.cloneDeep(e.schemaFilterLocal),d=e.schema;u=s?{schema:s}:{schema:d};var l=e.fact;if(l.chart&&""!==l.chart||(l.chart=D(u.schema,l)),l.chart===p.a.ISOTYPE_BAR_CHART&&(l.chart=p.a.VERTICAL_BAR_CHART),!(l=Object(m.a)(l)).chart||!Object(m.b)(l))return console.log("no valid",l),null;var f,h=Object(c.a)(Object(c.a)({},l),{},{breakdown:l.groupby.map((function(e){return{field:e}}))}),g={width:135,height:86};f=g?{width:g.width,height:g.height,type:"unitvis",style:"business",duration:0,showSuggestion:!0}:{size:null,type:"unitvis",style:"business",duration:0,showSuggestion:!0};var y=v.a.cloneDeep(e.dataresLocal),T={data:u=Object(c.a)(Object(c.a)({},u),{},{values:y}),fact:h,chart:f},O=e.fact,S=T;Object(E.a)(b.a.dragNewFact,1,e.fact),e.insertFact(o,r.insert),i(O,S,6e3,!1,r.insert),e.deleteUnusedFact(o);e.addBarToTimeLineBar({leftbar:140,rightbar:18,isDrag:!1},r.insert)}}}};var S=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).deleteFact=function(){e.props.deleteUnusedFact(e.props.index)},e}return Object(a.a)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.fact,n=e.fact;return!v.a.isEqual(t,n)}},{key:"render",value:function(){var e,t=this,n=this.props,r=(n.data,n.schema),a=n.fact,i=n.isReady,o=(n.filters,n.width),c=n.height,u=v.a.cloneDeep(this.props.dataresLocal),l=v.a.cloneDeep(this.props.schemaFilterLocal);e=l?{schema:l}:{schema:r};var p=f()(),h=Object(d.b)(e,p,a,u,null,{width:o,height:c},!0);return(0,this.props.connectDragSource)(s.a.createElement("li",null,s.a.createElement("div",{className:i?"factCard dragCard":"factCard"},s.a.createElement("div",{className:"delete",onClick:function(){return t.deleteFact()}}),s.a.createElement("div",{className:"vis"},h))))}}]),n}(s.a.Component);t.default=Object(y.DragSource)("card",O,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(S)},145:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));n(532);var r=n(534),a=n(113),i=n.n(a),o=n(419),c=n(10),u=n(4),s=n(5),d=n(9),l=n(8),f=n(2),p=n.n(f),h=n(83),g=n(535),v=n(85),m=n(397),y=n(742),b=n(127),E=n(52),T=n(435),D=n(436),O=n(405),S=n(523),w=n(51),N=n.n(w),I=n(12),C=n(692),j=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(u.a)(this,n),(r=t.call(this,e)).getGenerateURL=function(e){switch(e){case g.a.DATACOMICS:return m.a.url.generateGraphRandomly;case g.a.FACTSHEET:default:return m.a.url.generateRandomly}},r.addFact=function(){var e=g.a[0];r.setState({operateState:h.a.ADDING});var t=e.name;r.adding(r.getGenerateURL(t)).then((function(e){var n=e.data.story.facts;switch(t){case v.a.DATACOMICS:case v.a.FACTSHEET:case v.a.DASHBOARD:case v.a.DATAVIDEOS:default:var a,i=[],o=Object(c.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=new S.a(u.type,u.measure,u.subspace,u.groupby,u.focus,u.parameter,"",u.score,u.information,u.significance);s.uuid=N()(),i.push(s)}}catch(d){o.e(d)}finally{o.f()}r.props.addFact(i)}}))},r.adding=function(e){return new Promise(function(){var t=Object(o.a)(i.a.mark((function t(n,a){var o,c,u,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.props.fileName,(c=_.cloneDeep(r.props.filtersLocal))&&(u={file_name:o,max_story_length:10,filters:JSON.stringify(c),method:"mcts"}),t.next=5,O.d(e,u);case 5:s=t.sent,console.log("response-adding",s),s.data.fail&&(r.setState({operateState:h.a.ADD_FAILED,errorMessage:s.data.fail}),a(),Object(D.a)(T.a.generateMoreFacts,0,{filename:o,response:s})),s.data.error&&(r.setState({operateState:h.a.ADD_FAILED,errorMessage:s.data.error}),a(),Object(D.a)(T.a.generateMoreFacts,0,{filename:o,response:s})),r.setState({operateState:h.a.GENERATED}),n(s),Object(D.a)(T.a.generateMoreFacts,1,{filename:o,response:s});case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};var a=r.props.intl.options.currentLocale;return Object(I.filter)(a),r.state={},r}return Object(s.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.unusedFacts.length||this.addFact()}},{key:"render",value:function(){var e=this,t=this.props,n=t.intl,a=t.initDone,i=t.unusedFacts,o=this.state.operateState,c=n.options.currentLocale,u=a&&n.get("adding");i.map((function(e,t){e.generatedScript=Object(E.a)(e,c),e.generatedSubtitle=Object(E.b)(e,c)}));var s=function(){return p.a.createElement("div",{className:"add"},p.a.createElement("div",{className:"addImage",onClick:e.addFact}))};return p.a.createElement(y.a,{backend:C.a,options:{enableMouseEvents:!0}},p.a.createElement("div",{className:"Topic-Facts"},p.a.createElement("div",{className:"DataFacts"},p.a.createElement(r.a,{tip:u,spinning:o===h.a.ADDING,wrapperClassName:"editSpining"},p.a.createElement("div",{className:"factsList"},p.a.createElement("ul",null,i.map((function(t,n){return p.a.createElement("div",{className:"factCardOuterFrame"},p.a.createElement(b.default,Object.assign({width:135,height:86,key:t.uuid+t.index,dataresLocal:e.props.dataresLocal,schemaFilterLocal:e.props.schemaFilterLocal},e.props,{fact:t,index:n,id:t.uuid,isReady:!0})))})))))),p.a.createElement("div",null,p.a.createElement(s,null))))}}]),n}(p.a.Component)},342:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var o=a.apply(null,r);o&&e.push(o)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var c in r)n.call(r,c)&&r[c]&&e.push(c);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},346:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},352:function(e,t,n){var r=n(402),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},354:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(49);function a(e,t){var n=Object(r.a)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}},364:function(e,t,n){var r=n(382),a=n(430),i=n(431),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},365:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},368:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},371:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(2),a=r.isValidElement;function i(e,t){return function(e,t,n){return a(e)?r.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}},381:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},382:function(e,t,n){var r=n(352).Symbol;e.exports=r},397:function(e,t,n){"use strict";var r="http://calliope-dev.idvxlab.com",a="https://".concat("calliope-service.idvxlab.com",":8002/api/v1"),i="https://".concat("urania-api.idvxlab.com:8006"),o="https://".concat("calliope-service.idvxlab.com",":8002/log/v1"),c="https://".concat("urania-api.idvxlab.com:8006"),u="https://".concat("urania-api.idvxlab.com:8006"),s="https://account.datacalliope.com",d={url:{share:"".concat(c,"/share"),applicationUrl:r,publicPrefix:"http://calliope-dev.idvxlab.com",loginadmintest:"".concat(a,"/loginadmintest"),loginRedirectUrl:"".concat(s,"/#/login?response_type=code&client_id=").concat("6dcd0f8b-6990-4d69-9018-29b3351aa6ff","&grant_type=authorization_code&redirect_uri=").concat(r),logoutRedirectUrl:"".concat(r,"/#/logout"),authenUrl:s,accessToken:"".concat(a,"/accesstoken"),userImage:"".concat("https://service.datacalliope.com:8001","/img"),checkToken:"".concat(a,"/checktoken"),logout:"".concat(a,"/logout"),logoutAuthSystem:"".concat("https://service.datacalliope.com:8001","/logout"),users:"".concat(a,"/users"),activitiesApi:"".concat(o,"/users"),uploadDataPrefix:c,uploadData:"".concat(c,"/upload"),uploadGraphData:"".concat(c,"/uploadGraph"),fetch:"".concat(c,"/data/share"),factScoring:"".concat(i,"/fact"),generateRandomly:"".concat(i,"/generate"),generateGraphRandomly:"".concat(i,"/generateGraphRandomly"),filteredGenerate:"".concat(i,"/filteredgenerate"),question2gif:"".concat(u,"/edit_decompose")}};t.a=d},402:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(37))},405:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return T}));var r=n(113),a=n.n(r),i=n(419),o=n(432),c=n.n(o),u=n(543),s=function(e,t){var n="";return n+=e,"object"===typeof t&&0!==Object.keys(t).length&&(n+="?".concat(Object(u.stringify)(t))),n},d=function(e){var t=e.url,n=e.method,r=e.param,a=e.data;return new Promise((function(e,i){c()({method:n,url:s(t,r),data:a}).then((function(t){t.status>=400?i():200===t.status||201===t.status||204===t.status?e(t.data):i()})).catch((function(e){i()}))}))},l=n(397);function f(e){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){c()({method:"post",url:"".concat(l.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:t}).then((function(t){t.status>=400?n():200===t.status||201===t.status||204===t.status?e(t.data):n()})).catch((function(e){n()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return c()({method:"post",url:e,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:t})}function g(e,t){return c()({method:"post",url:e,config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:t})}function v(e,t,n,r){return c()({method:"POST",url:l.a.url.factScoring,headers:{"Content-Type":"application/json; charset=utf-8"},data:{file_name:e,fact:t,filters:n,method:r}})}function m(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){c()({method:"post",url:"".concat(l.a.url.share),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:{share_json:t}}).then((function(t){t.status>=400?n():200===t.status||201===t.status||204===t.status?e(t.data):n()})).catch((function(e){n()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c()({method:"get",url:"".concat(l.a.url.fetch,"/").concat(t,".json"),config:{headers:{"Content-Type":"application/json; charset=utf-8"}}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({url:"".concat(l.a.url.activitiesApi,"/lite/activities"),method:"post",param:{},data:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},429:function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,s=[],d=!1,l=-1;function f(){d&&u&&(d=!1,u.length?s=u.concat(s):l=-1,s.length&&p())}function p(){if(!d){var e=c(f);d=!0;for(var t=s.length;t;){for(u=s,s=[];++l<t;)u&&u[l].run();l=-1,t=s.length}u=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||d||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},430:function(e,t,n){var r=n(382),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(u){}var a=o.call(e);return r&&(t?e[c]=n:delete e[c]),a}},431:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},435:function(e,t,n){"use strict";t.a={uploadFile:1,generateFactSheet:2,downloadFile:3,editTopic:4,generateMoreFacts:5,editLayout:6,dragNewFact:7,deleteFact:8,editFactCaption:9,editDiagram:10,editSheetCaption:11}},436:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(405);function a(e,t,n){var a={action:e,objectid:t,meta:JSON.stringify(n)};r.a("users",a).then((function(e){console.log(e)})).catch((function(e){console.log(n)}))}},523:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(4),i=n(52),o=n(3),c=Object(r.a)((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;Object(a.a)(this,e),this.script=function(){return n.generatedScript},this.type=t,this.measure=r,this.subspace=c,this.groupby=u,this.focus=s,this.parameter=d,this.score=f,this.information=p,this.significance=h,this.chart=l,this.generatedScript=Object(i.a)(this),this.generatedSubtitle=Object(i.b)(this),this.duration=3e3,this.aggregated=!1,this.aggregatedFact=null,this.compoundType="",this.compoundChart=o.a.JUXTAPOSITION}))},532:function(e,t,n){"use strict";n(353),n(588)},533:function(e,t,n){var r=n(381),a=n(554),i=n(555),o=Math.max,c=Math.min;e.exports=function(e,t,n){var u,s,d,l,f,p,h=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=s;return u=s=void 0,h=t,l=e.apply(r,n)}function b(e){return h=e,f=setTimeout(T,t),g?y(e):l}function E(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-h>=d}function T(){var e=a();if(E(e))return D(e);f=setTimeout(T,function(e){var n=t-(e-p);return v?c(n,d-(e-h)):n}(e))}function D(e){return f=void 0,m&&u?y(e):(u=s=void 0,l)}function O(){var e=a(),n=E(e);if(u=arguments,s=this,p=e,n){if(void 0===f)return b(p);if(v)return clearTimeout(f),f=setTimeout(T,t),y(p)}return void 0===f&&(f=setTimeout(T,t)),l}return t=i(t)||0,r(n)&&(g=!!n.leading,d=(v="maxWait"in n)?o(i(n.maxWait)||0,t):d,m="trailing"in n?!!n.trailing:m),O.cancel=function(){void 0!==f&&clearTimeout(f),h=0,u=p=s=f=void 0},O.flush=function(){return void 0===f?l:D(a())},O}},534:function(e,t,n){"use strict";var r=n(13),a=n(82),i=n(350),o=n(351),c=n(355),u=n(356),s=n(2),d=n(342),l=n.n(d),f=n(354),p=n(533),h=n.n(p),g=n(702),v=n(368),m=n(371),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},b=(Object(v.a)("small","default","large"),null);var E=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(i.a)(this,n),(o=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||o.props).delay;t&&(o.cancelExistingSpin(),o.updateSpinning=h()(o.originalUpdateSpinning,t))},o.updateSpinning=function(){var e=o.props.spinning;o.state.spinning!==e&&o.setState({spinning:e})},o.renderSpin=function(e){var t,n=e.getPrefixCls,i=e.direction,c=o.props,u=c.prefixCls,d=c.className,p=c.size,h=c.tip,g=c.wrapperClassName,v=c.style,E=y(c,["prefixCls","className","size","tip","wrapperClassName","style"]),T=o.state.spinning,D=n("spin",u),O=l()(D,(t={},Object(a.a)(t,"".concat(D,"-sm"),"small"===p),Object(a.a)(t,"".concat(D,"-lg"),"large"===p),Object(a.a)(t,"".concat(D,"-spinning"),T),Object(a.a)(t,"".concat(D,"-show-text"),!!h),Object(a.a)(t,"".concat(D,"-rtl"),"rtl"===i),t),d),S=Object(f.a)(E,["spinning","delay","indicator"]),w=s.createElement("div",Object(r.a)({},S,{style:v,className:O}),function(e,t){var n=t.indicator,r="".concat(e,"-dot");return null===n?null:Object(m.b)(n)?Object(m.a)(n,{className:l()(n.props.className,r)}):Object(m.b)(b)?Object(m.a)(b,{className:l()(b.props.className,r)}):s.createElement("span",{className:l()(r,"".concat(e,"-dot-spin"))},s.createElement("i",{className:"".concat(e,"-dot-item")}),s.createElement("i",{className:"".concat(e,"-dot-item")}),s.createElement("i",{className:"".concat(e,"-dot-item")}),s.createElement("i",{className:"".concat(e,"-dot-item")}))}(D,o.props),h?s.createElement("div",{className:"".concat(D,"-text")},h):null);if(o.isNestedPattern()){var N=l()("".concat(D,"-container"),Object(a.a)({},"".concat(D,"-blur"),T));return s.createElement("div",Object(r.a)({},S,{className:l()("".concat(D,"-nested-loading"),g)}),T&&s.createElement("div",{key:"loading"},w),s.createElement("div",{className:N,key:"container"},o.props.children))}return w};var c=e.spinning,u=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(c,e.delay);return o.state={spinning:c&&!u},o.originalUpdateSpinning=o.updateSpinning,o.debouncifyUpdateSpinning(e),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return s.createElement(g.a,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){b=e}}]),n}(s.Component);E.defaultProps={spinning:!0,size:"default",wrapperClassName:""},t.a=E},535:function(e,t,n){"use strict";var r=n(85),a=n(550),i=[{name:r.a.FACTSHEET,iconUrl:"".concat(a.a,"/convertType/factsheet.png"),generateIconUrl:"".concat(a.a,"/convertType/factsheet_black.png")},{name:r.a.H5,iconUrl:"".concat(a.a,"/convertType/H5.png"),generateIconUrl:"".concat(a.a,"/convertType/H5_black.png")},{name:r.a.DATAVIDEOS,iconUrl:"".concat(a.a,"/convertType/video.png"),generateIconUrl:"".concat(a.a,"/convertType/video_black.png")}];t.a=i},550:function(e,t,n){"use strict";t.a="http://calliope-dev.oss-cn-shanghai.aliyuncs.com/image/images"},554:function(e,t,n){var r=n(352);e.exports=function(){return r.Date.now()}},555:function(e,t,n){var r=n(556),a=n(381),i=n(558),o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):o.test(e)?NaN:+e}},556:function(e,t,n){var r=n(557),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},557:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},558:function(e,t,n){var r=n(364),a=n(365);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},588:function(e,t,n){},589:function(e,t,n){"use strict";n.d(t,"r",(function(){return a})),n.d(t,"y",(function(){return i})),n.d(t,"v",(function(){return o})),n.d(t,"u",(function(){return c})),n.d(t,"M",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"k",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"x",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"G",(function(){return y})),n.d(t,"q",(function(){return b})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return T})),n.d(t,"o",(function(){return D})),n.d(t,"n",(function(){return O})),n.d(t,"E",(function(){return S})),n.d(t,"J",(function(){return w})),n.d(t,"C",(function(){return N})),n.d(t,"H",(function(){return I})),n.d(t,"D",(function(){return _})),n.d(t,"A",(function(){return C})),n.d(t,"F",(function(){return j})),n.d(t,"K",(function(){return A})),n.d(t,"z",(function(){return x})),n.d(t,"I",(function(){return L})),n.d(t,"L",(function(){return k})),n.d(t,"B",(function(){return P})),n.d(t,"w",(function(){return R})),n.d(t,"s",(function(){return F})),n.d(t,"m",(function(){return M})),n.d(t,"t",(function(){return U})),n.d(t,"g",(function(){return H})),n.d(t,"j",(function(){return G})),n.d(t,"l",(function(){return B}));var r=n(7),a=function(e,t,n,a,i){return{type:r.a.INIT_VIDOE_CARD,facts:e,schemaFilter:t,filename:n,datares:a,schema:i}},i=function(){return{type:r.a.REPLAY_VIDEO_SLICE}},o=function(e){return{type:r.a.PLAY_VIDEO_SLICE,index:e}},c=function(){return{type:r.a.PLAY_VIDEO_CONTINUE}},u=function(){return{type:r.a.STOP_PLAY_VIDEO_CONTINUE}},s=function(){return{type:r.a.ADD_NOW_VIDEO_TIME}},d=function(e){return{type:r.a.CHANGE_NOW_VIDEO_TIME,time:e}},l=function(e){return{type:r.a.CHANGE_ALL_VIDEO_TIME,time:e}},f=function(e){return{type:r.a.REMOVE_CARD,index:e}},p=function(e,t){return{type:r.a.CHANGE_CARD,origin:e,target:t}},h=function(e,t){return{type:r.a.EXCHANGE_CARD,index:e,card:t}},g=function(e,t,n,a,i){return{type:r.a.ADD_CARD,fact:e,specs:t,time:n,isGeneratedByAlg:a,insert:i}},v=function(e,t){return{type:r.a.ADD_CARDS,cards:e,insert:t}},m=function(){return{type:r.a.ADD_EMPTY_CARD}},y=function(e){return{type:r.a.SET_LEFTSIDER_CONTENT,content:e}},b=function(e){return{type:r.a.INIT_TIME_LINE_BAR_WDITH,length:e}},E=function(e,t){return{type:r.a.ADD_BAR_TO_TIME_LINE_BAR,bar:e,index:t}},T=function(e,t){return{type:r.a.ADD_BARS_TO_TIME_LINE_BAR,bars:e,index:t}},D=function(e){return{type:r.a.DELETE_BAR_FROM_TIME_LINE_BAR,index:e}},O=function(e,t){return{type:r.a.CHANGE_TIME_LINE_BAR,origin:e,target:t}},S=function(e,t){return{type:r.a.SET_LEFT_BAR_WIDTH,index:e,width:t}},w=function(e,t){return{type:r.a.SET_RIGHT_BAR_WIDTH,index:e,width:t}},N=function(e){return{type:r.a.SET_DRAG_DIRECTION,direction:e}},I=function(e){return{type:r.a.SET_MOUSE_DOWN_STATE,mouseDown:e}},_=function(e,t){return{type:r.a.SET_DRAG_STATE,index:e,drag:t}},C=function(e){return{type:r.a.SET_CURRENT_X,clientx:e}},j=function(e){return{type:r.a.SET_LEFT_OFFSET_WIDTH,offset:e}},A=function(e){return{type:r.a.SET_RIGHT_OFFSET_WIDTH,offset:e}},x=function(e){return{type:r.a.SET_CURRENT_BAR_INDEX,index:e}},L=function(e){return{type:r.a.SET_POSITION,position:e}},k=function(e){return{type:r.a.SET_SCENE_SCALE,scale:e}},P=function(e){return{type:r.a.SET_DRAG_CURSOR,cursor:e}},R=function(e,t){return{type:r.a.QUESTION_2_GIF,question:e,narrative_spec:t}},F=function(e){return{type:r.a.ISGENERATINGGIF,isGenerating:e}},M=function(e){return{type:r.a.CHANGE_TEMP_SPEC,temp_spec:e}},U=function(e){return{type:r.a.OPERATOR_CHANGE,operatorType:e}},H=function(e){return{type:r.a.ANIMATION_CHANGE,animationType:e}},G=function(e){return{type:r.a.CHANGE_KEYS,keys:e}},B=function(e,t){return{type:r.a.CHANGE_OPERATOR,origin:e,target:t}}},688:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={trend:"#8dd3c7",extreme:"#f0e68c",value:"#bebada",categorization:"#fb8072",difference:"#80b1d3",proportion:"#fdb462",distribution:"#b3de69",rank:"#fccde5",association:"#d9d9d9",outlier:" #bc80bd",null:"white"}},692:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r={};function a(e){var t=null;return function(){return null==t&&(t=e()),t}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(r),n.d(r,"FILE",(function(){return g})),n.d(r,"URL",(function(){return v})),n.d(r,"TEXT",(function(){return m}));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e){return a.push(e)})),a}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&i(t.prototype,n),r&&i(t,r),e}(),c=a((function(){return/firefox/i.test(navigator.userAgent)})),u=a((function(){return Boolean(window.safari)}));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,a=[],i=0;i<r;i++)a.push(i);a.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var o,c,u=[],s=[],d=[],l=0;l<r-1;l++)o=t[l+1]-t[l],c=n[l+1]-n[l],s.push(o),u.push(c),d.push(c/o);for(var f=[d[0]],p=0;p<s.length-1;p++){var h=d[p],g=d[p+1];if(h*g<=0)f.push(0);else{o=s[p];var v=s[p+1],m=o+v;f.push(3*m/((m+v)/h+(m+o)/g))}}f.push(d[d.length-1]);for(var y,b=[],E=[],T=0;T<f.length-1;T++){y=d[T];var D=f[T],O=1/s[T],S=D+f[T+1]-y-y;b.push((y-D-S)*O),E.push(S*O*O)}this.xs=t,this.ys=n,this.c1s=f,this.c2s=b,this.c3s=E}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,a=this.c2s,i=this.c3s,o=t.length-1;if(e===t[o])return n[o];for(var c,u=0,s=i.length-1;u<=s;){var d=t[c=Math.floor(.5*(u+s))];if(d<e)u=c+1;else{if(!(d>e))return n[c];s=c-1}}var l=e-t[o=Math.max(0,s)],f=l*l;return n[o]+r[o]*l+a[o]*f+i[o]*l*f}}])&&s(t.prototype,n),r&&s(t,r),e}();function l(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function f(e){return{x:e.clientX,y:e.clientY}}function p(e,t,n,r,a){var i=function(e){var t;return"IMG"===e.nodeName&&(c()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),o=l(i?e:t),s={x:n.x-o.x,y:n.y-o.y},f=e.offsetWidth,p=e.offsetHeight,h=r.anchorX,g=r.anchorY,v=function(e,t,n,r){var a=e?t.width:n,i=e?t.height:r;return u()&&e&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}(i,t,f,p),m=v.dragPreviewWidth,y=v.dragPreviewHeight,b=a.offsetX,E=a.offsetY,T=0===E||E;return{x:0===b||b?b:new d([0,.5,1],[s.x,s.x/f*m,s.x+m-f]).interpolate(h),y:T?E:function(){var e=new d([0,.5,1],[s.y,s.y/p*y,s.y+y-p]).interpolate(g);return u()&&i&&(e+=(window.devicePixelRatio-1)*y),e}()}}var h,g="__NATIVE_FILE__",v="__NATIVE_URL__",m="__NATIVE_TEXT__";function y(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=(b(h={},g,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),b(h,v,{exposeProperties:{urls:function(e,t){return y(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),b(h,m,{exposeProperties:{text:function(e,t){return y(e,t,"")}},matchesTypes:["Text","text/plain"]}),h);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&T(t.prototype,n),r&&T(t,r),e}();function O(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(E).filter((function(e){return E[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&S(t.prototype,n),r&&S(t,r),e}();function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&l(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=f(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var a=e.dataTransfer,i=O(a);if(r.monitor.isDragging()){if(a&&"function"===typeof a.setDragImage){var o=r.monitor.getSourceId(),c=r.sourceNodes.get(o),u=r.sourcePreviewNodes.get(o)||c;if(u){var s=r.getCurrentSourcePreviewNodeOptions(),d=p(c,u,n,{anchorX:s.anchorX,anchorY:s.anchorY},{offsetX:s.offsetX,offsetY:s.offsetY});a.setDragImage(u,d.x,d.y)}}try{null===a||void 0===a||a.setData("application/json",{})}catch(l){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(i)r.beginDragNativeItem(i);else{if(a&&!a.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=O(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,c()||r.actions.hover(t,{clientOffset:f(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:f(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:f(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new w(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new o(this.isNodeInDocument)}var t,n,a;return t=e,(n=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var a=function(t){return r.handleDragStart(t,e)},i=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",i),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},a=function(t){return n.handleDragOver(t,e)},i=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",a),t.addEventListener("drop",i),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",a),t.removeEventListener("drop",i)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return I({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return I({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(r).some((function(t){return r[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new D(E[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&C(t.prototype,n),a&&C(t,a),e}(),A=function(e,t){return new j(e,t)}},742:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(2),a=n(615);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=0,s=Object(r.memo)((function(e){var t=e.children,n=i(function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[d]||(i[d]=Object(a.b)(e,t,n,r));return i[d]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(c(e,["children"])),2),o=n[0],s=n[1];return r.useEffect((function(){return s&&u++,function(){s&&(0===--u&&(l()[d]=null))}}),[]),r.createElement(a.a.Provider,{value:o},t)}));s.displayName="DndProvider";var d=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function l(){return"undefined"!==typeof e?e:window}}).call(this,n(37))}}]);
//# sourceMappingURL=55.fb8e1eb5.chunk.js.map